{
  "metadata" : {
    "version" : "1.0.1",
    "api_version" : "1.0.0",
    "signature" : "12345",
    "device_models" : ["default"],
    "source_data_type": "json"
  },
  "field_mapping" : [
    {
      "target_field": "start_time",
      "selector" : "start_time",
      "core" : true,
      "indexed" : true,
      "type" : "date"
    },
    {
      "target_field": "patient_name",
      "selector" : "patient_name",
      "core" : true,
      "indexed" : true,
      "pii" : false,
      "type" : "string"
    },
    {
      "target_field": "event_id",
      "selector" : "event_id",
      "type": "integer",
      "core" : true,
      "indexed" : true
    },
    {
      "target_field" : "location",
      "selector" : "location",
      "type" : "location",
      "core" : true,
      "indexed" : true
    },
    {
      "target_field": "age",
      "selector": "age",
      "type": "integer",
      "indexed" : "true",
      "core" : true,
      "valid_values" : {
        "range" : {
          "min" : 0,
          "max" : 125
        }
      }
    },
    {
      "target_field": "assay_name",
      "selector" : "assay_name",
      "type" : "enum",
      "core" : true,
      "options" : [
        "cartridge_1",
        "cartridge_2"
      ]
    },
    {
      "target_field" : "system_user",
      "selector" : "system_user",
      "type": "string",
      "core" : true,
      "pii" : false,
      "indexed" : false
    },
    {
      "target_field" : "results[*].condition",
      "selector" : "results[*].condition",
      "type" : "enum",
      "core" : true,
      "indexed" : true,
      "options" : [
        "flu_a",
        "flu_b",
        "h1n1",
        "mtb"
      ]
    },
    {
      "target_field" : "results[*].result",
      "selector" : "results[*].result",
      "type" : "enum",
      "core" : true,
      "indexed" : true,
      "options" : {
        "when" : [
          {
            "property" : "condition",
            "value" : "mtb",
            "options" : [
              "positive",
              "positive_with_rif",
              "negative"
            ]
          },
        ],
        "else" : {
          "options" : [
            "positive",
            "negative"
          ]
        }
      }
    },
    {
      "target_field": "grade_of_resistance",
      "selector" : "resistance",
      "core" : false,
      "type": "integer",
      "valid_values": {
        "range" : {
          "min" : 0,
          "max" : 100
        }
      }
    },
    {
      "target_field": "device_serial_number",
      "selector" : "device_serial_number",
      "type" : "string",
      "core": true
    },
    {
      "target_field": "test_type",
      "selector" : "Test.test_type",
      "type" : "string",
      "core" : true
    },
    {
      "target_field": "temperature",
      "selector" : "Test.temp",
      "core" : false,
      "type": "integer",
      "pii" : false,
      "valid_values": {
        "range" : {
          "min" : -20,
          "max" : 60
        }
      },
      "indexed" : true
    },
    {
      "target_field": "percentage_of_confidence",
      "core" : false,
      "type": "integer",
      "selector" : "Test.percent",
      "pii" : false,
      "valid_values": {
        "range" : {
          "min" : 0.001,
          "max" : 999.999
        }
      },
      "indexed" : true
    },
    {
      "target_field": "end_time",
      "selector" : "Test.end_time",
      "type": "date",
      "core" : false,
      "pii" : "false",
      "valid_values": {
        "date" : "iso"
      },
      "indexed" : true
    }
  ]
}
