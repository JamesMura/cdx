  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$lhk2e9gQI9QB88k5hs0scusVDjSA8UPm5CYyo63FMCvRFjEcAICRS', 'Jacky', 'Wuckert', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$8njX5uUwMKFyhhMO9oCvVeL0emk9u/7jko3UfgRAgqOmtIBjiEbq.', 'Mia', 'Schneider', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 18[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 18
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$UJw4VG0GZkLGa.4FePT1/OAsIT8ZV68UOUfMY96r58.QN3A0kegzy', 'Marlen', 'Wintheiser', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 19[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 19
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$0d1bfVi7YA7T/S.N1dKgeOmQOZxcCk4oiCp4E6ndDB40yT.Q09MJG', 'Kavon', 'Cartwright', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 20[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 20
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$NgZAAeQgs6WiaSqvdfa8g.4Ir9dOR.z98Adkacqenr6R9qsUkgsj6', 'Rosalind', 'Macejkovic', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 21[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 21
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$lOx7YaflfWV8484C2YXy3u2I6prH5qTsn9KLZM2Z4BXYPxnVF4dMy', 'Genoveva', 'Johnston', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 22[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 22
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$04DyACiCteGgjSLYO9gGn.SMQJrFCs0gIsh.kPhkI.e3127ceuvV6', 'Georgianna', 'Bartoletti', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 23[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 23
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$Kr8UKOKXYQI3wBpSK.OQeuQaOMBXSZr3bssn37IsW2fSoWaVgDMwS', 'Michaela', 'Kertzmann', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 24[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 24
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$UgIt4S0wTSKnVu2b2HlMr.bFNCYASrj.VUWOXLU4iXSwldPdYjDwe', 'Hermann', 'Ruecker', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 25[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 25
  [1m[36m (1.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$/gUzPtnEHpjWIkDRBS2vfe/l8IGnWyCSFiXPFlQK.5bvDseMzqZ6q', 'Janis', 'Lind', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 26[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 26
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$nH62hhD81D5dceeIRlKvC.g/7fqmJ.LSu5ToLA80d.PvgieYFb0/6', 'Jayson', 'Johnston', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 27[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 27
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$I.5zrGAZ03QNh12gn6MyIOU5U4A8DnOnR9rkQEAMt.ZPzqzkK37te', 'Ansley', 'Murray', '2016-08-29 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27', '2016-08-30 21:31:27')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 28[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 28
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$RXmr8hPvUECY.gD/pXJtkeTGsfJMpsVHiZTvpIC73.HKk4o7a3/aO', 'Bryon', 'Parker', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 29[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 29
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$mb4Jm337eNIpDYpEtCqop.garIWTLjyyA1HnuZe.pgMb7kaNhzjeC', 'Reid', 'Krajcik', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 30[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 30
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$1N2DTR9nMGcypBgj6ESGi.Ynh7bmSpUx4i3mhuoXasXeU9qpY9XSa', 'Imelda', 'Kilback', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 31[0m
  [1m[35m (0.6ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 31
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$zME0bMIamhpt2o1KodtAM.ivwfHz.WObxaTo6djJwREuFL7nV.34e', 'Marcelino', 'Legros', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 32[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 32
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$K9YCN.idXPn9FqiV3uI/COSCkfCTQACc//8gOkh.YXTORUyRHrnnm', 'Domenica', 'Stoltenberg', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 33[0m
  [1m[35m (0.4ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 33
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$cwkvca0XVD7QbvZZII4t0.z791aA3Fruyh7byUdGdbYrih68EtPWm', 'Jaron', 'Larson', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 34[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 34
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$mnVz8tGMugPQ99BKqAjeY.4m6qqF7qIlNBhZHAGT0GdQipysFz8da', 'Helene', 'Boehm', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 35[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 35
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$mUs2e0EMuW7NRLuLZoVcF.jOZpNc7EuHKkH2ONybcWAK4tPMbCPiO', 'Roosevelt', 'Kling', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 36[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 36
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$xJPNgIup5rjkdcFfrnYa.eot0kVYGOgyUYRHSEyobJTp7609hm0uG', 'Liana', 'Lockman', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 37[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 37
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$3Haj4UaHgdbaDAzW0j1RU.5MGuTCyt2d6AnF42b5OM5aGEd8CJO/m', 'Rollin', 'Jast', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 38[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 38
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$UQgaLtStj0g/SxBfv7BsTOPZ.OYwofuRnqLFGJZcLt1YTM2kE9e2G', 'Aaliyah', 'Stiedemann', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 39[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 39
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$Ar7pYSwN.ogjNaTHZnd3Gueyhh7bB9DZcDpDYI5SbAMYMw5Flmtoe', 'Hailey', 'Prohaska', '2016-08-29 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18', '2016-08-30 21:42:18')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 40[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 40
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$Ih9UPw/CGdJlMAXrzfVUCe/tglk0xh3HtQSo198e1u/T.gNSeIUtK', 'Emanuel', 'Donnelly', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 41[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 41
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$zMzqTpd.TQz/gizmhzzpEe12fGdSv3wP1F8/rVoUgvpktTk0mYWEq', 'Kiarra', 'Blick', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 42[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 42
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$ca6LvjSwBxOswViWIjMFVuuujY9WeJZt1Vu4C.omYqDv5W.9QkUyC', 'Will', 'Jenkins', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 43[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 43
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$qWIIBBWiT0Zjtni.Za/e2OCk0TJp3jvNlQ/IfV9a9fTiwmTnrKo5m', 'Kenyatta', 'Rosenbaum', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 44[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 44
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$TYrvYvdg0ZfY3Knj9E9Zr.rH6rM6PGEeaNEQ440OWLHAa26LIt/QG', 'Shirley', 'Goyette', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 45[0m
  [1m[35m (1.1ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 45
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (5.5ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (5.4ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$OIXVIXk32v10X.8Se0agwOWH5qHSORGdmOewJ5tzPKpSBaBz5ac0i', 'Karley', 'Koelpin', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (3.5ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 46[0m
  [1m[35m (1.4ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 46
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$d3AYedbGnXhonwnCmszoCeiR1ZCZPcIyBnSFNPth3O5EaAlbh4vAK', 'Ramona', 'Swaniawski', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 47[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 47
  [1m[36m (1.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$HS3Jt4XoYYeYmzGDQAZ2F.vhCyLaAPx5KN3K80A.4F8YEe//5a1Ua', 'Daniella', 'Mraz', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 48[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 48
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$FE4au4sJBNNvmqp6QxU2QeDRE2hXPcpZ5q2UlJ4ROO/OIPFlzw27y', 'Pete', 'Hermann', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 49[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 49
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$nnfIaqut.ir/dribW707W.BpqNEY76b2cXkw5gq.SPTpjdD/08caC', 'Rubye', 'Zemlak', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 50[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 50
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$jFGWbUsM3mx4jcl9mFSiueSNa/tof.jGRYPbagFNPn03OZpgdrrQa', 'Jamel', 'Greenholt', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 51[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 51
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$4O/wtnsTuxvSbPjUQbNzT.HddZ5e9N0ykTrFUg74QUn95H7xR9DXe', 'Lane', 'Labadie', '2016-08-29 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22', '2016-08-30 21:43:22')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 52[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 52
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$hfVKxzX1xfxxmNJNbEWFYejHsG1RLN4DsT4zrKqUxvmMeuM8WsdHe', 'Lennie', 'Wolff', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 53[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 53
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 53[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$t4zdfUUuiH3ck3JckemqXOVKRyn.2rAJWVHgxGXi9tZlEUsn9VTYu', 'Lester', 'Bosco', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 54
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 54[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 54
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$V3xk4LSXjlWIlEgdGpIC7.IuO0RjZ7q9f6OH8t5MlD.LNkIJC5z.e', 'Tressa', 'Borer', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 55[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 55
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 55[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$Y/t1fnf3X3Tn7maBgv22TejrY4JCnhz7ynGGQMCFkgdC7p7dDu.Ei', 'Arch', 'Terry', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 56
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 56[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 56
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$piqQH6Ccupy2DXyvnowURuWKmGZ87LOUBnmO20SgEhiSGHe7YOJjS', 'Lorenza', 'Ryan', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 57[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 57
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 57[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$I2OyPCzWnhl46I184zFVp.poCc.iEnFszELw4RWKcsf7BS7CncGRa', 'Elena', 'Jacobs', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 58
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 58[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 58
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$JP3VSKy5OD3M51dFHK4T9O.4yZYTHJEWAJY1qXgxR4.3hQ3L0H.jm', 'Kayley', 'Gibson', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 59[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 59
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 59[0m
  [1m[35m (0.8ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$St7JdCpvlM2EkbEXCXVby.N3QSc5mAGmVFCV3rRCjxghZ1D4IoCdi', 'Seamus', 'Feil', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 60
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 60[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 60
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$Y3QxzBqeXR8QARFTKeRiA.TBUvzzt31mCma1beETqIcZ0EC.L7LGK', 'Sabryna', 'Mills', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 61[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 61
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 61[0m
  [1m[35m (0.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$sQfeqIKDfPeZhvkdfW0RCOilC8NwnlwMseHVgXDafXmCLf4Vel/de', 'Birdie', 'Hagenes', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 62
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 62[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 62
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$t0TkAHNJkIkxvBZ4IZyaweQyqok7cSAJx8Khll1DRGF09SMmsWQFi', 'Axel', 'Dooley', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')
  [1m[36mPolicy Load (0.6ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 63[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 63
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 63[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$oYgGRZFLh21j115kpWLXLuJEcFaaBj1DXdho1znjjK5nYYnG3UJsu', 'Jo', 'Bradtke', '2016-08-29 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40', '2016-08-30 21:44:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 64
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 64[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 64
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$2kttO8p8WpAwcjRDcT1zlOOmpsa4IWXqd52eabJEK7Oye1ARkVH3a', 'Adrianna', 'Hyatt', '2016-08-29 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 65[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 65
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 65[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 65
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 65)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 65  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 65[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 65 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b5a9c0be-f20a-95c4-3c48-37cee058157b', 65, 'Aric Smith', '2016-08-30 21:46:20', '2016-08-30 21:46:20')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 123 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 17, 123, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 105[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=17\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=17\",\"action\":\"site:read\"},{\"resource\":\"device?institution=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=17\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=17\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 124 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 17, 124, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 106[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 65
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 65[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 65
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 65[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 355
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '17', 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '17', 65, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '17', 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '17', 65, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '17', 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '17', 65, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '17', 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '17', 65, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '17', 65, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 17, 65, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 17, 65, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 17, 65, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 17, 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 17, 65, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 17, 65, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 17, 65, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 17, 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 17, 65, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 65, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 17, 65, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 65  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 65
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 65 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$SFsdolD9SCwqnVeQbUUTuOR2s/W6BIrZlup1yzWvyYc5u6pfbter6', 'Jordon', 'Deckow', '2016-08-29 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 66[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 66
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 66[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 66
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 66)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 66  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 66[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 66 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('43c7727c-22f3-daf9-d9ba-2d81c60a6bca', 66, 'Mrs. Terry Goyette', '2016-08-30 21:46:20', '2016-08-30 21:46:20')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/18\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=18\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=18\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 125 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 18, 125, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 107[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/18\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=18\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=18\",\"action\":\"site:read\"},{\"resource\":\"device?institution=18\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=18\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=18\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=18\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=18\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=18\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=18\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 126 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 18, 126, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 108[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 66
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 66[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 66
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 66[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 376
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '18', 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '18', 66, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '18', 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '18', 66, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '18', 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '18', 66, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '18', 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '18', 66, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '18', 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 18, 66, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 18, 66, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 18, 66, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 18, 66, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 18, 66, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 18, 66, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 18, 66, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 18, 66, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 18, 66, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 66, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 18, 66, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 66  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 66
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 18 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 66 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$ZSQ4xR3rGoqAmEoNlgStBuNIzm0nS.1acg2OpwSW4Dtw4JUxaCVVO', 'Linnie', 'Hoppe', '2016-08-29 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 67[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 67
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 67[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 67
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 67)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 67  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 67[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 67 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('4c93b816-5547-e238-7793-46d3bfb626c3', 67, 'Mr. Alphonso Witting', '2016-08-30 21:46:20', '2016-08-30 21:46:20')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/19\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=19\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=19\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 127 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 19, 127, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 109[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/19\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=19\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=19\",\"action\":\"site:read\"},{\"resource\":\"device?institution=19\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=19\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=19\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=19\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=19\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=19\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=19\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 128 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 19, 128, '2016-08-30 21:46:20', '2016-08-30 21:46:20')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 110[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 67
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 67[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 67
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 67[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 397
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '19', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '19', 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '19', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '19', 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '19', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '19', 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '19', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '19', 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '19', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 19, 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 19, 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 19, 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 19, 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 19, 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 19, 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 19, 67, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 19, 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 19, 67, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 67, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 19, 67, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 67  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 67
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 19 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 67 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$pVK3N1vGRNkx36OfOtGbj./wQPs7ADhuJi.wxQObX54UyeYJB1tM6', 'Kyla', 'Bechtelar', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 68[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 68
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 68[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 68
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 68)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 68  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 68[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 68 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a67a44b2-67ee-1afc-f608-b8b2bf3df6b9', 68, 'Ross Senger', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/20\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=20\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=20\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 129 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 20, 129, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 111[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/20\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=20\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=20\",\"action\":\"site:read\"},{\"resource\":\"device?institution=20\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=20\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=20\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=20\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=20\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=20\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=20\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 130 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 20, 130, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 112[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 68
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 68[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 68
  [1m[36mComputedPolicy Load (1.6ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 68[0m
  [1m[35mComputedPolicyException Load (7.7ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 418
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '20', 68, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '20', 68, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '20', 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '20', 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '20', 68, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '20', 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '20', 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '20', 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '20', 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 20, 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 20, 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 20, 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 20, 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 20, 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 20, 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 20, 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 20, 68, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 20, 68, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 68, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 20, 68, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 68  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 68
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 20 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 68 LIMIT 1[0m
  [1m[35m (8.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$sLHO/69H429daEg56x.MB.c32tOLE59NPh0xS3Zg/ptev2py4UsQi', 'Deven', 'Rau', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 69[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 69
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 69[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 69
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 69)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 69  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 69[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 69 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('9a37505b-e529-8284-ae7c-8ea3b354c27c', 69, 'Greg McCullough IV', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/21\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=21\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=21\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 131 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 21, 131, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 113[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/21\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=21\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=21\",\"action\":\"site:read\"},{\"resource\":\"device?institution=21\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=21\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=21\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=21\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=21\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=21\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=21\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 132 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 21, 132, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 114[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 69
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 69[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 69
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 69[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 439
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '21', 69, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '21', 69, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '21', 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '21', 69, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '21', 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '21', 69, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '21', 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '21', 69, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '21', 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 21, 69, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 21, 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 21, 69, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 21, 69, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 21, 69, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 21, 69, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 21, 69, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 21, 69, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 21, 69, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 69, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 21, 69, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 69  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 69
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 21 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 69 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$98wRErSlqPS7q9dja9Pw4.WdB6foo91I0NE9zJ28OXPIdt8yCYM7G', 'Damien', 'Cremin', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 70[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 70
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 70[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 70
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 70)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 70  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 70[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 70 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('80a38cfa-6581-2ede-3931-4ddb41da3ab3', 70, 'Rod Skiles', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/22\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=22\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=22\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 133 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 22, 133, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 115[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/22\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=22\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=22\",\"action\":\"site:read\"},{\"resource\":\"device?institution=22\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=22\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=22\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=22\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=22\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=22\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=22\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 134 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 22, 134, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 116[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 70
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 70[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 70
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 70[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 460
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '22', 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '22', 70, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '22', 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '22', 70, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '22', 70, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '22', 70, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '22', 70, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '22', 70, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '22', 70, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 22, 70, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 22, 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 22, 70, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 22, 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 22, 70, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 22, 70, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 22, 70, 1)
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 22, 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 22, 70, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 70, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 22, 70, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 70  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.6ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 70
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.5ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 22 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 70 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$646KPIf8sIRdgiV9TjKEIuegzMsUOuxldORCKaanatBXCxV5Sccx6', 'Demetris', 'Adams', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 71[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 71
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 71[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 71
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 71)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 71  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 71[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 71 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('dff4d7dd-a553-8b66-a352-c265fbac9c80', 71, 'Dameon Swaniawski', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/23\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=23\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=23\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 135 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 23, 135, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 117[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/23\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=23\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=23\",\"action\":\"site:read\"},{\"resource\":\"device?institution=23\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=23\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=23\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=23\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=23\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=23\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=23\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 136 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 23, 136, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 118[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 71
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 71[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 71
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 71[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 481
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '23', 71, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '23', 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '23', 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '23', 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '23', 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '23', 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '23', 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '23', 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '23', 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 23, 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 23, 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 23, 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 23, 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 23, 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 23, 71, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 23, 71, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 23, 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 23, 71, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 71, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 23, 71, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 71  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 71
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 23 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 71 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$bEdV11h7kYvc/KrxhXfeH.BPwC62N./gPhffrsBGG0gxrZ56lF0D.', 'Alexis', 'Roberts', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 72[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 72
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 72[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 72
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 72)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 72  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 72[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 72 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b025d320-40dd-0d78-4333-165dcb235503', 72, 'Scot Kling', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/24\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=24\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=24\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 137 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 24, 137, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 119[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/24\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=24\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=24\",\"action\":\"site:read\"},{\"resource\":\"device?institution=24\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=24\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=24\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=24\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=24\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=24\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=24\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 138 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 24, 138, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 120[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 72
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 72[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 72
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 72[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 502
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '24', 72, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '24', 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '24', 72, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '24', 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '24', 72, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '24', 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '24', 72, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '24', 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '24', 72, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 24, 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 24, 72, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 24, 72, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 24, 72, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 24, 72, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 24, 72, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 24, 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 24, 72, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 24, 72, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 72, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 24, 72, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 72  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 72
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 24 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 72 LIMIT 1[0m
  [1m[35m (8.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$y4YNgAKHmfVgZdj5k2UejON7tY1UeomGXCbVGnBtgDqV6OuJILuaK', 'Keshawn', 'Collier', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 73[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 73
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 73[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 73
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 73)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 73  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 73[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 73 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('534e51a0-2f93-7878-e32e-aab8c4b1f66b', 73, 'Demarcus Roberts V', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/25\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=25\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=25\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 139 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 25, 139, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 121[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/25\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=25\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=25\",\"action\":\"site:read\"},{\"resource\":\"device?institution=25\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=25\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=25\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=25\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=25\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=25\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=25\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 140 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 25, 140, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 122[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 73
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 73[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 73
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 73[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 523
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '25', 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '25', 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '25', 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '25', 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '25', 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '25', 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '25', 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '25', 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '25', 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 25, 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 25, 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 25, 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 25, 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 25, 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 25, 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 25, 73, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 25, 73, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 25, 73, 1)
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 73, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 25, 73, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 73  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 73
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 25 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 73 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$jgsX2H8/R7HuRVN4qBLeYO02nnFmw5tfT62sJhGs6k33v0w9IgWO6', 'Landen', 'Aufderhar', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 74[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 74
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 74[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 74
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 74)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 74  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 74[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 74 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('bcb8a3e7-59ca-a52e-27f4-dd4129e7619a', 74, 'Marge Simonis', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/26\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=26\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=26\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 141 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 26, 141, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 123[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/26\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=26\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=26\",\"action\":\"site:read\"},{\"resource\":\"device?institution=26\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=26\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=26\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=26\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=26\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=26\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=26\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 142 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 26, 142, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 124[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 74
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 74[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 74
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 74[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 544
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '26', 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '26', 74, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '26', 74, 1)[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '26', 74, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '26', 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '26', 74, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '26', 74, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '26', 74, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '26', 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 26, 74, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 26, 74, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 26, 74, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 26, 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 26, 74, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 26, 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 26, 74, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 26, 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 26, 74, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 74, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 26, 74, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 74  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 74
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 26 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 74 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$bactSFrin7bNuiJjHhxrY.8PQ9f4qi4cLjzT1bk4jAixEkSjvGqj2', 'Hillary', 'Greenfelder', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 75[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 75
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 75[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 75
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 75)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 75  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 75[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 75 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f450e9c4-131f-10bc-8641-3187aa51b5cf', 75, 'Irving Abernathy', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/27\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=27\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=27\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 143 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 27, 143, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 125[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/27\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=27\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=27\",\"action\":\"site:read\"},{\"resource\":\"device?institution=27\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=27\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=27\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=27\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=27\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=27\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=27\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 144 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 27, 144, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 126[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 75
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 75[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 75
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 75[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 565
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '27', 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '27', 75, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '27', 75, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '27', 75, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '27', 75, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '27', 75, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '27', 75, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '27', 75, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '27', 75, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 27, 75, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 27, 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 27, 75, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 27, 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 27, 75, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 27, 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 27, 75, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 27, 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 27, 75, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 75, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 27, 75, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 75  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 75
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 27 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 75 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$sz11LGlIXa0y408pYXP8Ou5GMTONwl3haWDkoFIqEolFCnvCcGiwK', 'Hipolito', 'Schmitt', '2016-08-29 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 76[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 76
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 76[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 76
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 76)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 76  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 76[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 76 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('45e155d3-b20b-a9cd-99dd-8e815b3de1b8', 76, 'Dr. Nestor Lynch', '2016-08-30 21:46:21', '2016-08-30 21:46:21')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/28\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=28\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=28\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 145 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 28, 145, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 127[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/28\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=28\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=28\",\"action\":\"site:read\"},{\"resource\":\"device?institution=28\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=28\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=28\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=28\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=28\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=28\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=28\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 146 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 28, 146, '2016-08-30 21:46:21', '2016-08-30 21:46:21')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 128[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 76
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 76[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 76
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 76[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 586
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '28', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '28', 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '28', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '28', 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '28', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '28', 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '28', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '28', 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '28', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 28, 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 28, 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 28, 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 28, 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 28, 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 28, 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 28, 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 28, 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 28, 76, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 76, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 28, 76, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 76  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 76
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 28 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 76 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$uCD40h2gcLAaebQwF4c6nO5AIYIUvxMcfl5ay57XWTHLxybGco.ce', 'Michale', 'Armstrong', '2016-08-29 21:47:33', '2016-08-30 21:47:33', '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 77[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 77
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 77[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 77
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 77)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 77  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 77[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 77 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a38c1e52-fb2c-a106-d57c-94eab9bd5b46', 77, 'Aric Smith', '2016-08-30 21:47:33', '2016-08-30 21:47:33')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/29\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=29\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=29\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 147 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 29, 147, '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 129[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/29\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=29\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=29\",\"action\":\"site:read\"},{\"resource\":\"device?institution=29\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=29\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=29\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=29\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=29\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=29\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=29\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 148 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 29, 148, '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 130[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 77
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 77[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 77
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 77[0m
  [1m[35mComputedPolicyException Load (0.3ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 607
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '29', 77, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '29', 77, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '29', 77, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '29', 77, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '29', 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '29', 77, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '29', 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '29', 77, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '29', 77, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 29, 77, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 29, 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 29, 77, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 29, 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 29, 77, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 29, 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 29, 77, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 29, 77, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 29, 77, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 77, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 29, 77, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 77  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 77
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 29 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 77 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$P6O3I7R94.55N0YUSrEVPOF6jPKPqgp8IOyBzPQmTSlB/zEq.r2Ai', 'Marco', 'Bogisich', '2016-08-29 21:47:33', '2016-08-30 21:47:33', '2016-08-30 21:47:33', '2016-08-30 21:47:33')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 78[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 78
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 78[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 78
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 78)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 78  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 78[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 78 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b0a8dd5f-c452-daa0-1827-7bf765e9b8ea', 78, 'Mrs. Terry Goyette', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/30\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=30\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=30\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 149 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 30, 149, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 131[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/30\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=30\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=30\",\"action\":\"site:read\"},{\"resource\":\"device?institution=30\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=30\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=30\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=30\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=30\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=30\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=30\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 150 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 30, 150, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 132[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 78
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 78[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 78
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 78[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 628
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '30', 78, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '30', 78, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '30', 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '30', 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '30', 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '30', 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '30', 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '30', 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '30', 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 30, 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 30, 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 30, 78, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 30, 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 30, 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 30, 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 30, 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 30, 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 30, 78, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 78, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 30, 78, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 78  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 78
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 30 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 78 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$JngAFpsg1jf/PQlKmTReOe4B1RicfHsJ3PJRlBmFXK2gAM8Rlq6vm', 'Rubye', 'Okuneva', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 79[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 79
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 79[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 79
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 79)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 79  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 79[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 79 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('411c2dcd-8878-477d-f014-aa3de6a8a8f3', 79, 'Mr. Alphonso Witting', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/31\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=31\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=31\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 151 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 31, 151, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 133[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/31\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=31\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=31\",\"action\":\"site:read\"},{\"resource\":\"device?institution=31\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=31\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=31\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=31\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=31\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=31\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=31\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 152 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 31, 152, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 134[0m
  [1m[35mPolicy Load (0.9ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 79
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 79[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 79
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 79[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 649
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '31', 79, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '31', 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '31', 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '31', 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '31', 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '31', 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '31', 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '31', 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '31', 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 31, 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 31, 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 31, 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 31, 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 31, 79, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 31, 79, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 31, 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 31, 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 31, 79, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 79, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 31, 79, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 79  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 79
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 31 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 79 LIMIT 1[0m
  [1m[35m (7.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$tWpJS3KILHmyp0nV.CkPr.RhSG3nTciuuBd23LP4X6/3.qBXEnhS.', 'Dagmar', 'Fay', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 80[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 80
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 80[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 80
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 80)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 80  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 80[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 80 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('501f092d-fb77-a7a0-5679-f33124c2170e', 80, 'Ross Senger', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/32\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=32\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=32\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 153 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 32, 153, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 135[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/32\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=32\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=32\",\"action\":\"site:read\"},{\"resource\":\"device?institution=32\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=32\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=32\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=32\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=32\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=32\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=32\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 154 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 32, 154, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 136[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 80
  [1m[36m (0.5ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 80[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 80
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 80[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 670
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '32', 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '32', 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '32', 80, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '32', 80, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '32', 80, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '32', 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '32', 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '32', 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '32', 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 32, 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 32, 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 32, 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 32, 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 32, 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 32, 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 32, 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 32, 80, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 32, 80, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 80, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 32, 80, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 80  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 80
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 32 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 80 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$O.wG5ZALYXX1CR9V7WGD6ewR5x/wEAkqwkH4np6AploPcYF3uGntq', 'Cassandre', 'Orn', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 81[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 81
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 81[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 81
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 81)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 81  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 81[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 81 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('107339ae-db74-c1c3-bc91-535e97139e12', 81, 'Greg McCullough IV', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/33\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=33\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=33\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 155 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 33, 155, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 137[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/33\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=33\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=33\",\"action\":\"site:read\"},{\"resource\":\"device?institution=33\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=33\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=33\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=33\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=33\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=33\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=33\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 156 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 33, 156, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 138[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 81
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 81[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 81
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 81[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 691
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '33', 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '33', 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '33', 81, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '33', 81, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '33', 81, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '33', 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '33', 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '33', 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '33', 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 33, 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 33, 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 33, 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 33, 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 33, 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 33, 81, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 33, 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 33, 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 33, 81, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 81, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 33, 81, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 81  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 81
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 33 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 81 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$yd2xi655pvgos9KsirVm9.8qJS8o/mpZ/VdI3DmOsAGBOgWJznEXe', 'Mireille', 'Kuphal', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 82[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 82
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 82[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 82
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 82)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 82  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 82[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 82 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('96c29a1f-a930-6b3d-9b37-72c940bed729', 82, 'Rod Skiles', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/34\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=34\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=34\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 157 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 34, 157, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 139[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/34\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=34\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=34\",\"action\":\"site:read\"},{\"resource\":\"device?institution=34\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=34\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=34\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=34\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=34\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=34\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=34\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 158 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 34, 158, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 140[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 82
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 82[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 82
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 82[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 712
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '34', 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '34', 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '34', 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '34', 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '34', 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '34', 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '34', 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '34', 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '34', 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 34, 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 34, 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 34, 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 34, 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 34, 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 34, 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 34, 82, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 34, 82, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 34, 82, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 82, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 34, 82, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 82  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 82
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 34 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 82 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$ZumiyjEm0vNCLpgJ8bkIqOiLP69wHmv4odcJ84F/oDUrFsRUkZpIK', 'Pearlie', 'Bergnaum', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 83[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 83
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 83[0m
  [1m[35mComputedPolicy Load (0.8ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 83
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 83)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 83  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 83[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 83 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('236d9f35-bd03-6023-01cd-37fdf4a095e5', 83, 'Dameon Swaniawski', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/35\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=35\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=35\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 159 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 35, 159, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 141[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/35\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=35\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=35\",\"action\":\"site:read\"},{\"resource\":\"device?institution=35\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=35\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=35\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=35\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=35\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=35\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=35\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 160 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 35, 160, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 142[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 83
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 83[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 83
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 83[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 733
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '35', 83, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '35', 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '35', 83, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '35', 83, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '35', 83, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '35', 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '35', 83, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '35', 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '35', 83, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 35, 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 35, 83, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 35, 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 35, 83, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 35, 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 35, 83, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 35, 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 35, 83, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 35, 83, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 83, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 35, 83, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 83  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 83
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 35 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 83 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$jlkqxu6ki5LQxQMbukC.M.Ae4OYZv8.8IX/KG/VltjbUh3s.VyDDa', 'Sarai', 'Walsh', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 84[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 84
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 84[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 84
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 84)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 84  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 84[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 84 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('e2a14289-3e88-1514-a0d2-241d03e76fbb', 84, 'Scot Kling', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/36\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=36\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=36\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 161 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 36, 161, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 143[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/36\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=36\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=36\",\"action\":\"site:read\"},{\"resource\":\"device?institution=36\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=36\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=36\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=36\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=36\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=36\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=36\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 162 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 36, 162, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 144[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 84
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 84[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 84
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 84[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 754
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '36', 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '36', 84, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '36', 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '36', 84, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '36', 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '36', 84, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '36', 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '36', 84, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '36', 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 36, 84, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 36, 84, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 36, 84, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 36, 84, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 36, 84, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 36, 84, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 36, 84, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 36, 84, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 36, 84, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 84, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 36, 84, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 84  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 84
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 36 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 84 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$6ExVFc/nMCRqY2kv25PTYuBjF.yHly9xvAuSJeH2ecXlXMNmEFBZ2', 'Kayleigh', 'Labadie', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 85[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 85
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 85[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 85
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 85)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 85  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 85[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 85 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('00f191b2-92c3-51bc-36c9-b688ff4dc29e', 85, 'Demarcus Roberts V', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/37\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=37\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=37\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 163 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 37, 163, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 145[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/37\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=37\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=37\",\"action\":\"site:read\"},{\"resource\":\"device?institution=37\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=37\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=37\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=37\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=37\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=37\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=37\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 164 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 37, 164, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 146[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 85
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 85[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 85
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 85[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 775
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '37', 85, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '37', 85, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '37', 85, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '37', 85, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '37', 85, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '37', 85, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '37', 85, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '37', 85, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '37', 85, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 37, 85, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 37, 85, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 37, 85, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 37, 85, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 37, 85, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 37, 85, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 37, 85, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 37, 85, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 37, 85, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 85, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 37, 85, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 85  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 85
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 37 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 85 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$9PHLs0gJF3Ejra6S2dOr1ehJu0sVsYvj0NYjAT6pyGDPpvhvvRosC', 'Noelia', 'Runte', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 86[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 86
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 86[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 86
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 86)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 86  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 86[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 86 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('76bd3e35-6e11-15dd-b8e9-b3c3c3bfd21c', 86, 'Marge Simonis', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/38\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=38\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=38\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 165 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 38, 165, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 147[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/38\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=38\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=38\",\"action\":\"site:read\"},{\"resource\":\"device?institution=38\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=38\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=38\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=38\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=38\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=38\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=38\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 166 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 38, 166, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (9.6ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 148[0m
  [1m[35mPolicy Load (9.8ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 86
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 86[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 86
  [1m[36mComputedPolicy Load (0.4ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 86[0m
  [1m[35mComputedPolicyException Load (0.3ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 796
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '38', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '38', 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '38', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '38', 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '38', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '38', 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '38', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '38', 86, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '38', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 38, 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 38, 86, 1)[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 38, 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 38, 86, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 38, 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 38, 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 38, 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 38, 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 38, 86, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 86, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 38, 86, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 86  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 86
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 38 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 86 LIMIT 1[0m
  [1m[35m (8.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$znEoe0rnObo.KXCOsuWuEeePt6AJadlb8mIJJE/ulJgFOp8LG.rbK', 'Era', 'Bergstrom', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 87[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 87
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 87[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 87
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 87)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 87  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 87[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 87 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7dabc782-ffcb-cf40-b78e-23d241524cc5', 87, 'Irving Abernathy', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/39\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=39\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=39\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 167 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 39, 167, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 149[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/39\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=39\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=39\",\"action\":\"site:read\"},{\"resource\":\"device?institution=39\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=39\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=39\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=39\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=39\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=39\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=39\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 168 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 39, 168, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 150[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 87
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 87[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 87
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 87[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 817
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '39', 87, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '39', 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '39', 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '39', 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '39', 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '39', 87, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '39', 87, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '39', 87, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '39', 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 39, 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 39, 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 39, 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 39, 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 39, 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 39, 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 39, 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 39, 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 39, 87, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 87, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 39, 87, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 87  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 87
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 39 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 87 LIMIT 1[0m
  [1m[35m (8.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$8ox9aIUfDYFbwID/Na8WiuOEiZVp890c0ZjJLsZmtUpdusHPa2eiW', 'Tommie', 'Frami', '2016-08-29 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 88[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 88
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 88[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 88
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`) VALUES ('institution:create', 'institution', 88)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 88  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 88[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 88 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('975f4adc-8241-00a6-b4af-5b84eb206c57', 88, 'Dr. Nestor Lynch', '2016-08-30 21:47:34', '2016-08-30 21:47:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/40\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=40\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=40\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 169 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 40, 169, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 151[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/40\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=40\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=40\",\"action\":\"site:read\"},{\"resource\":\"device?institution=40\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=40\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=40\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=40\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=40\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=40\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=40\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 170 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 40, 170, '2016-08-30 21:47:34', '2016-08-30 21:47:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 152[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 88
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 88[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 88
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 88[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 838
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '40', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '40', 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '40', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '40', 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '40', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '40', 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '40', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '40', 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '40', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 40, 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 40, 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 40, 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 40, 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 40, 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 40, 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 40, 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 40, 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 40, 88, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 88, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 40, 88, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 88  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 88
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 40 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 88 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$Lnx2RFasjLZXg92W.Nep4OPeUnwAN5svyUuy/8.upM3ROyPSD.ILO', 'Manuela', 'Denesik', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 89[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 89
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 89[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 89
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 89 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('008b4e54-d047-7bb5-a80a-5cb3fa25f5ef', 89, 'Aric Smith', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/41\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=41\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=41\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 171 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 41, 171, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 153
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/41\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=41\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=41\",\"action\":\"site:read\"},{\"resource\":\"device?institution=41\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=41\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=41\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=41\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=41\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=41\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=41\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 172 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 41, 172, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 154
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 89[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 89
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 89[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 89
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '41', 89, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '41', 89, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '41', 89, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '41', 89, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '41', 89, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '41', 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '41', 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '41', 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '41', 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 41, 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 41, 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 41, 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 41, 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 41, 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 41, 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 41, 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 41, 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 41, 89, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 89, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 41, 89, 1)
  [1m[36mSubscriber Load (0.5ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 89  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 89
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 41 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 89 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$GUKisbnI8SCwhnbAwnDml.Jp9N647lBHIh.PDDSnpu5T5UlxFY3pa', 'August', 'O\'Reilly', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 90[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 90
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 90[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 90
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 90 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('8a005bd7-3830-2b67-e077-7bda608ec4e9', 90, 'Mrs. Terry Goyette', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/42\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=42\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=42\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 173 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 42, 173, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 155
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/42\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=42\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=42\",\"action\":\"site:read\"},{\"resource\":\"device?institution=42\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=42\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=42\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=42\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=42\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=42\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=42\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 174 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 42, 174, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 156
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 90[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 90
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 90[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 90
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '42', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '42', 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '42', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '42', 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '42', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '42', 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '42', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '42', 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '42', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 42, 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 42, 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 42, 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 42, 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 42, 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 42, 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 42, 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 42, 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 42, 90, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 90, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 42, 90, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 90  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 90
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.8ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 42 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 90 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$.lxltBbFA/psYr8bXu9goeKvAL3cDb8meViRevO/M0vkRut4fYf.u', 'Effie', 'Hartmann', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 91[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 91
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 91[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 91
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 91 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('18c05b37-20c3-9f29-2f9d-93321a1bfda9', 91, 'Mr. Alphonso Witting', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/43\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=43\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=43\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 175 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 43, 175, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 157
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/43\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=43\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=43\",\"action\":\"site:read\"},{\"resource\":\"device?institution=43\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=43\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=43\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=43\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=43\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=43\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=43\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 176 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 43, 176, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 158
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 91[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 91
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 91[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 91
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '43', 91, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '43', 91, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '43', 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '43', 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '43', 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '43', 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '43', 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '43', 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '43', 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 43, 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 43, 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 43, 91, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 43, 91, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 43, 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 43, 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 43, 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 43, 91, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 43, 91, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 91, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 43, 91, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 91  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 91
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 43 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 91 LIMIT 1[0m
  [1m[35m (7.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$OpKlumWan//TnFwrNEMzvOXr/wo4jOzLRwGtlW6nXckA9I6EmIxMG', 'Etha', 'Gerlach', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 92[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 92
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 92[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 92
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 92 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('28dae910-08c2-9859-366a-203ba806abd8', 92, 'Ross Senger', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/44\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=44\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=44\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 177 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 44, 177, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 159
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/44\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=44\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=44\",\"action\":\"site:read\"},{\"resource\":\"device?institution=44\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=44\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=44\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=44\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=44\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=44\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=44\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 178 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 44, 178, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 160
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 92[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 92
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 92[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 92
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '44', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '44', 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '44', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '44', 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '44', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '44', 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '44', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '44', 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '44', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 44, 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 44, 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 44, 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 44, 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 44, 92, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 44, 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 44, 92, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 44, 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 44, 92, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 92, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 44, 92, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 92  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.6ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 92
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 44 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 92 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$c/EYy20GVGiZAWY2IrFksePcYn31QCn6dTWmn9ruDE0bcdGpM9RB6', 'Thaddeus', 'Lockman', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 93[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 93
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 93[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 93
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 93 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('34bbf01e-11d0-ba5d-5d24-203708c76a61', 93, 'Greg McCullough IV', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/45\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=45\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=45\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 179 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 45, 179, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 161
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/45\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=45\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=45\",\"action\":\"site:read\"},{\"resource\":\"device?institution=45\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=45\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=45\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=45\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=45\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=45\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=45\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 180 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 45, 180, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 162
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 93[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 93
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 93[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 93
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '45', 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '45', 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '45', 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '45', 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '45', 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '45', 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '45', 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '45', 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '45', 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 45, 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 45, 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 45, 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 45, 93, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 45, 93, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 45, 93, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 45, 93, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 45, 93, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 45, 93, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 93, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 45, 93, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 93  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 93
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 45 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 93 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$xlo/1IbZ8DvZqhl3UxymnuDPIObBpbT3zriTdaEHEAai88yo2vfj2', 'Maye', 'Kulas', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 94[0m
  [1m[35m (0.4ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 94
  [1m[36mRole Load (0.8ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 94[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 94
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 94 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('3394b0e6-4179-b066-e2d1-5a8a2da84a40', 94, 'Rod Skiles', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/46\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=46\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=46\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 181 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 46, 181, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 163
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/46\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=46\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=46\",\"action\":\"site:read\"},{\"resource\":\"device?institution=46\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=46\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=46\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=46\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=46\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=46\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=46\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 182 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 46, 182, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 164
  [1m[36mPolicy Load (0.5ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 94[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 94
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 94[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 94
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '46', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '46', 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '46', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '46', 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '46', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '46', 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '46', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '46', 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '46', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 46, 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 46, 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 46, 94, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 46, 94, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 46, 94, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 46, 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 46, 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 46, 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 46, 94, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 94, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 46, 94, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 94  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 94
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 46 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 94 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$43mPv/D0tgKKD5eH/HO8/uhywdaivmnXvPRY.rf./wo9GnUNhVJ0.', 'Anastacio', 'Koss', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 95[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 95
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 95[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 95
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 95 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b0a0e5d2-c763-a560-a571-0f091b220a79', 95, 'Dameon Swaniawski', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/47\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=47\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=47\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 183 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 47, 183, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 165
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/47\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=47\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=47\",\"action\":\"site:read\"},{\"resource\":\"device?institution=47\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=47\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=47\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=47\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=47\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=47\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=47\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 184 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 47, 184, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 166
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 95[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 95
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 95[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 95
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '47', 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '47', 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '47', 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '47', 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '47', 95, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '47', 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '47', 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '47', 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '47', 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 47, 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 47, 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 47, 95, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 47, 95, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 47, 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 47, 95, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 47, 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 47, 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 47, 95, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 95, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 47, 95, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 95  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 95
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 47 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 95 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$oOh8fHntd5ir3De1kxTY9uSRPyPgKNs8CYRN0lGuFsfhHlb2gwP82', 'Bridgette', 'Leuschke', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 96[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 96
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 96[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 96
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 96 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('8fe45fd3-8a49-ba0c-3192-4af0cd474c6c', 96, 'Scot Kling', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/48\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=48\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=48\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 185 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 48, 185, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 167
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/48\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=48\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=48\",\"action\":\"site:read\"},{\"resource\":\"device?institution=48\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=48\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=48\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=48\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=48\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=48\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=48\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 186 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 48, 186, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 168
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 96[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 96
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 96[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 96
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '48', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '48', 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '48', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '48', 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '48', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '48', 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '48', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '48', 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '48', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 48, 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 48, 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 48, 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 48, 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 48, 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 48, 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 48, 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 48, 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 48, 96, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 96, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 48, 96, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 96  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 96
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 48 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 96 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$p1G1xbrfqhGYMbsbXQ5rE.TPtBf5Isr0OP.p6037ui6qr1EdWmu8q', 'Alexis', 'Blick', '2016-08-29 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 97[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 97
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 97[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 97
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 97 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('8d8c1c0f-f82d-8a9d-5db1-5f3b6ec44e79', 97, 'Demarcus Roberts V', '2016-08-30 21:53:09', '2016-08-30 21:53:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/49\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=49\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=49\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 187 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 49, 187, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 169
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/49\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=49\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=49\",\"action\":\"site:read\"},{\"resource\":\"device?institution=49\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=49\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=49\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=49\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=49\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=49\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=49\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 188 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 49, 188, '2016-08-30 21:53:09', '2016-08-30 21:53:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 170
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 97[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 97
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 97[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 97
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '49', 97, 1)[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '49', 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '49', 97, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '49', 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '49', 97, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '49', 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '49', 97, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '49', 97, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '49', 97, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 49, 97, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 49, 97, 1)[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 49, 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 49, 97, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 49, 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 49, 97, 1)[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 49, 97, 1)
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 49, 97, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 49, 97, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 97, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 49, 97, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 97  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 97
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 49 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 97 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$YAK7/.MbnWhFT0TJ6jjSg.zLqrALV997uiThGEgAszaRq8dgACPlm', 'Carlie', 'Witting', '2016-08-29 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 98[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 98
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 98[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 98
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 98 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('cb22bbbf-5616-7a68-2323-07a0360ac1b2', 98, 'Marge Simonis', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/50\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=50\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=50\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 189 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 50, 189, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 171
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/50\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=50\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=50\",\"action\":\"site:read\"},{\"resource\":\"device?institution=50\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=50\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=50\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=50\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=50\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=50\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=50\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 190 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 50, 190, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 172
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 98[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 98
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 98[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 98
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '50', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '50', 98, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '50', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '50', 98, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '50', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '50', 98, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '50', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '50', 98, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '50', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 50, 98, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 50, 98, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 50, 98, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 50, 98, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 50, 98, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 50, 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 50, 98, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 50, 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 50, 98, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 98, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 50, 98, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 98  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 98
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 50 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 98 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$IBtCqoNsnwYL4ETvrVMZYulU6.fJC9RxYLeEK44HMXoAPowTlj/iG', 'Oswaldo', 'Feest', '2016-08-29 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 99[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 99
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 99[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 99
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 99 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a86c8d1d-5f00-ac70-5c78-edd7df95d5c7', 99, 'Irving Abernathy', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/51\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=51\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=51\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 191 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 51, 191, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 173
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/51\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=51\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=51\",\"action\":\"site:read\"},{\"resource\":\"device?institution=51\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=51\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=51\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=51\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=51\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=51\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=51\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 192 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 51, 192, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 174
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 99[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 99
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 99[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 99
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '51', 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '51', 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '51', 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '51', 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '51', 99, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '51', 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '51', 99, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '51', 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '51', 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 51, 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 51, 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 51, 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 51, 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 51, 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 51, 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 51, 99, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 51, 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 51, 99, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 99, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 51, 99, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 99  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.4ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 99
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 51 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 99 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$Px/KEyW778P3j6NPJh6njur67awMgH3SivVJpx2AlARZ6jdqlRDxO', 'Jamar', 'Grimes', '2016-08-29 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 100[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 100
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 100[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 100
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 100 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('08b1c275-18fd-e62e-e7bf-957b068c225a', 100, 'Dr. Nestor Lynch', '2016-08-30 21:53:10', '2016-08-30 21:53:10')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/52\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=52\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=52\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 193 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 52, 193, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 175
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/52\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=52\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=52\",\"action\":\"site:read\"},{\"resource\":\"device?institution=52\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=52\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=52\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=52\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=52\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=52\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=52\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 194 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 52, 194, '2016-08-30 21:53:10', '2016-08-30 21:53:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 176
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 100[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 100
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 100[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 100
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '52', 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '52', 100, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '52', 100, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '52', 100, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '52', 100, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '52', 100, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '52', 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '52', 100, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '52', 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 52, 100, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 52, 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 52, 100, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 52, 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 52, 100, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 52, 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 52, 100, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 52, 100, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 52, 100, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 100, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 52, 100, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 100  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 100
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 52 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 100 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$owKRBtWcUXs7T372UdGVbOnKUw.wSyilvJ.luhvsAD3UwH8Bbq0IO', 'Jamil', 'Abernathy', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 101[0m
  [1m[35m (0.7ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 101
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 101[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 101
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 101 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('51194a07-21b5-c395-276d-b8accc87bc2c', 101, 'Aric Smith', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/53\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=53\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=53\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 195 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 53, 195, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 177
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/53\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=53\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=53\",\"action\":\"site:read\"},{\"resource\":\"device?institution=53\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=53\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=53\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=53\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=53\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=53\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=53\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 196 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 53, 196, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 178
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 101[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 101
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 101[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 101
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '53', 101, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '53', 101, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '53', 101, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '53', 101, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '53', 101, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '53', 101, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '53', 101, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '53', 101, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '53', 101, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 53, 101, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 53, 101, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 53, 101, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 53, 101, 1)[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 53, 101, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 53, 101, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 53, 101, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 53, 101, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 53, 101, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 101, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 53, 101, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 101  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 101
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.5ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 53 LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 101 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$3P/pjUmt3BenMfUiDxMXi.9IdjBRkBQgoe9lRJA.xUID7nVFAKUX6', 'Estelle', 'Langworth', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 102[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 102
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 102[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 102
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 102 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('ca6c08b1-e714-7bfa-be20-9ac44d9c8ba9', 102, 'Mrs. Terry Goyette', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/54\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=54\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=54\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 197 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 54, 197, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 179
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/54\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=54\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=54\",\"action\":\"site:read\"},{\"resource\":\"device?institution=54\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=54\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=54\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=54\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=54\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=54\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=54\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 198 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 54, 198, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 180
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 102[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 102
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 102[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 102
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '54', 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '54', 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '54', 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '54', 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '54', 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '54', 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '54', 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '54', 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '54', 102, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 54, 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 54, 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 54, 102, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 54, 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 54, 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 54, 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 54, 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 54, 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 54, 102, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 102, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 54, 102, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 102  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 102
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 54 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 102 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$5YgCuwqG5HJUABvJxjnajOs8SGIBhil4z7V4V3othZpF98Vj/Vvg.', 'Donato', 'Rau', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 103[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 103
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 103[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 103
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 103 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('1fead2d4-a76e-6418-961f-7c1122cecb4a', 103, 'Mr. Alphonso Witting', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/55\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=55\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=55\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 199 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 55, 199, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 181
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/55\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=55\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=55\",\"action\":\"site:read\"},{\"resource\":\"device?institution=55\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=55\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=55\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=55\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=55\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=55\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=55\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 200 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 55, 200, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 182
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 103[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 103
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 103[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 103
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '55', 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '55', 103, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '55', 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '55', 103, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '55', 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '55', 103, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '55', 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '55', 103, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '55', 103, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 55, 103, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 55, 103, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 55, 103, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 55, 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 55, 103, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 55, 103, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 55, 103, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 55, 103, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 55, 103, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 103, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 55, 103, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 103  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 103
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 55 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 103 LIMIT 1[0m
  [1m[35m (8.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$DLt8GbwiLTlX7IrXG9BbVOxV6hferhedg/R3h0aOD6iVJ6ceguO0C', 'Zella', 'Mosciski', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 104[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 104
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 104[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 104
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 104 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('97dba34c-e375-e38d-3c96-626ab2b607e0', 104, 'Ross Senger', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/56\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=56\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=56\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 201 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 56, 201, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 183
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/56\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=56\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=56\",\"action\":\"site:read\"},{\"resource\":\"device?institution=56\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=56\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=56\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=56\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=56\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=56\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=56\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 202 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 56, 202, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 184
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 104[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 104
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 104[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 104
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '56', 104, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '56', 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '56', 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '56', 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '56', 104, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '56', 104, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '56', 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '56', 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '56', 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 56, 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 56, 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 56, 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 56, 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 56, 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 56, 104, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 56, 104, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 56, 104, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 56, 104, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 104, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 56, 104, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 104  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 104
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 56 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 104 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$I6gD9FRn4AMvBxQz5hsBn.yFAsLwaW.aNM4ostrQvMzRaDFWoDxle', 'Roxanne', 'Skiles', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 105[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 105
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 105[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 105
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 105 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('02292257-6387-4900-f3c5-081a6fbc9d98', 105, 'Greg McCullough IV', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/57\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=57\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=57\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 203 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 57, 203, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 185
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/57\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=57\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=57\",\"action\":\"site:read\"},{\"resource\":\"device?institution=57\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=57\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=57\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=57\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=57\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=57\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=57\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 204 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 57, 204, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 186
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 105[0m
  [1m[35m (0.7ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 105
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 105[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 105
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '57', 105, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '57', 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '57', 105, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '57', 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '57', 105, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '57', 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '57', 105, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '57', 105, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '57', 105, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 57, 105, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 57, 105, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 57, 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 57, 105, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 57, 105, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 57, 105, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 57, 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 57, 105, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 57, 105, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 105, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 57, 105, 1)
  [1m[36mSubscriber Load (0.5ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 105  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 105
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 57 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 105 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$WkMj3DSodTLfLcAkqYi4Du2CuSVMdZQY2pQtfrg2IjQ93HtnfZhSe', 'Mitchel', 'Abshire', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 106[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 106
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 106[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 106
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 106 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('dc10135a-cae2-072a-f2c4-7b8b720dfac6', 106, 'Rod Skiles', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/58\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=58\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=58\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 205 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 58, 205, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 187
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/58\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=58\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=58\",\"action\":\"site:read\"},{\"resource\":\"device?institution=58\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=58\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=58\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=58\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=58\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=58\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=58\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 206 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 58, 206, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 188
  [1m[36mPolicy Load (1.1ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 106[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 106
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 106[0m
  [1m[35mComputedPolicy Load (0.4ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 106
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '58', 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '58', 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '58', 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '58', 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '58', 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '58', 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '58', 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '58', 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '58', 106, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 58, 106, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 58, 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 58, 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 58, 106, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 58, 106, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 58, 106, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 58, 106, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 58, 106, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 58, 106, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 106, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 58, 106, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 106  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 106
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 58 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 106 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$vUX7mi66a5/TmuTKAIhP5.4X6EkIluXmb3Cc.CkF0qmT50GPkg/gK', 'Jaunita', 'Fritsch', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 107[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 107
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 107[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 107
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 107 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f1ad21cf-1269-eb30-ca0c-a0edafba9bd5', 107, 'Dameon Swaniawski', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/59\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=59\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=59\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 207 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 59, 207, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 189
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/59\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=59\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=59\",\"action\":\"site:read\"},{\"resource\":\"device?institution=59\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=59\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=59\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=59\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=59\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=59\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=59\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 208 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 59, 208, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 190
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 107[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 107
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 107[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 107
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '59', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '59', 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '59', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '59', 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '59', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '59', 107, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '59', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '59', 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '59', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 59, 107, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 59, 107, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 59, 107, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 59, 107, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 59, 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 59, 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 59, 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 59, 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 59, 107, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 107, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 59, 107, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 107  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 107
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 59 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 107 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$3rmSixP8.gI7RHPt6RTBSOPUokK/NLPEzcGGuGBVYFB1g4QR9g84m', 'Marcos', 'Sipes', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 108[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 108
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 108[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 108
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 108 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('16549120-bd71-1cbf-3459-d10264ed8462', 108, 'Scot Kling', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/60\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=60\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=60\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 209 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 60, 209, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 191
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/60\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=60\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=60\",\"action\":\"site:read\"},{\"resource\":\"device?institution=60\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=60\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=60\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=60\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=60\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=60\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=60\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 210 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 60, 210, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 192
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 108[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 108
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 108[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 108
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '60', 108, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '60', 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '60', 108, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '60', 108, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '60', 108, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '60', 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '60', 108, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '60', 108, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '60', 108, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 60, 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 60, 108, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 60, 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 60, 108, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 60, 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 60, 108, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 60, 108, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 60, 108, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 60, 108, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 108, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 60, 108, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 108  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 108
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 60 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 108 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$fliMNZJo.GMeVMhIPePmn.VVv1a7r87vcP5wRPDiMggoSPBdS25n.', 'Mackenzie', 'Haag', '2016-08-29 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 109[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 109
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 109[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 109
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 109 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('e3920932-b01f-9610-c2c9-3a8ff06801ac', 109, 'Demarcus Roberts V', '2016-08-30 21:53:18', '2016-08-30 21:53:18')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/61\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=61\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=61\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 211 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 61, 211, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 193
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/61\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=61\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=61\",\"action\":\"site:read\"},{\"resource\":\"device?institution=61\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=61\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=61\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=61\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=61\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=61\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=61\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 212 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 61, 212, '2016-08-30 21:53:18', '2016-08-30 21:53:18')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 194
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 109[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 109
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 109[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 109
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '61', 109, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '61', 109, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '61', 109, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '61', 109, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '61', 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '61', 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '61', 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '61', 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '61', 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 61, 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 61, 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 61, 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 61, 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 61, 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 61, 109, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 61, 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 61, 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 61, 109, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 109, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 61, 109, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 109  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 109
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 61 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 109 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$mOuC8ZhLfo1U2uDanB41o./5.dZV2WXrUYQvSpV7mbXfmBjj7wlCW', 'Julius', 'Raynor', '2016-08-29 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 110[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 110
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 110[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 110
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 110 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f16fe173-9871-52c1-edcc-5dbccd149b90', 110, 'Marge Simonis', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/62\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=62\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=62\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 213 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 62, 213, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 195
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/62\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=62\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=62\",\"action\":\"site:read\"},{\"resource\":\"device?institution=62\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=62\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=62\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=62\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=62\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=62\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=62\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (1.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 214 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 62, 214, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 196
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 110[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 110
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 110[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 110
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '62', 110, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '62', 110, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '62', 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '62', 110, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '62', 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '62', 110, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '62', 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '62', 110, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '62', 110, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 62, 110, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 62, 110, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 62, 110, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 62, 110, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 62, 110, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 62, 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 62, 110, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 62, 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 62, 110, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 110, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 62, 110, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 110  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 110
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 62 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 110 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$Wpkm.Of4Xg7Fx25tR0EHNuHt5z2CTQb48XkSZnKnRWlGM2C.uTnui', 'Clarissa', 'Smitham', '2016-08-29 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 111[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 111
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 111[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 111
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 111 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('bda7fc6f-f14d-eda7-f4e3-e4afd4f6fed1', 111, 'Irving Abernathy', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/63\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=63\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=63\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 215 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 63, 215, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 197
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/63\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=63\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=63\",\"action\":\"site:read\"},{\"resource\":\"device?institution=63\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=63\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=63\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=63\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=63\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=63\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=63\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 216 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 63, 216, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 198
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 111[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 111
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 111[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 111
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '63', 111, 1)[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '63', 111, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '63', 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '63', 111, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '63', 111, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '63', 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '63', 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '63', 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '63', 111, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 63, 111, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 63, 111, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 63, 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 63, 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 63, 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 63, 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 63, 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 63, 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 63, 111, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 111, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 63, 111, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 111  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 111
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 63 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 111 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$9PVu6eSrE9spmWdrA3c80./.EDdQ9Rdt8JzsNHbYZl3i4ox.CuN4m', 'Mathew', 'Schmitt', '2016-08-29 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 112[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 112
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 112[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 112
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 112 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('087acd7a-fa54-92bb-a785-1ad40d64da35', 112, 'Dr. Nestor Lynch', '2016-08-30 21:53:19', '2016-08-30 21:53:19')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/64\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=64\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=64\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 217 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 64, 217, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 199
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/64\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=64\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=64\",\"action\":\"site:read\"},{\"resource\":\"device?institution=64\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=64\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=64\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=64\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=64\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=64\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=64\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 218 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 64, 218, '2016-08-30 21:53:19', '2016-08-30 21:53:19')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 200
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 112[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 112
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 112[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 112
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '64', 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '64', 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '64', 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '64', 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '64', 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '64', 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '64', 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '64', 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '64', 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 64, 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 64, 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 64, 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 64, 112, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 64, 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 64, 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 64, 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 64, 112, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 64, 112, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 112, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 64, 112, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 112  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 112
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 64 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 112 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (7.3ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (7017.0ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (5.7ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (6.3ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (9.1ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (9.0ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (7.4ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.4ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (13.3ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (10.6ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (7.3ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (5.4ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.3ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (6.1ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (6.3ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (5.5ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$tx18WRKCW.NorL8LGKKnqu5I9XGY2d3XMc5ZkLVlgRqSyjFvJS0Oy', 'Jamir', 'Hills', '2016-08-29 22:11:12', '2016-08-30 22:11:12', '2016-08-30 22:11:12', '2016-08-30 22:11:12')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('6a877ef8-b8dd-4c7d-c426-2d173f91a03a', 1, 'Aric Smith', '2016-08-30 22:11:12', '2016-08-30 22:11:12')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$uacGnrQYFX6SVQTaHtP.WuMlzyuTbYiSy4jdwsn4rUcLpxqnK6wi6', 'April', 'Rohan', '2016-08-29 22:11:12', '2016-08-30 22:11:12', '2016-08-30 22:11:12', '2016-08-30 22:11:12')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('22fdc437-e8a3-bfec-bc2f-9bfb831d9b97', 2, 'Mrs. Terry Goyette', '2016-08-30 22:11:12', '2016-08-30 22:11:12')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 2, 3, '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 2, 4, '2016-08-30 22:11:12', '2016-08-30 22:11:12')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$fLJF7X0.PS0tleTsEjgl0eMKfUC.XmxEOrGWNG2czuLtNFYFOfASi', 'Deron', 'Collins', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('6aeb450d-2b4b-a3e1-3f45-16a64192b8cd', 3, 'Mr. Alphonso Witting', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 3, 5, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 3, 6, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$EageWCxFHBoH.C5nQEs5reNkwQzqTtp/NIp0ymUdJrc1.ASG84jTq', 'Trey', 'Adams', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('baea0be7-fc3b-0841-6833-0d895d5a359e', 4, 'Ross Senger', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 4, 7, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 4, 8, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$rYSfCNp48ZTBlzWDSn4vieNykipmbxBrx8OSBLrMlr9jHTwpPJ0fm', 'Landen', 'Simonis', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c52a4183-7702-27ea-6e6f-d06a5c458e96', 5, 'Greg McCullough IV', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 5, 9, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 5, 10, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (1.1ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.4ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$o1KvmR4A7zn6YWkQrn.YT.sPC1G7Ccw2xINDiR5nHojVBMIekzsf6', 'Clinton', 'Waters', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('ebc0f9a4-dfca-d195-b0ac-f5dc2b2506d2', 6, 'Rod Skiles', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 6, 11, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 6, 12, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.6ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$NzAoRlWnGKS37hBOuyuiyurOopJNR3e/CNwhzQU3RWwsKuviIBEsi', 'Deonte', 'Rempel', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('31129379-b9d3-e7fc-c038-3d2307fbc423', 7, 'Dameon Swaniawski', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 7, 13, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 7, 14, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.4ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$3YEFk3dnWAPUrwkNNw/qpOxTcsI/AVxeQ2mRZaDhtKPvbUc1gVOXW', 'Garry', 'Kertzmann', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b1ae6ae6-083c-a9e4-59cf-651e836785b9', 8, 'Scot Kling', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 8, 15, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 8, 16, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$dgxCaVOrQxyRau5it9XGruZUDgCPgvH2opc.tXgkEPAOKD/PBBpSS', 'Alexandrea', 'Batz', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.7ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('5b9aa51f-587a-99f5-ad90-4e9727db4b48', 9, 'Demarcus Roberts V', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 9, 17, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 9, 18, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.4ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.4ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (1.1ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1
  [1m[36m (8.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$q8VkAax9E6tZtyj2wAJHdODx7FheM6PpA1YK2CqzZQhFPsB/YaiWu', 'Suzanne', 'Altenwerth', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.4ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('572365a6-ea04-6701-f1a5-0e5e585d8638', 10, 'Marge Simonis', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 10, 19, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 10, 20, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$GkBWsuTPNJzjrnutZTEfv.WzhxBST.8b2G9u0OEMjnxtGEVKbmt2W', 'Julius', 'Lakin', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('d99d4f21-a0e9-3f37-9664-50400f52f262', 11, 'Irving Abernathy', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 11, 21, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 11, 22, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$XvcwwmqfgdX0oMlgTiYaruimxORDFa95qAGgnh5vV1JC3MUjcpOSu', 'Mattie', 'Howe', '2016-08-29 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f67660a1-9aec-f4df-1ae8-75347d6de915', 12, 'Dr. Nestor Lynch', '2016-08-30 22:11:13', '2016-08-30 22:11:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 12, 23, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 12, 24, '2016-08-30 22:11:13', '2016-08-30 22:11:13')
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.2ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (7.1ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (12.6ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (6.3ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (8.1ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (8.1ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (6.2ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (9.9ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (9.5ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (12.4ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (12.0ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (6.8ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (7.3ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (6.6ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (7.7ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (5.6ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (6.0ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (8.1ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (8.3ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.6ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$0bbJX22mf5nfdSP4YUy8wuasF85uEfModpI41ON1lPWF4G4N2gvJq', 'Friedrich', 'Kuhn', '2016-08-29 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('4b6d2020-cc48-4b99-5bde-b9a7a0cb0982', 1, 'Aric Smith', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.8ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$qXWXu9wjwNLBt7UnS7PtkeJ.FzbZ0hFGAVCp9Mf2gR9oS1JD.UJHm', 'Fletcher', 'Langosh', '2016-08-29 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('edf3529b-01bd-d76c-5376-73140fad1fd4', 2, 'Mrs. Terry Goyette', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 2, 3, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 2, 4, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (1.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$Q5ZKbVe5CjaibD9EJ5GxU.K0RnFmB3jy5Mrk/7oWgnuDspCWdgyZC', 'Kian', 'Lang', '2016-08-29 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('edf0baec-a562-66d8-4fc4-99ab1339c9ae', 3, 'Mr. Alphonso Witting', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.6ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 3, 5, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 3, 6, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.6ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.6ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.5ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  [1m[36m (8.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$Dne45/VxX0GYMnsUQv0GSu5WGQ5q.LwH7HNDCktbaoYYr.12x7oWK', 'Shawn', 'Rice', '2016-08-29 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.8ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7f8c254f-a145-81fd-ab19-29a26d4087e4', 4, 'Ross Senger', '2016-08-30 22:11:39', '2016-08-30 22:11:39')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 4, 7, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mPolicy Load (0.7ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 4, 8, '2016-08-30 22:11:39', '2016-08-30 22:11:39')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.6ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.7ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.9ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)[0m
  [1m[35mSubscriber Load (0.5ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.7ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.6ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (9.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$NYBGzxxkZQBxlRUhAH4Dd.s8zMZLRds2OW3odqYFKgAzE7kqBfNSO', 'Clementine', 'Ruecker', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.6ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.6ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7b42fcbf-a6fe-8144-220c-cb0fe00ce771', 5, 'Greg McCullough IV', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 5, 9, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 5, 10, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$PGLVuMX3IS88J5L4vX9ni.nlk36nf9ZFFlExuFJrv65XFBrFHdFje', 'Jaren', 'Blick', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('107d8239-3c8c-3152-1afd-d8f2522bbaa5', 6, 'Rod Skiles', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 6, 11, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 6, 12, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$wXOMkTOxOID1Tx4faFastOVtslFs60CtGscwQr9Tp0Q0rAxN06mmq', 'Desmond', 'Cummerata', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.1ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('285a2371-3d47-839b-81a0-cd11a36f29c8', 7, 'Dameon Swaniawski', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 7, 13, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 7, 14, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$kLGoKonIYxdD4lGejKKjqOPZjE4pvl/hXcgkEX22B9aYJlPu8I0ru', 'Caleigh', 'Morissette', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b562efca-a3b6-9383-ab48-00162be5e011', 8, 'Scot Kling', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 8, 15, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 8, 16, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$rApCoAfWy3CU1LJ8mzgSOefhVJuwaQYXWBH16oeJHj17ItnNyYd6e', 'Loyal', 'Herman', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.1ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b3e99444-4526-fc3e-37cf-f6bbd1eb0c74', 9, 'Demarcus Roberts V', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 9, 17, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 9, 18, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$mwSoFuOmVZIR2ooQNmJwfOJIWvfIgOMl0x/r/TYd9Azt0GOu12FUa', 'Cale', 'Fadel', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.6ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('bf69b817-8366-f225-dbfc-2e518a5f961f', 10, 'Marge Simonis', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 10, 19, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 10, 20, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$U7L/hLyA/5FiDdPCGVNRBOzIhsRSEgmCgzByOGxHjcJdmm6LXXjEu', 'Broderick', 'Stoltenberg', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.1ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('9d542ca2-07bd-f8df-6fc2-e69d238465e1', 11, 'Irving Abernathy', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 11, 21, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 11, 22, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$D4oEdl76RY2CVdn.HhbsmudfkdLaSL1HaIcUOqjtPX3r91.UYgCmi', 'Eleanora', 'Jacobson', '2016-08-29 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a6fbfa0b-befe-ec10-3635-d06856a1ff72', 12, 'Dr. Nestor Lynch', '2016-08-30 22:11:40', '2016-08-30 22:11:40')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 12, 23, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 12, 24, '2016-08-30 22:11:40', '2016-08-30 22:11:40')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'addresses'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alert_condition_results'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alert_condition_results`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alert_histories'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alert_histories`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alert_recipients'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `alert_recipients`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alerts'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alerts`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alerts_conditions'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alerts_conditions`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alerts_devices'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alerts_devices`[0m
  [1m[35m (0.1ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'alerts_sites'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `alerts_sites`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'audit_logs'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `audit_logs`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'audit_updates'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `audit_updates`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'comments'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `comments`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'computed_policies'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `computed_policies`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'computed_policy_exceptions'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `computed_policy_exceptions`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'conditions'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `conditions`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'conditions_manifests'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `conditions_manifests`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'device_commands'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `device_commands`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'device_logs'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `device_logs`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'device_messages'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `device_messages`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'device_messages_patient_results'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `device_messages_patient_results`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'device_models'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `device_models`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'devices'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `devices`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'encounters'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `encounters`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'episodes'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `episodes`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'file_messages'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `file_messages`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'filters'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `filters`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'identities'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `identities`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'institutions'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `institutions`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'manifests'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `manifests`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'oauth_access_grants'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `oauth_access_grants`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'oauth_access_tokens'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `oauth_access_tokens`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'oauth_applications'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `oauth_applications`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'old_passwords'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `old_passwords`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'page_headers'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `page_headers`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'patient_results'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `patient_results`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'patients'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `patients`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'policies'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `policies`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'recipient_notification_histories'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `recipient_notification_histories`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'requested_tests'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `requested_tests`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'roles'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `roles`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'roles_users'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `roles_users`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'sample_identifiers'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `sample_identifiers`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'samples'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `samples`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'settings_pages'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `settings_pages`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'sites'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `sites`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'ssh_keys'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `ssh_keys`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'subscribers'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `subscribers`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'test_result_parsed_data'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `test_result_parsed_data`[0m
  [1m[35m (0.2ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'cdp_test'
  AND fk.table_name = 'users'

  [1m[36m (0.1ms)[0m  [1mSHOW CREATE TABLE `users`[0m
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.5ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (5.9ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (7.0ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (8.1ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (6.0ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (8.2ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.1ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (6.7ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (7.3ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (41.2ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (21.8ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (15.2ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (12.2ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (22.3ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (6.8ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (2.3ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (5.7ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (6.3ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.3ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (6.0ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (7.0ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.3ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (5.5ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.9ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$Y4PjB1w9SZPFGuuHxJNDKe83VjY6POO.lpAZxo.Rjr2DUOxrnBeU6', 'Ericka', 'Ziemann', '2016-08-29 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('0fbd5819-deaa-d4e2-00f8-d67855d1cf47', 1, 'Aric Smith', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$3fQBzp9v3amNEITPurNvFeNQ0GbynipRxqn4E4YKJc04DuCIYa.B2', 'Emilio', 'Daugherty', '2016-08-29 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('2b2f8e9f-388c-c037-3568-567ac1c77c22', 2, 'Mrs. Terry Goyette', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 2, 3, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 2, 4, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$Km77Ye0OeLpnkUXdjEEVteeMWMZpjmJatlQyUfltH/SWBkoMlJ.ti', 'Tania', 'Fay', '2016-08-29 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('79fb55e4-cf99-a6cd-5f35-bbad212f572a', 3, 'Mr. Alphonso Witting', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 3, 5, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 3, 6, '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$mcCuOtY4Q.2L6jfd9jicuO/RZla8uFSByK1xaZtYEeXdVi7umAVUa', 'Lavonne', 'Homenick', '2016-08-29 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('248ba977-5116-d202-9c6e-19e668707be3', 4, 'Ross Senger', '2016-08-30 22:13:46', '2016-08-30 22:13:46')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:46', '2016-08-30 22:13:46')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 4, 7, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 4, 8, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$leUx3Fx8wmK.GFVIzingQ.4bf0nFqih2sYwZ1.cU99FumsJXpMv6q', 'Trycia', 'Padberg', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('55a6f0cf-968b-34ef-8433-0998b085f511', 5, 'Greg McCullough IV', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 5, 9, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.7ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 5, 10, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$kalJaZK0YVcGjPr8tgBx/Ojn1WIgF73lUCdC94F4FP1Tcx1HK4pV2', 'Bo', 'Gorczany', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('ea55fe85-4240-1a00-f345-0bdfb287133c', 6, 'Rod Skiles', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 6, 11, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 6, 12, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$zO9a8LtzQIuPuBNAQtnWLOO3HeNUTfGIVXeKZlxSYGlVlHw5Gh8Oa', 'Nelle', 'Hammes', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('6c9850c3-73d7-6a06-a3da-c387221dc1c0', 7, 'Dameon Swaniawski', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 7, 13, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 7, 14, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$v8O1UNKRiAfPklx8A1h00uVD3WDeqkIIDvlycZIhaF.q50.L2WOPa', 'Layla', 'Hills', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.6ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.7ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('8507da19-16ef-1684-3f4b-619a73716663', 8, 'Scot Kling', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 8, 15, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 8, 16, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$O1jDdYA0pxzVlWhQHZqVweHhLUnKn9A/1f1vmvHCktKG5eDUQnHeO', 'Leone', 'Runte', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c6519677-2b75-1489-ceed-3545dd3d29f6', 9, 'Demarcus Roberts V', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 9, 17, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 9, 18, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$YR8ALWHiHX/49aEv5lWaZOukuAk5EfA632ZVFSP/8RfCc8LejeOXO', 'Reginald', 'Jaskolski', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('0567d008-4c06-e3b4-32ef-f3f5090b85ef', 10, 'Marge Simonis', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 10, 19, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 10, 20, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$F2uYz7EoVuu1AWOdzGg9aOX0iHzdy8N1Jlwcm7Bn/XTDg6KEb8tv.', 'Fanny', 'Donnelly', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('6cfe989b-ed3d-490a-a909-86b4330e93f5', 11, 'Irving Abernathy', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 11, 21, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 11, 22, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$irkPY8w9.UEgCeQAks.mguUTXRP5ii6gxqKoOQaJ9mb41UJ1Jy8EC', 'Addison', 'Harber', '2016-08-29 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7f75945d-bcfc-b6d6-a69c-b5bf3d97605f', 12, 'Dr. Nestor Lynch', '2016-08-30 22:13:47', '2016-08-30 22:13:47')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 12, 23, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 12, 24, '2016-08-30 22:13:47', '2016-08-30 22:13:47')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.4ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (6.7ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.3ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (40.3ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (29.0ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.1ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$c4DqR4rTZlilIxyHRg4EH.EqbmF7UZamAJjRN9VjEkZjZ0tR3XgFq', 'Ava', 'Beier', '2016-08-29 22:14:14', '2016-08-30 22:14:14', '2016-08-30 22:14:14', '2016-08-30 22:14:14')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('91a8fec9-cd33-ad63-e232-da6891d46493', 1, 'Aric Smith', '2016-08-30 22:14:14', '2016-08-30 22:14:14')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:14:15', '2016-08-30 22:14:15')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:14:15', '2016-08-30 22:14:15')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:14:15', '2016-08-30 22:14:15')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:14:15', '2016-08-30 22:14:15')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.4ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.7ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (20.9ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (9.7ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (5.5ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (6.6ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.2ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (5.5ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (8.5ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (5.6ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (7.5ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (6.6ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (8.9ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (7.0ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (5.6ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (6.4ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.0ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.8ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (5.6ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (6.6ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (8.1ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (6.5ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (7.0ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (6.9ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.1ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.8ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (6.1ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (6.3ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (6.0ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (5.6ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (9.2ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.7ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (31.9ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (6.2ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (5.6ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (17.8ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (6.2ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (5.9ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (7.5ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (8.6ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (11.9ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (8.7ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (17.1ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.3ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.6ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.4ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.3ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (7.2ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (6.0ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (4.1ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (7.9ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (5.5ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (7.9ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.5ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.2ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (7.4ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (6.8ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (6.0ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (4.0ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (6.7ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (6.0ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (6.1ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$9lZ4Zs1a/qiwFrcI2Kbpm.jd6YTWQ5cZMxyQXqYT2.G6.Ls77nGPa', 'Wendy', 'Erdman', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('685abb59-0b47-e18a-43b4-27b75a1bffed', 1, 'Aric Smith', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.4ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.6ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'cb1ac7aefbcbd74882a4d5f4f99da0a63ae94801d8dd27b0a9bb149fe6b6f274' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-1' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (6.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$9E1LXXE2XMYXUxY.XXCDUOzgSg9gmYseMo8aL85HGhVOfRe/Fg2z6', 'Jasen', 'Carroll', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.5ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('1e8456be-e82a-ee01-4db9-17caa6e79d06', 2, 'Mrs. Terry Goyette', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.7ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 2, 3, '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 2, 4, '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.5ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '9822c35cfe20d5a81afbec00664b51c9f6b03f872ac95aa5fe50b4b271ebec3d' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-2' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$uWvefc7z2s6wcW3cyZiCo.JCVu4OHuJzNwfOiCvVHijOfPY38xyIW', 'Lennie', 'Runolfsson', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('8c30cb74-4aa2-8d47-432d-1a9773a9feac', 3, 'Mr. Alphonso Witting', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 3, 5, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 3, 6, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.4ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '9741499aaa805af73c51ad75dd3b809411e2f6fcce5882657320b378cdb49435' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-3' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.8ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$zlN03LVPTqdbD8c6LZlBYOXqJdwgMDRpEdcGMfBy3uCfZtKDjVnQS', 'Harvey', 'Grant', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('29f7c485-0917-3415-72a6-d53a2fe406e4', 4, 'Ross Senger', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 4, 7, '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 4, 8, '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '740556e27ef920208fc2e783b6ea888aa3fa4dd8ec27ddee500d9b55e3644ece' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-4' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$KjpLS7vvDlDUTtzvVjwazOx7f7S.9FxgMNmEBiYqub4AAag7P3Goq', 'Selmer', 'Simonis', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.1ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c33720ef-0e91-28b8-2a2e-7cc4a3280ffa', 5, 'Greg McCullough IV', '2016-08-30 22:22:34', '2016-08-30 22:22:34')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 5, 9, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 5, 10, '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (8.9ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'bb852bc433704eacd3113a8329dd905ced94c194c8e96de9b74d00fd67a78bc5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$eqYqeuNYKLCnMTKo.gYFxugt0/9FXs6d4ewxXLqcjId449fqKECzS', 'Lexie', 'Gusikowski', '2016-08-29 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('9bca097a-3e29-43d6-4af1-44f57548750e', 6, 'Rod Skiles', '2016-08-30 22:22:34', '2016-08-30 22:22:34')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Admin', 'admin', 6, 11, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Rod Skiles Reader', 'reader', 6, 12, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '44437c83f938d5694afb28b8df23bf975a2f1f00cc1aa2c7e52bbe1fc01cf8d0' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-6' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$5xF0ExNZCTHDOTsapnYE6eCwNBIchhkFC9FX9HWjAE6ceEJ62Kueq', 'Danika', 'Luettgen', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('62af9d07-f6f8-231e-fef1-5b92918296c7', 7, 'Dameon Swaniawski', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 7, 13, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 7, 14, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '5eb7c66585c44dff748fa06000ba6aec4130229be27e9d04b3d81a72a78623ae' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-7' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$i4vY6i6vOX4qX5ClT9/FBO12iWHwz/Qxt4vHO6Hp.YOrMNTjfj0Vy', 'Flo', 'Collins', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f21a8633-731a-68a7-d508-0eb3e5759f00', 8, 'Scot Kling', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Admin', 'admin', 8, 15, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Scot Kling Reader', 'reader', 8, 16, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'fba511dc293f508e4709836dad310337f69100d07670c3fe39079d3570dd8e31' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-8' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$cQQdW/0Yd1eWlKbgJzWpnOcbA5ag/hF1/E3RCC7GPXp0uuTGxVR3i', 'Burley', 'Tillman', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f27d7e2e-1653-8869-8f25-faa54c7814bf', 9, 'Demarcus Roberts V', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 9, 17, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 9, 18, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'e58d0777a2223615ef179d0b0040e9bda79a4f937bf41d43cddde4d32a907fe8' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-9' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$wHHt5G3eucKXqgfCaybKGOJMfUoau6f.m/F1X11ZpHhiXebFFZRl.', 'Darrin', 'Stokes', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('5f6eb24e-6d70-bd44-679d-8d5dd899a846', 10, 'Marge Simonis', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Admin', 'admin', 10, 19, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Marge Simonis Reader', 'reader', 10, 20, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2e7b1d365288286a4c63a70c0c4e529c2abd3fd4e0ac1399d74ad10988c60b2d' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-10' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$n4UlXu8bp1.9HLsb9/Ple.H5VrQTDAZl1ESsDYG91Aociy5718TVy', 'Ocie', 'Senger', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b8e53f5f-fe1a-2723-f6ae-6b8599208283', 11, 'Irving Abernathy', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 11, 21, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 11, 22, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'adc302cc323b428fe1086a7852208f986c76ddfc6712a7b23fbaaa33e7c8826e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-11' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$L5wXUZ5YtkW9KZASEZlpbOPaBabhS6F.QZF0sYbapziVHtDixQcv6', 'Abbey', 'Huel', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('ab8884a4-b286-7c13-ef7a-2491d2dea5cf', 12, 'Dr. Nestor Lynch', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Admin', 'admin', 12, 23, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Nestor Lynch Reader', 'reader', 12, 24, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '3d355419986a01096669c6f315fed2741ab73c4b014d1621995b9338326baa04' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-12' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'wilfred@williamsonabshire.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('wilfred@williamsonabshire.net', '$2a$04$y5ar6d3QOUpOdmPJ4uJ0B.IQvDcw.rfeYc19n2T5WjN3SHdislG/S', 'Lenore', 'Beahan', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('e46d8375-4c8a-d196-66e8-0eb5840fecb8', 13, 'Miss Bud Gaylord', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 25 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Admin', 'admin', 13, 25, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 25[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=13\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=13\",\"action\":\"site:read\"},{\"resource\":\"device?institution=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=13\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=13\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 26 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Reader', 'reader', 13, 26, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 26[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 13, 13, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 13  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 13[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '6b120d556f79a375d410153583664610f652402d7926ae1796971dd84f690c2e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-13' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'morris@bosco.io' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('morris@bosco.io', '$2a$04$hC/ST91LvOTEP3rWDbTiluPuGAdqflSkddNLGo4I3AO5c3dGOn3AW', 'Cayla', 'Buckridge', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('93978d38-2e0e-d2af-3ee5-185b1c6f21fc', 14, 'Miss Jensen Steuber', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 27 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Jensen Steuber Admin', 'admin', 14, 27, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 27
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=14\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=14\",\"action\":\"site:read\"},{\"resource\":\"device?institution=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=14\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=14\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 28 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Jensen Steuber Reader', 'reader', 14, 28, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 28
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 14, 14, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 14  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 14
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '3ca18d22e754620a63188c86281831dc539b8ddf96446b902e1e0eafb8f6db75' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-14' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'juana@lakinkihn.com' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('juana@lakinkihn.com', '$2a$04$Rbul1xEuMqSCIKVNK4UTBO14SU30.EHkcxjSibH/Ismz8TFFORpBW', 'Eleanore', 'Wilkinson', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f112c2cf-5fe2-b70d-f5be-ad5a6acc88fe', 15, 'Irving Adams III', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 29 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Adams III Admin', 'admin', 15, 29, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 29[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=15\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=15\",\"action\":\"site:read\"},{\"resource\":\"device?institution=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=15\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=15\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 30 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Adams III Reader', 'reader', 15, 30, '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 30[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 15, 15, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 15  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 15[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2bfffa5117806086af02d39518b7300eb7f9a00b62f3b47170a7796b691d3e3e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-15' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'omer_schmitt@hammeskautzer.net' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('omer_schmitt@hammeskautzer.net', '$2a$04$bqymp.ToHVdQBIlAKfw62e8wWWf4e9YwYxDixXtw6Be9VF73/ZjAC', 'Hardy', 'Thompson', '2016-08-29 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('3e54c4a4-7a3a-3280-df7c-3c31244550e4', 16, 'Mrs. Kailey Bednar', '2016-08-30 22:22:35', '2016-08-30 22:22:35')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 31 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Kailey Bednar Admin', 'admin', 16, 31, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 31
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=16\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=16\",\"action\":\"site:read\"},{\"resource\":\"device?institution=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=16\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=16\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 32 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Kailey Bednar Reader', 'reader', 16, 32, '2016-08-30 22:22:35', '2016-08-30 22:22:35')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 32
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 16, 16, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 16  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 16
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '71e3e0fa100c448257965ccb9f5be3af061a546a90d82637fda6f9367725be2a' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-16' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'reece@sawayn.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('reece@sawayn.net', '$2a$04$6UFU.TkI4tXdArLRs9TZEOjaq2WXYhbfkbKpFJVQJc17G5yon7KWa', 'Myrtis', 'Gerhold', '2016-08-29 22:22:36', '2016-08-30 22:22:36', '2016-08-30 22:22:36', '2016-08-30 22:22:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c5ca2944-fcf8-6ba1-a3df-6bc72838f6a0', 17, 'Izabella Fay', '2016-08-30 22:22:36', '2016-08-30 22:22:36')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:36', '2016-08-30 22:22:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 33 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Admin', 'admin', 17, 33, '2016-08-30 22:22:36', '2016-08-30 22:22:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 33[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=17\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=17\",\"action\":\"site:read\"},{\"resource\":\"device?institution=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=17\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=17\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:22:36', '2016-08-30 22:22:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 34 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Reader', 'reader', 17, 34, '2016-08-30 22:22:36', '2016-08-30 22:22:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 34[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '17', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '17', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '17', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '17', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '17', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 17, 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 17, 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 17, 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 17, 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 17, 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 17, 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 17, 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 17, 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 17, 17, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 17, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 17, 17, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 17  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 17[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '398005303c7f19f5cc6c2f17729468b67fabd158cd92f16942c1552402d78cbb' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-17' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.3ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (6.2ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (6.2ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (4.7ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.7ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (5.4ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (5.9ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (7.2ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (2.3ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (5.4ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (2.8ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (5.9ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$taIfV3/7.ftlAG21ksSWoODEE6vvoc9w.KY/r7d2saczmLM13iMXS', 'Hannah', 'Hagenes', '2016-08-29 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('45ef5413-b61e-e7bf-49bc-c7f9fe96e27d', 1, 'Aric Smith', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (1.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'cb1ac7aefbcbd74882a4d5f4f99da0a63ae94801d8dd27b0a9bb149fe6b6f274' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-1' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('ef4cabf8-84e5-bf55-49a7-4989d424d819', 'Mr. Otto Lesch', 1, 0, 'cb1ac7aefbcbd74882a4d5f4f99da0a63ae94801d8dd27b0a9bb149fe6b6f274', 'patient-1', x'd33ba77e506e6748df8c669db6d0e46dc9c2896f8193afe6b364e1f8dc74fdd7f0ebcd624ca00ea731222b36b148fffed6b309d330a719018829', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.2ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 1 LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 1  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (1, '48e160fb-a32b-1173-9d96-1cc08595fee3', 'Mrs. Terry Goyette', 'fake_0', '3713 Tyshawn Via', 'East Judsonfurt', 'Rhode Island', '86054', 'Denmark', 'North Carolina', -97.0, -22.0, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `sites` SET `institution_id` = 1, `uuid` = '48e160fb-a32b-1173-9d96-1cc08595fee3', `name` = 'Mrs. Terry Goyette', `location_geoid` = 'fake_0', `address` = '3713 Tyshawn Via', `city` = 'East Judsonfurt', `state` = 'Rhode Island', `zip_code` = '86054', `country` = 'Denmark', `region` = 'North Carolina', `lat` = -97.0, `lng` = -22.0, `created_at` = '2016-08-30 22:23:09', `updated_at` = '2016-08-30 22:23:09', `id` = 1, `prefix` = '48e160fb-a32b-1173-9d96-1cc08595fee3' WHERE `sites`.`id` = 1
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 1 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Admin', 'admin', 1, 1, '48e160fb-a32b-1173-9d96-1cc08595fee3', 3, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":\"site:read\"},{\"resource\":\"device?site=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=1\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Reader', 'reader', 1, 1, '48e160fb-a32b-1173-9d96-1cc08595fee3', 4, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=1\",\"action\":\"*\"},{\"resource\":\"encounter?site=1\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Technician', 'technician', 1, 1, '48e160fb-a32b-1173-9d96-1cc08595fee3', 5, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=1\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=1\",\"action\":\"*\"},{\"resource\":\"encounter?site=1\",\"action\":\"*\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Supervisor', 'supervisor', 1, 1, '48e160fb-a32b-1173-9d96-1cc08595fee3', 6, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 1 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 1  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$S5pTN63cUnI/4M.m1r536e0FPyqU.OMzl1d7d2wEFNzBLH9t/8JCa', 'Eleonore', 'Leuschke', '2016-08-29 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('30ad4add-9895-0d4c-8b1c-11242c134bbd', 2, 'Mr. Alphonso Witting', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 2, 7, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 2, 8, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '9741499aaa805af73c51ad75dd3b809411e2f6fcce5882657320b378cdb49435' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-3' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('322577c7-c992-d9c3-23c7-6c1f93d5d5ea', 'Christopher Adams', 2, 0, '9741499aaa805af73c51ad75dd3b809411e2f6fcce5882657320b378cdb49435', 'patient-3', x'd33ba77e506e6748df8c669db6d0e46fc9c2896f8193afe6b364efe2803dc1d7ebf4854b5bf32cab723219dcf692c7b7cc9d4131e9a7280c6f0859492a', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.3ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 2 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 2  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (2, '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', 'Ross Senger', 'fake_0', '61614 Rempel Stream', 'Lake Anissachester', 'Idaho', '61966', 'Myanmar', 'Tennessee', -60.0, -82.0, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `sites` SET `institution_id` = 2, `uuid` = '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', `name` = 'Ross Senger', `location_geoid` = 'fake_0', `address` = '61614 Rempel Stream', `city` = 'Lake Anissachester', `state` = 'Idaho', `zip_code` = '61966', `country` = 'Myanmar', `region` = 'Tennessee', `lat` = -60.0, `lng` = -82.0, `created_at` = '2016-08-30 22:23:09', `updated_at` = '2016-08-30 22:23:09', `id` = 2, `prefix` = '310bdf5d-2c6a-2917-7a53-d240ce87fc5b' WHERE `sites`.`id` = 2[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 2 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Admin', 'admin', 2, 2, '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', 9, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":\"site:read\"},{\"resource\":\"device?site=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=2\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Reader', 'reader', 2, 2, '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', 10, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=2\",\"action\":\"*\"},{\"resource\":\"encounter?site=2\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Technician', 'technician', 2, 2, '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', 11, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=2\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=2\",\"action\":\"*\"},{\"resource\":\"encounter?site=2\",\"action\":\"*\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Supervisor', 'supervisor', 2, 2, '310bdf5d-2c6a-2917-7a53-d240ce87fc5b', 12, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 2 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 2  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$5aloMELPLso0Dk3FcnZ2zeQfOuTCM2UcTM/jhQiFK859pp0YUcMf.', 'Melissa', 'Emard', '2016-08-29 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('87fc1813-d60c-66c1-dadf-f5e4d64d9731', 3, 'Greg McCullough IV', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 3, 13, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 3, 14, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'bb852bc433704eacd3113a8329dd905ced94c194c8e96de9b74d00fd67a78bc5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('6c15f10c-c7fa-f984-d8a9-ec48d5b7b4dd', 'Natasha Steuber', 3, 0, 'bb852bc433704eacd3113a8329dd905ced94c194c8e96de9b74d00fd67a78bc5', 'patient-5', x'd33ba77e506e6748df8c669db6d0e469c9c2896f8193afe6b364e2eb8635c1cbe5a4be5a4ca60faa617d17c374763410dc7cf4edf53dc0b64ffbd5', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.3ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 3 LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 3  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (3, '81829305-5636-7695-ffa5-b5c7c089bf32', 'Rod Skiles', 'fake_0', '23053 Magnus Knoll', 'Lake Tateborough', 'Connecticut', '77706', 'Israel', 'Iowa', 86.0, 70.0, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `sites` SET `institution_id` = 3, `uuid` = '81829305-5636-7695-ffa5-b5c7c089bf32', `name` = 'Rod Skiles', `location_geoid` = 'fake_0', `address` = '23053 Magnus Knoll', `city` = 'Lake Tateborough', `state` = 'Connecticut', `zip_code` = '77706', `country` = 'Israel', `region` = 'Iowa', `lat` = 86.0, `lng` = 70.0, `created_at` = '2016-08-30 22:23:09', `updated_at` = '2016-08-30 22:23:09', `id` = 3, `prefix` = '81829305-5636-7695-ffa5-b5c7c089bf32' WHERE `sites`.`id` = 3
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 3 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Admin', 'admin', 3, 3, '81829305-5636-7695-ffa5-b5c7c089bf32', 15, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":\"site:read\"},{\"resource\":\"device?site=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=3\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Reader', 'reader', 3, 3, '81829305-5636-7695-ffa5-b5c7c089bf32', 16, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=3\",\"action\":\"*\"},{\"resource\":\"encounter?site=3\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Technician', 'technician', 3, 3, '81829305-5636-7695-ffa5-b5c7c089bf32', 17, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=3\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=3\",\"action\":\"*\"},{\"resource\":\"encounter?site=3\",\"action\":\"*\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Supervisor', 'supervisor', 3, 3, '81829305-5636-7695-ffa5-b5c7c089bf32', 18, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 3 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 3  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (1.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$FawnTz.uMTgr81k5FzuYfO45HJnlSm8QbYzHPlTMtfHSZA7HgPJdu', 'Mozelle', 'Powlowski', '2016-08-29 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c4205f33-c9bb-61b9-9023-5e20e4caba21', 4, 'Dameon Swaniawski', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Admin', 'admin', 4, 19, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dameon Swaniawski Reader', 'reader', 4, 20, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '5eb7c66585c44dff748fa06000ba6aec4130229be27e9d04b3d81a72a78623ae' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-7' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('d929f5ce-22c2-74c3-cd2d-ca4d4ceb5270', 'Yazmin McClure', 4, 0, '5eb7c66585c44dff748fa06000ba6aec4130229be27e9d04b3d81a72a78623ae', 'patient-7', x'd33ba77e506e6748df8c669db6d0e46bc9c2896f8193afe6b364f5eb8839dbcda4c98e6d45a61faa3122a399b6f5dad546103609d305870a9a84', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 4 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 4  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (4, '8d8e327f-40a1-e743-a91f-ae3aa1484220', 'Scot Kling', 'fake_0', '44696 Salma Green', 'Brekkebury', 'Maine', '91045', 'Tuvalu', 'Iowa', 100.0, -2.0, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `sites` SET `institution_id` = 4, `uuid` = '8d8e327f-40a1-e743-a91f-ae3aa1484220', `name` = 'Scot Kling', `location_geoid` = 'fake_0', `address` = '44696 Salma Green', `city` = 'Brekkebury', `state` = 'Maine', `zip_code` = '91045', `country` = 'Tuvalu', `region` = 'Iowa', `lat` = 100.0, `lng` = -2.0, `created_at` = '2016-08-30 22:23:09', `updated_at` = '2016-08-30 22:23:09', `id` = 4, `prefix` = '8d8e327f-40a1-e743-a91f-ae3aa1484220' WHERE `sites`.`id` = 4[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 4 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Scot Kling Admin', 'admin', 4, 4, '8d8e327f-40a1-e743-a91f-ae3aa1484220', 21, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":\"site:read\"},{\"resource\":\"device?site=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=4\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Scot Kling Reader', 'reader', 4, 4, '8d8e327f-40a1-e743-a91f-ae3aa1484220', 22, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=4\",\"action\":\"*\"},{\"resource\":\"encounter?site=4\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Scot Kling Technician', 'technician', 4, 4, '8d8e327f-40a1-e743-a91f-ae3aa1484220', 23, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=4\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=4\",\"action\":\"*\"},{\"resource\":\"encounter?site=4\",\"action\":\"*\"}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Scot Kling Supervisor', 'supervisor', 4, 4, '8d8e327f-40a1-e743-a91f-ae3aa1484220', 24, '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 4 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 4  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$fKHWmttuUCxAKJPEB.piAeVc3fxuXpwmAjw9PnWJHraro/58ki5wO', 'Lamar', 'Schamberger', '2016-08-29 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.8ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c262456b-f0ef-ec44-05b4-dec126ee4502', 5, 'Demarcus Roberts V', '2016-08-30 22:23:09', '2016-08-30 22:23:09')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 25 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 5, 25, '2016-08-30 22:23:09', '2016-08-30 22:23:09')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 25[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 26 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 5, 26, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 26[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'e58d0777a2223615ef179d0b0040e9bda79a4f937bf41d43cddde4d32a907fe8' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-9' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('4e20fca1-ff33-da3b-8c14-d83f6e1c5de7', 'Vallie Cronin', 5, 0, 'e58d0777a2223615ef179d0b0040e9bda79a4f937bf41d43cddde4d32a907fe8', 'patient-9', x'd33ba77e506e6748df8c669db6d0e465c9c2896f8193afe6b364faeb9e38dbc6a4c79f4147ba03ed6e3b2af9b3a5f8af74c2552c528e10dfae', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.2ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 5 LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 5  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (5, 'e5df0df2-936d-1153-7737-ff2e938e1001', 'Marge Simonis', 'fake_0', '9537 Jakubowski Islands', 'Port Kory', 'Oregon', '29971', 'San Marino', 'Alabama', -1.0, -3.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `sites` SET `institution_id` = 5, `uuid` = 'e5df0df2-936d-1153-7737-ff2e938e1001', `name` = 'Marge Simonis', `location_geoid` = 'fake_0', `address` = '9537 Jakubowski Islands', `city` = 'Port Kory', `state` = 'Oregon', `zip_code` = '29971', `country` = 'San Marino', `region` = 'Alabama', `lat` = -1.0, `lng` = -3.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 5, `prefix` = 'e5df0df2-936d-1153-7737-ff2e938e1001' WHERE `sites`.`id` = 5
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 5 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 27 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Admin', 'admin', 5, 5, 'e5df0df2-936d-1153-7737-ff2e938e1001', 27, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 27[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":\"site:read\"},{\"resource\":\"device?site=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=5\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.6ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 28 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Reader', 'reader', 5, 5, 'e5df0df2-936d-1153-7737-ff2e938e1001', 28, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 28[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=5\",\"action\":\"*\"},{\"resource\":\"encounter?site=5\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 29 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Technician', 'technician', 5, 5, 'e5df0df2-936d-1153-7737-ff2e938e1001', 29, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 29[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=5\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=5\",\"action\":\"*\"},{\"resource\":\"encounter?site=5\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 30 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Supervisor', 'supervisor', 5, 5, 'e5df0df2-936d-1153-7737-ff2e938e1001', 30, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 30[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.2ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 5 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 5  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$0dLtCZ7Kd/fDmYyNz5tXzuqKZrHZnv.lAVBqtD.q3aV33oTWoUWvy', 'Angelica', 'Weimann', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7cfbc1f0-c810-b43d-2949-dff4b43ed180', 6, 'Irving Abernathy', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 31 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Admin', 'admin', 6, 31, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 31
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 32 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Abernathy Reader', 'reader', 6, 32, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 32
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'adc302cc323b428fe1086a7852208f986c76ddfc6712a7b23fbaaa33e7c8826e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-11' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('e3a8da43-b400-7e0f-4089-52523fd20cfe', 'Ruthie Lesch', 6, 0, 'adc302cc323b428fe1086a7852208f986c76ddfc6712a7b23fbaaa33e7c8826e', 'patient-11', x'd33ba77e506e6748df8c669db6d0e46ddacc87238e9fa7a1ab7c8ed88720dacae1a4a14b5ab005ed6e37563399ea86ca3ce5032e4826f9ec38', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 6 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 6  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (6, '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', 'Dr. Nestor Lynch', 'fake_0', '760 Cremin Trafficway', 'North Citlalliside', 'West Virginia', '84585', 'Tonga', 'West Virginia', 30.0, -81.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `sites` SET `institution_id` = 6, `uuid` = '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', `name` = 'Dr. Nestor Lynch', `location_geoid` = 'fake_0', `address` = '760 Cremin Trafficway', `city` = 'North Citlalliside', `state` = 'West Virginia', `zip_code` = '84585', `country` = 'Tonga', `region` = 'West Virginia', `lat` = 30.0, `lng` = -81.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 6, `prefix` = '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b' WHERE `sites`.`id` = 6[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 6 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 33 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dr. Nestor Lynch Admin', 'admin', 6, 6, '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', 33, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 33
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":\"site:read\"},{\"resource\":\"device?site=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=6\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 34 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dr. Nestor Lynch Reader', 'reader', 6, 6, '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', 34, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 34
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=6\",\"action\":\"*\"},{\"resource\":\"encounter?site=6\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 35 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dr. Nestor Lynch Technician', 'technician', 6, 6, '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', 35, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 35
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=6\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=6\",\"action\":\"*\"},{\"resource\":\"encounter?site=6\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 36 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dr. Nestor Lynch Supervisor', 'supervisor', 6, 6, '03e575a5-51ca-bcfe-78ff-8ef46cd7e97b', 36, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 36
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 6 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 6  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$hYNvo.dxvT4ABDqsrVv/iOCsP7u1hdEX18pONwKst/kgnkHQBLK/2', 'Oleta', 'Eichmann', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('4991cf95-35bf-275a-1f24-8a2ad4264b76', 7, 'Miss Bud Gaylord', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 37 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Admin', 'admin', 7, 37, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 37[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 38 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Reader', 'reader', 7, 38, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 38[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '6b120d556f79a375d410153583664610f652402d7926ae1796971dd84f690c2e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-13' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('8dde5516-e171-991c-869f-55f705a8c588', 'Mrs. Reginald Zieme', 7, 0, '6b120d556f79a375d410153583664610f652402d7926ae1796971dd84f690c2e', 'patient-13', x'd33ba77e506e6748df8c669db6d0e46dd8cc87238e9fa7a1ab7c8ec780279c83d6e18a4747b201ab3305039be696ec05f81510927d05cc42e54460f99c79b207', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 7 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 7  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (7, '1af0f47e-7d6c-e321-f396-c64713473083', 'Miss Jensen Steuber', 'fake_0', '9896 Quigley Via', 'Jaylontown', 'Hawaii', '55044-9940', 'Serbia', 'Iowa', -64.0, 62.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 7, `uuid` = '1af0f47e-7d6c-e321-f396-c64713473083', `name` = 'Miss Jensen Steuber', `location_geoid` = 'fake_0', `address` = '9896 Quigley Via', `city` = 'Jaylontown', `state` = 'Hawaii', `zip_code` = '55044-9940', `country` = 'Serbia', `region` = 'Iowa', `lat` = -64.0, `lng` = 62.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 7, `prefix` = '1af0f47e-7d6c-e321-f396-c64713473083' WHERE `sites`.`id` = 7
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 7 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 39 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Admin', 'admin', 7, 7, '1af0f47e-7d6c-e321-f396-c64713473083', 39, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 39[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":\"site:read\"},{\"resource\":\"device?site=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=7\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 40 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Reader', 'reader', 7, 7, '1af0f47e-7d6c-e321-f396-c64713473083', 40, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 40[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=7\",\"action\":\"*\"},{\"resource\":\"encounter?site=7\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 41 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Technician', 'technician', 7, 7, '1af0f47e-7d6c-e321-f396-c64713473083', 41, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 41[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=7\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=7\",\"action\":\"*\"},{\"resource\":\"encounter?site=7\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 42 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Supervisor', 'supervisor', 7, 7, '1af0f47e-7d6c-e321-f396-c64713473083', 42, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 42[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 7 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 7  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$gKWYlRy.x4Jw2zNFTTlAY.vuavCmi9pZ4vyq0GzuRVdOWpRM7LM6u', 'Zetta', 'Kessler', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a7b8440e-b1ae-2aef-0a11-dbec0c30dd9c', 8, 'Irving Adams III', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 43 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Adams III Admin', 'admin', 8, 43, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 43
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 44 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Irving Adams III Reader', 'reader', 8, 44, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 44
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2bfffa5117806086af02d39518b7300eb7f9a00b62f3b47170a7796b691d3e3e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-15' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('0ffa3b78-e4eb-453e-f16b-17b9d6116c3b', 'Friedrich Luettgen', 8, 0, '2bfffa5117806086af02d39518b7300eb7f9a00b62f3b47170a7796b691d3e3e', 'patient-15', x'd33ba77e506e6748df8c669db6d0e46ddecc87238e9fa7a1ab7c8ecc803dd7c7f6ed8e46099f18aa672b0d9be5d1b36b3d68f5f8de7bf4abab160eff6b2ee4', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 8 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 8  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (8, '1e024e7d-fbeb-e247-4f45-78380e9567b5', 'Mrs. Kailey Bednar', 'fake_0', '64454 Kshlerin Crest', 'Lake Austinton', 'Montana', '18441', 'Italy', 'West Virginia', -30.0, 57.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 8, `uuid` = '1e024e7d-fbeb-e247-4f45-78380e9567b5', `name` = 'Mrs. Kailey Bednar', `location_geoid` = 'fake_0', `address` = '64454 Kshlerin Crest', `city` = 'Lake Austinton', `state` = 'Montana', `zip_code` = '18441', `country` = 'Italy', `region` = 'West Virginia', `lat` = -30.0, `lng` = 57.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 8, `prefix` = '1e024e7d-fbeb-e247-4f45-78380e9567b5' WHERE `sites`.`id` = 8[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 8 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 45 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Kailey Bednar Admin', 'admin', 8, 8, '1e024e7d-fbeb-e247-4f45-78380e9567b5', 45, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 45
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":\"site:read\"},{\"resource\":\"device?site=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=8\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 46 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Kailey Bednar Reader', 'reader', 8, 8, '1e024e7d-fbeb-e247-4f45-78380e9567b5', 46, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 46
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=8\",\"action\":\"*\"},{\"resource\":\"encounter?site=8\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 47 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Kailey Bednar Technician', 'technician', 8, 8, '1e024e7d-fbeb-e247-4f45-78380e9567b5', 47, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 47
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=8\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=8\",\"action\":\"*\"},{\"resource\":\"encounter?site=8\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 48 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Kailey Bednar Supervisor', 'supervisor', 8, 8, '1e024e7d-fbeb-e247-4f45-78380e9567b5', 48, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 48
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 8 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 8  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$TQZCPAQkHRi0qIeUG6b5o.2L2akapt/hnXErnCACAk21puiaqXyYW', 'Lambert', 'Fahey', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a9ec4df7-0834-346f-81ee-300b486681fd', 9, 'Izabella Fay', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 49 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Admin', 'admin', 9, 49, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 49[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 50 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Reader', 'reader', 9, 50, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 50[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '398005303c7f19f5cc6c2f17729468b67fabd158cd92f16942c1552402d78cbb' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-17' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('3cd939e7-ec5a-224d-9237-c7358225c918', 'Aletha Veum', 9, 0, '398005303c7f19f5cc6c2f17729468b67fabd158cd92f16942c1552402d78cbb', 'patient-17', x'd33ba77e506e6748df8c669db6d0e46ddccc87238e9fa7a1ab7c8ecb9e31c6cbe5a4bb4b5cbe4fb2b3769938a7ccd597e2e32412b8c6abba', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 9 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 9  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (9, '18add022-b620-be58-1c53-ccfd914e5819', 'Ida Wyman', 'fake_0', '99240 Reinger Views', 'Ollieberg', 'Delaware', '11563-5147', 'Cocos (Keeling) Islands', 'Georgia', 58.0, -75.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 9, `uuid` = '18add022-b620-be58-1c53-ccfd914e5819', `name` = 'Ida Wyman', `location_geoid` = 'fake_0', `address` = '99240 Reinger Views', `city` = 'Ollieberg', `state` = 'Delaware', `zip_code` = '11563-5147', `country` = 'Cocos (Keeling) Islands', `region` = 'Georgia', `lat` = 58.0, `lng` = -75.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 9, `prefix` = '18add022-b620-be58-1c53-ccfd914e5819' WHERE `sites`.`id` = 9
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 9 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 51 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Admin', 'admin', 9, 9, '18add022-b620-be58-1c53-ccfd914e5819', 51, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 51[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":\"site:read\"},{\"resource\":\"device?site=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=9\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 52 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Reader', 'reader', 9, 9, '18add022-b620-be58-1c53-ccfd914e5819', 52, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 52[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=9\",\"action\":\"*\"},{\"resource\":\"encounter?site=9\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 53 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Technician', 'technician', 9, 9, '18add022-b620-be58-1c53-ccfd914e5819', 53, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 53[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=9\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=9\",\"action\":\"*\"},{\"resource\":\"encounter?site=9\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 54 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Supervisor', 'supervisor', 9, 9, '18add022-b620-be58-1c53-ccfd914e5819', 54, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 54[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 9 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 9  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$/YOysIgmKKOmigwhLGUQiuxDozfBVTcerLlBlajhSPmoQ6L5zr1Q.', 'Jany', 'Emard', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a108c42d-e1e5-d4d7-bba5-e17615121cf7', 10, 'Dr. Addison Ryan', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 55 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Addison Ryan Admin', 'admin', 10, 55, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 55
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 56 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Dr. Addison Ryan Reader', 'reader', 10, 56, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 56
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '7d47eed630677531609387a0d0e2bdca535369276915f4189e7baef624641cde' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-19' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('cc98d3e8-5ffc-ec09-bbb3-e95a280cc41f', 'Miss Zella Volkman', 10, 0, '7d47eed630677531609387a0d0e2bdca535369276915f4189e7baef624641cde', 'patient-19', x'd33ba77e506e6748df8c669db6d0e46dd2cc87238e9fa7a1ab7c8ec79b27c183dee1814248f33ba07f34079fe5d1b3fca53e5070c62577f019e385fc813b38', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 10 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 10  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (10, 'c851704b-563d-9aa0-004d-b4a57ef612c8', 'Jerry Shanahan', 'fake_0', '15706 Runte Pike', 'Port Amyborough', 'Pennsylvania', '22150', 'Sao Tome and Principe', 'North Carolina', 72.0, 4.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 10, `uuid` = 'c851704b-563d-9aa0-004d-b4a57ef612c8', `name` = 'Jerry Shanahan', `location_geoid` = 'fake_0', `address` = '15706 Runte Pike', `city` = 'Port Amyborough', `state` = 'Pennsylvania', `zip_code` = '22150', `country` = 'Sao Tome and Principe', `region` = 'North Carolina', `lat` = 72.0, `lng` = 4.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 10, `prefix` = 'c851704b-563d-9aa0-004d-b4a57ef612c8' WHERE `sites`.`id` = 10[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 10 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 57 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jerry Shanahan Admin', 'admin', 10, 10, 'c851704b-563d-9aa0-004d-b4a57ef612c8', 57, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 57
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":\"site:read\"},{\"resource\":\"device?site=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=10\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 58 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jerry Shanahan Reader', 'reader', 10, 10, 'c851704b-563d-9aa0-004d-b4a57ef612c8', 58, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 58
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=10\",\"action\":\"*\"},{\"resource\":\"encounter?site=10\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 59 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jerry Shanahan Technician', 'technician', 10, 10, 'c851704b-563d-9aa0-004d-b4a57ef612c8', 59, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 59
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=10\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=10\",\"action\":\"*\"},{\"resource\":\"encounter?site=10\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 60 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jerry Shanahan Supervisor', 'supervisor', 10, 10, 'c851704b-563d-9aa0-004d-b4a57ef612c8', 60, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 60
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 10 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 10  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$l21mTW4tkTkaeFt7nBqVZ.s1I1e.z6YFy.RBNRZmmiM3aFaYr0Zoy', 'Kristofer', 'Barrows', '2016-08-29 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('a990d7f2-3273-5e1b-8df9-d346976dc8a2', 11, 'Karli Beahan', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 61 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Karli Beahan Admin', 'admin', 11, 61, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 61[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 62 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Karli Beahan Reader', 'reader', 11, 62, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 62[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '46c7bea5c6a60693776d8c0f0b47e1ffda31301579fc72502766ed0610bb1e52' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-21' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('e4561b7d-7073-1925-5125-021cc8457782', 'Buster Grady', 11, 0, '46c7bea5c6a60693776d8c0f0b47e1ffda31301579fc72502766ed0610bb1e52', 'patient-21', x'd33ba77e506e6748df8c669db6d0e46edacc87238e9fa7a1ab7c8ec88727c6c6f6a4aa5c48b714ed6e5055a9a9bc045bb45865bca9a2eb3800', '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 11 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 11  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (11, '5cc03dc3-45b3-ccb0-c010-d0549c01d612', 'Geovanni McKenzie III', 'fake_0', '9309 Pagac Manor', 'South Roderick', 'California', '30440-8003', 'Oman', 'New Mexico', -3.0, -62.0, '2016-08-30 22:23:10', '2016-08-30 22:23:10')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 11, `uuid` = '5cc03dc3-45b3-ccb0-c010-d0549c01d612', `name` = 'Geovanni McKenzie III', `location_geoid` = 'fake_0', `address` = '9309 Pagac Manor', `city` = 'South Roderick', `state` = 'California', `zip_code` = '30440-8003', `country` = 'Oman', `region` = 'New Mexico', `lat` = -3.0, `lng` = -62.0, `created_at` = '2016-08-30 22:23:10', `updated_at` = '2016-08-30 22:23:10', `id` = 11, `prefix` = '5cc03dc3-45b3-ccb0-c010-d0549c01d612' WHERE `sites`.`id` = 11
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 11 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 63 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Admin', 'admin', 11, 11, '5cc03dc3-45b3-ccb0-c010-d0549c01d612', 63, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 63[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":\"site:read\"},{\"resource\":\"device?site=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=11\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 64 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Reader', 'reader', 11, 11, '5cc03dc3-45b3-ccb0-c010-d0549c01d612', 64, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 64[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=11\",\"action\":\"*\"},{\"resource\":\"encounter?site=11\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 65 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Technician', 'technician', 11, 11, '5cc03dc3-45b3-ccb0-c010-d0549c01d612', 65, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 65[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=11\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=11\",\"action\":\"*\"},{\"resource\":\"encounter?site=11\",\"action\":\"*\"}]}', '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 66 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Supervisor', 'supervisor', 11, 11, '5cc03dc3-45b3-ccb0-c010-d0549c01d612', 66, '2016-08-30 22:23:10', '2016-08-30 22:23:10')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 66[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 11 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 11  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$xFoxcQEiebzkOx8mD/kgl.dErCC6ZiSHlj8bhOdHo3KIpeh/grBn.', 'Keaton', 'Lebsack', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b4dd0359-381e-ff99-abf7-c0981495321e', 12, 'Yvette Olson', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 67 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Yvette Olson Admin', 'admin', 12, 67, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 67
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 68 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Yvette Olson Reader', 'reader', 12, 68, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 68
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '913ac9c6c8ffc43504c7cb8490d7f7dda8dd7d43c2752a0b9ffe46eb6bcf4699' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-23' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('7d991be1-df08-8d1e-f963-aad0a680c1bf', 'Miss Gussie Roob', 12, 0, '913ac9c6c8ffc43504c7cb8490d7f7dda8dd7d43c2752a0b9ffe46eb6bcf4699', 'patient-23', x'd33ba77e506e6748df8c669db6d0e46ed8cc87238e9fa7a1ab7c8ec79b27c183c3f19e5d40b64d9d7c3008dcf6620f60d5754cd876daaf26b7e183f082', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 12 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 12  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (12, 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', 'Crystal Mohr', 'fake_0', '11020 Feeney Tunnel', 'Cummingsborough', 'Montana', '11660', 'Gambia', 'North Dakota', -72.0, -80.0, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 12, `uuid` = 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', `name` = 'Crystal Mohr', `location_geoid` = 'fake_0', `address` = '11020 Feeney Tunnel', `city` = 'Cummingsborough', `state` = 'Montana', `zip_code` = '11660', `country` = 'Gambia', `region` = 'North Dakota', `lat` = -72.0, `lng` = -80.0, `created_at` = '2016-08-30 22:23:11', `updated_at` = '2016-08-30 22:23:11', `id` = 12, `prefix` = 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56' WHERE `sites`.`id` = 12[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 12 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 69 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Crystal Mohr Admin', 'admin', 12, 12, 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', 69, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 69
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":\"site:read\"},{\"resource\":\"device?site=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=12\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 70 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Crystal Mohr Reader', 'reader', 12, 12, 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', 70, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 70
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=12\",\"action\":\"*\"},{\"resource\":\"encounter?site=12\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 71 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Crystal Mohr Technician', 'technician', 12, 12, 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', 71, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 71
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=12\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=12\",\"action\":\"*\"},{\"resource\":\"encounter?site=12\",\"action\":\"*\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 72 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Crystal Mohr Supervisor', 'supervisor', 12, 12, 'a4ff3f54-64b2-13a2-8dd7-9fd3622ffd56', 72, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 72
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 12 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 12  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'wilfred@williamsonabshire.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('wilfred@williamsonabshire.net', '$2a$04$rUEfiaA89V1InySrQooi8upBYq8GsTDPEl57I/JkSFyUu/wZmCCyy', 'Brooklyn', 'Prosacco', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('e6023faf-344a-f5e0-956f-6884202f86f6', 13, 'Keaton Labadie', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 73 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Keaton Labadie Admin', 'admin', 13, 73, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 73[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=13\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=13\",\"action\":\"site:read\"},{\"resource\":\"device?institution=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=13\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=13\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 74 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Keaton Labadie Reader', 'reader', 13, 74, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 74[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '13', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 13, 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 13, 13, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 13, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 13, 13, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 13  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 13[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2ef8f723dfecebff95afbda383597bf009ee375dc80828c401885a8319a49093' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-25' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('b6fcfdbd-d7bd-1f0d-2443-9f95bbe78dce', 'Gabriel Oberbrunner', 13, 0, '2ef8f723dfecebff95afbda383597bf009ee375dc80828c401885a8319a49093', 'patient-25', x'd33ba77e506e6748df8c669db6d0e46edecc87238e9fa7a1ab7c8ecd9336c0cae1e8cd614bb61fad612a0490ee81ec05f330fe97aa398d25f80d4aa6f0c7b1f7', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 13 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 13  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (13, '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', 'Armando Rice DVM', 'fake_0', '200 Kaci Village', 'Port Otismouth', 'South Dakota', '24029', 'Republic of Korea', 'Idaho', -14.0, -12.0, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 13, `uuid` = '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', `name` = 'Armando Rice DVM', `location_geoid` = 'fake_0', `address` = '200 Kaci Village', `city` = 'Port Otismouth', `state` = 'South Dakota', `zip_code` = '24029', `country` = 'Republic of Korea', `region` = 'Idaho', `lat` = -14.0, `lng` = -12.0, `created_at` = '2016-08-30 22:23:11', `updated_at` = '2016-08-30 22:23:11', `id` = 13, `prefix` = '9171b9b1-e858-981d-cef2-b7bcbfe46d9b' WHERE `sites`.`id` = 13
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 13 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 75 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Admin', 'admin', 13, 13, '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', 75, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 75[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":\"site:read\"},{\"resource\":\"device?site=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=13\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=13\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 76 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Reader', 'reader', 13, 13, '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', 76, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 76[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=13\",\"action\":\"*\"},{\"resource\":\"encounter?site=13\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 77 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Technician', 'technician', 13, 13, '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', 77, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 77[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=13\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=13\",\"action\":\"*\"},{\"resource\":\"encounter?site=13\",\"action\":\"*\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 78 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Supervisor', 'supervisor', 13, 13, '9171b9b1-e858-981d-cef2-b7bcbfe46d9b', 78, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 78[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 13 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 13  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'morris@bosco.io' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('morris@bosco.io', '$2a$04$/.QjJAN4cx1/MddlWrYImeJiy7aMKpheG1eW0TaASteJmC8C7ebey', 'Selena', 'Hoppe', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('d07f7be2-d996-62d4-992c-91de50188d1f', 14, 'Mr. Giovanna Howe', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 79 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Giovanna Howe Admin', 'admin', 14, 79, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 79
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=14\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=14\",\"action\":\"site:read\"},{\"resource\":\"device?institution=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=14\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=14\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 80 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Giovanna Howe Reader', 'reader', 14, 80, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 80
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '14', 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 14, 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 14, 14, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 14, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 14, 14, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 14  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 14
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'fcfa255d1c77624e2613fdf264160a0e7b573610f0299ab919621eed41b289ca' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-27' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('a57063af-12e8-2823-4b8e-4e95308c71c4', 'Darien Stiedemann', 14, 0, 'fcfa255d1c77624e2613fdf264160a0e7b573610f0299ab919621eed41b289ca', 'patient-27', x'd33ba77e506e6748df8c669db6d0e46edccc87238e9fa7a1ab7c8ece9326dbc6eaa4be5a40b609aa7e3e0490a98e2c1b9d3d3c1fb264f2be55592a5936af', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 14 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 14  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (14, '88def875-2738-5fe3-bd56-e26657155c7b', 'Jalon Prosacco II', 'fake_0', '27746 Prohaska Village', 'Gibsonbury', 'West Virginia', '43854', 'United States Minor Outlying Islands', 'South Carolina', 154.0, 90.0, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 14, `uuid` = '88def875-2738-5fe3-bd56-e26657155c7b', `name` = 'Jalon Prosacco II', `location_geoid` = 'fake_0', `address` = '27746 Prohaska Village', `city` = 'Gibsonbury', `state` = 'West Virginia', `zip_code` = '43854', `country` = 'United States Minor Outlying Islands', `region` = 'South Carolina', `lat` = 154.0, `lng` = 90.0, `created_at` = '2016-08-30 22:23:11', `updated_at` = '2016-08-30 22:23:11', `id` = 14, `prefix` = '88def875-2738-5fe3-bd56-e26657155c7b' WHERE `sites`.`id` = 14[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 14 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 81 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jalon Prosacco II Admin', 'admin', 14, 14, '88def875-2738-5fe3-bd56-e26657155c7b', 81, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 81
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":\"site:read\"},{\"resource\":\"device?site=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=14\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=14\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 82 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jalon Prosacco II Reader', 'reader', 14, 14, '88def875-2738-5fe3-bd56-e26657155c7b', 82, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 82
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=14\",\"action\":\"*\"},{\"resource\":\"encounter?site=14\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 83 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jalon Prosacco II Technician', 'technician', 14, 14, '88def875-2738-5fe3-bd56-e26657155c7b', 83, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 83
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=14\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=14\",\"action\":\"*\"},{\"resource\":\"encounter?site=14\",\"action\":\"*\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 84 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jalon Prosacco II Supervisor', 'supervisor', 14, 14, '88def875-2738-5fe3-bd56-e26657155c7b', 84, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 84
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 14 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 14  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'juana@lakinkihn.com' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('juana@lakinkihn.com', '$2a$04$1maCkGsb.W5iRdWCd65PQudlwNHbo4HBMpkf0Tj79SptyNtiAzlNm', 'Monte', 'Walsh', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('2f9627e9-bcfc-cee4-8799-b1e98f0f60d2', 15, 'Mr. Herman Wiza', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 85 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Herman Wiza Admin', 'admin', 15, 85, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 85[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=15\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=15\",\"action\":\"site:read\"},{\"resource\":\"device?institution=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=15\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=15\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 86 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Herman Wiza Reader', 'reader', 15, 86, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 86[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '15', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 15, 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 15, 15, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 15, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 15, 15, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 15  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 15[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '297e227d41b6db7646b91a199b696849a38f62efc548e1dfc5e06aebf767434c' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-29' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('aeb2a89c-c10e-a8c1-b772-bfdfa79e6fd2', 'Rafael MacGyver', 15, 0, '297e227d41b6db7646b91a199b696849a38f62efc548e1dfc5e06aebf767434c', 'patient-29', x'd33ba77e506e6748df8c669db6d0e46ed2cc87238e9fa7a1ab7c8ed89332d3c6e8a4a04f4a9414b9762d488388d0ed7d010378359cb1b57ac5c68860', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 15 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 15 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 15  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (15, 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', 'Carli Williamson', 'fake_0', '628 Mckenna Locks', 'Lake Kylieshire', 'Indiana', '78912-2432', 'Puerto Rico', 'Virginia', 155.0, 21.0, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 15, `uuid` = 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', `name` = 'Carli Williamson', `location_geoid` = 'fake_0', `address` = '628 Mckenna Locks', `city` = 'Lake Kylieshire', `state` = 'Indiana', `zip_code` = '78912-2432', `country` = 'Puerto Rico', `region` = 'Virginia', `lat` = 155.0, `lng` = 21.0, `created_at` = '2016-08-30 22:23:11', `updated_at` = '2016-08-30 22:23:11', `id` = 15, `prefix` = 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4' WHERE `sites`.`id` = 15
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 15 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 87 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Admin', 'admin', 15, 15, 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', 87, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 87[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":\"site:read\"},{\"resource\":\"device?site=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=15\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=15\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 88 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Reader', 'reader', 15, 15, 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', 88, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 88[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=15\",\"action\":\"*\"},{\"resource\":\"encounter?site=15\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 89 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Technician', 'technician', 15, 15, 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', 89, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 89[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=15\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=15\",\"action\":\"*\"},{\"resource\":\"encounter?site=15\",\"action\":\"*\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 90 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Supervisor', 'supervisor', 15, 15, 'f54a271c-fa4c-13a8-df19-bd1ba37f15e4', 90, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 90[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 15 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 15  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'omer_schmitt@hammeskautzer.net' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('omer_schmitt@hammeskautzer.net', '$2a$04$pVWJHNhD2K6GpaynSXUkjutXepfFiX29xx0au3lMGOu3QLOyTEbFO', 'Leopoldo', 'Treutel', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('389f6137-90b4-c224-2bc4-0d889db12bb7', 16, 'Kailey Haley', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 91 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Kailey Haley Admin', 'admin', 16, 91, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 91
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=16\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=16\",\"action\":\"site:read\"},{\"resource\":\"device?institution=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=16\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=16\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 92 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Kailey Haley Reader', 'reader', 16, 92, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 92
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '16', 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 16, 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 16, 16, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 16, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 16, 16, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 16  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 16
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '377f9684630bf122c941d54e8ca83018f5491d402b464cd62eb0ca3408c6d096' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-31' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('65140811-a796-7484-9c05-f9b5116841c3', 'Bettye Borer', 16, 0, '377f9684630bf122c941d54e8ca83018f5491d402b464cd62eb0ca3408c6d096', 'patient-31', x'd33ba77e506e6748df8c669db6d0e46fdacc87238e9fa7a1ab7c8ec89720c6dae1a4af415bb61fed6ef1014ca2ad5e5c105a785cf25dcf200e', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 16 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 16  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (16, '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', 'Odell Cruickshank', 'fake_0', '11274 Murray Extension', 'East Theresiaport', 'Illinois', '96035-7716', 'Moldova', 'Michigan', 154.0, -8.0, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 16, `uuid` = '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', `name` = 'Odell Cruickshank', `location_geoid` = 'fake_0', `address` = '11274 Murray Extension', `city` = 'East Theresiaport', `state` = 'Illinois', `zip_code` = '96035-7716', `country` = 'Moldova', `region` = 'Michigan', `lat` = 154.0, `lng` = -8.0, `created_at` = '2016-08-30 22:23:11', `updated_at` = '2016-08-30 22:23:11', `id` = 16, `prefix` = '60221c3b-b4ac-17ad-241c-85f1ff13ffc0' WHERE `sites`.`id` = 16[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 16 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 93 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Odell Cruickshank Admin', 'admin', 16, 16, '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', 93, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 93
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":\"site:read\"},{\"resource\":\"device?site=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=16\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=16\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 94 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Odell Cruickshank Reader', 'reader', 16, 16, '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', 94, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 94
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=16\",\"action\":\"*\"},{\"resource\":\"encounter?site=16\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 95 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Odell Cruickshank Technician', 'technician', 16, 16, '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', 95, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 95
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=16\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=16\",\"action\":\"*\"},{\"resource\":\"encounter?site=16\",\"action\":\"*\"}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 96 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Odell Cruickshank Supervisor', 'supervisor', 16, 16, '60221c3b-b4ac-17ad-241c-85f1ff13ffc0', 96, '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 96
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 16 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 16  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (8.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'reece@sawayn.net' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('reece@sawayn.net', '$2a$04$2NQRnPRTBwO59BM3lO1nFuG9.j8la3/0/Aazw8WK001.xwoi33krq', 'Samson', 'Skiles', '2016-08-29 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('2c21780f-0d5a-b0ce-94e1-c00244f7810f', 17, 'Miss Finn Baumbach', '2016-08-30 22:23:11', '2016-08-30 22:23:11')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 97 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Finn Baumbach Admin', 'admin', 17, 97, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 97[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=17\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=17\",\"action\":\"site:read\"},{\"resource\":\"device?institution=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=17\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=17\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 98 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Finn Baumbach Reader', 'reader', 17, 98, '2016-08-30 22:23:11', '2016-08-30 22:23:11')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 98[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 17, 17, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 17  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 17[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '811058057706ec26f87ac7319f0ff17aa626a10c664d7313b0a8929c787411fd' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-33' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('950ca9ed-40cd-5009-04c4-406b14978dce', 'Zoie Jacobson', 17, 0, '811058057706ec26f87ac7319f0ff17aa626a10c664d7313b0a8929c787411fd', 'patient-33', x'd33ba77e506e6748df8c669db6d0e46fd8cc87238e9fa7a1ab7c8ed09d3dd783cee58e414ba002a13122d0bc16b8cd7647681f6b51713780d0dd', '2016-08-30 22:23:12', '2016-08-30 22:23:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.2ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 17 LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 17 LIMIT 1[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 17  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (17, '47065a83-94ab-ee20-42a5-4b805a86ea22', 'Effie Luettgen', 'fake_0', '4320 Boyle Hill', 'East Fatimaland', 'New Jersey', '98500', 'New Zealand', 'Arkansas', 97.0, 44.0, '2016-08-30 22:23:12', '2016-08-30 22:23:12')[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `sites` SET `institution_id` = 17, `uuid` = '47065a83-94ab-ee20-42a5-4b805a86ea22', `name` = 'Effie Luettgen', `location_geoid` = 'fake_0', `address` = '4320 Boyle Hill', `city` = 'East Fatimaland', `state` = 'New Jersey', `zip_code` = '98500', `country` = 'New Zealand', `region` = 'Arkansas', `lat` = 97.0, `lng` = 44.0, `created_at` = '2016-08-30 22:23:12', `updated_at` = '2016-08-30 22:23:12', `id` = 17, `prefix` = '47065a83-94ab-ee20-42a5-4b805a86ea22' WHERE `sites`.`id` = 17
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 17 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 99 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Admin', 'admin', 17, 17, '47065a83-94ab-ee20-42a5-4b805a86ea22', 99, '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 99[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":\"site:read\"},{\"resource\":\"device?site=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=17\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 100 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Reader', 'reader', 17, 17, '47065a83-94ab-ee20-42a5-4b805a86ea22', 100, '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 100[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=17\",\"action\":\"*\"},{\"resource\":\"encounter?site=17\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 101 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Technician', 'technician', 17, 17, '47065a83-94ab-ee20-42a5-4b805a86ea22', 101, '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 101[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=17\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=17\",\"action\":\"*\"},{\"resource\":\"encounter?site=17\",\"action\":\"*\"}]}', '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 102 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Supervisor', 'supervisor', 17, 17, '47065a83-94ab-ee20-42a5-4b805a86ea22', 102, '2016-08-30 22:23:12', '2016-08-30 22:23:12')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 102[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 17 LIMIT 1[0m
  [1m[35mSite Load (0.9ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 17  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.7ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (8.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.1ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (5.8ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (3.4ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (4.8ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (5.3ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.6ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.2ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (5.0ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (4.4ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.5ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (4.7ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (6.1ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (2.4ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (2.3ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.0ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (5.1ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (6.6ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (3.8ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (5.9ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$l1eh5xJKmgCCiVkoEs.31uyZL5oEP6XeSorOYf5KBv5lhQWQ54l7a', 'Rowan', 'Hamill', '2016-08-29 22:24:35', '2016-08-30 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('7cb25f24-b86c-a6a9-1bc5-40b9a4c6386a', 1, 'Aric Smith', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 1, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 1, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 1, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 1, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 1, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 1  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'cb1ac7aefbcbd74882a4d5f4f99da0a63ae94801d8dd27b0a9bb149fe6b6f274' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-1' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('b4b01f34-bc7d-30c1-4d8c-b958f0e450b1', 'Ryann Johnson', 1, 0, 'cb1ac7aefbcbd74882a4d5f4f99da0a63ae94801d8dd27b0a9bb149fe6b6f274', 'patient-1', x'd33ba77e506e6748df8c669db6d0e46dc9c2896f8193afe6b364fef3933adc83ceeb85405abc03ed6e37879eae07503248555c08b6004a5107', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.2ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 1 LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 1  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (1, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 'Mrs. Terry Goyette', 'fake_0', '64366 Hackett Parkways', 'Jeramieton', 'Maryland', '11538-4152', 'Romania', 'Mississippi', -146.0, 57.0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `sites` SET `institution_id` = 1, `uuid` = 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', `name` = 'Mrs. Terry Goyette', `location_geoid` = 'fake_0', `address` = '64366 Hackett Parkways', `city` = 'Jeramieton', `state` = 'Maryland', `zip_code` = '11538-4152', `country` = 'Romania', `region` = 'Mississippi', `lat` = -146.0, `lng` = 57.0, `created_at` = '2016-08-30 22:24:36', `updated_at` = '2016-08-30 22:24:36', `id` = 1, `prefix` = 'ee3f59ca-22a3-8d9d-def2-9648a8686a46' WHERE `sites`.`id` = 1
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 1 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=1\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Admin', 'admin', 1, 1, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 3, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":\"site:read\"},{\"resource\":\"device?site=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=1\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Reader', 'reader', 1, 1, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 4, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=1\",\"action\":\"*\"},{\"resource\":\"encounter?site=1\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Technician', 'technician', 1, 1, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 5, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":\"institution:read\"},{\"resource\":\"site/1\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=1\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=1\",\"action\":\"*\"},{\"resource\":\"encounter?site=1\",\"action\":\"*\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 6 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Terry Goyette Supervisor', 'supervisor', 1, 1, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 6, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.2ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 1 LIMIT 1[0m
  [1m[35mSite Load (0.4ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 1  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('0ea6a83c-596d-2516-aecd-89d9f764d27a', 1, 1, 1, 1, 1, '---\nid: encounter-2\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'ee3f59ca-22a3-8d9d-def2-9648a8686a46', 'encounter-2', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.3ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$Ovrq/XDf2XCwseLnaM51jeFJtcBfnuESjlziWTIUHDw3MOOqNyN2m', 'Dariana', 'Wiegand', '2016-08-29 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b5cc791e-7c90-e15f-fcf3-8e8c5416d129', 2, 'Mr. Alphonso Witting', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 2, 7, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 2, 8, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 2, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 2, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '9741499aaa805af73c51ad75dd3b809411e2f6fcce5882657320b378cdb49435' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-3' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 2) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('0acbb5f5-f77c-531c-da63-9694401a8cf7', 'Curt Heller DDS', 2, 0, '9741499aaa805af73c51ad75dd3b809411e2f6fcce5882657320b378cdb49435', 'patient-3', x'd33ba77e506e6748df8c669db6d0e46fc9c2896f8193afe6b364efff802092ebe1e8814b5bf3298b407d170d90aaf10f7bd34627e82a5d79993930', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 2 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 2  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (2, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 'Ross Senger', 'fake_0', '84793 Mikel Meadows', 'Croninshire', 'Iowa', '39024', 'Brazil', 'California', 73.0, 76.0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 2, `uuid` = '042a44d5-ec42-b807-fbd9-8a121df18ec0', `name` = 'Ross Senger', `location_geoid` = 'fake_0', `address` = '84793 Mikel Meadows', `city` = 'Croninshire', `state` = 'Iowa', `zip_code` = '39024', `country` = 'Brazil', `region` = 'California', `lat` = 73.0, `lng` = 76.0, `created_at` = '2016-08-30 22:24:36', `updated_at` = '2016-08-30 22:24:36', `id` = 2, `prefix` = '042a44d5-ec42-b807-fbd9-8a121df18ec0' WHERE `sites`.`id` = 2[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 2 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=2\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 9 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Admin', 'admin', 2, 2, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 9, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":\"site:read\"},{\"resource\":\"device?site=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=2\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Reader', 'reader', 2, 2, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 10, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=2\",\"action\":\"*\"},{\"resource\":\"encounter?site=2\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Technician', 'technician', 2, 2, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 11, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 11
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":\"institution:read\"},{\"resource\":\"site/2\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=2\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=2\",\"action\":\"*\"},{\"resource\":\"encounter?site=2\",\"action\":\"*\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 12 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ross Senger Supervisor', 'supervisor', 2, 2, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 12, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 12
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 2 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 2  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('8f01c808-98fa-00de-5e06-78657d947785', 2, 2, 2, 2, 2, '---\nid: encounter-4\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '042a44d5-ec42-b807-fbd9-8a121df18ec0', 'encounter-4', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM `patient_results` WHERE `patient_results`.`deleted_at` IS NULL AND `patient_results`.`type` IN ('TestResult') AND `patient_results`.`encounter_id` = 2[0m
  [1m[35m (11.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$Q7uG6T65O0FgXKjEyZ7.TeR.CdsCuTJv0Vn/HBmN7S4s8zQxEq6mm', 'Elza', 'Block', '2016-08-29 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('d404c4ae-c3a4-4c72-856d-4550debe966e', 3, 'Greg McCullough IV', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 3, 13, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 13
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 3, 14, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 14
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3[0m
  [1m[35m (0.0ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3[0m
  [1m[35mComputedPolicy Load (0.0ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 3, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 3, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 3, 1)
  [1m[36mSubscriber Load (0.0ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 3  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.0ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 3
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'bb852bc433704eacd3113a8329dd905ced94c194c8e96de9b74d00fd67a78bc5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-5' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 3) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('f2bcf2d7-b92e-6d7a-51a4-a2bd970f53f7', 'Adolfo Halvorson', 3, 0, 'bb852bc433704eacd3113a8329dd905ced94c194c8e96de9b74d00fd67a78bc5', 'patient-5', x'd33ba77e506e6748df8c669db6d0e469c9c2896f8193afe6b364edee9d38d4cca4cc8c425fbc1fbc7c3148830b97b6a1b399d8cde54d385f3536cdce', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 3 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 3  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (3, '7883f343-3f65-b736-e152-610c43fd606e', 'Rod Skiles', 'fake_0', '168 Schuster Pass', 'Lake Danny', 'Massachusetts', '21383', 'Congo', 'Maryland', -44.0, 27.0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE `sites` SET `institution_id` = 3, `uuid` = '7883f343-3f65-b736-e152-610c43fd606e', `name` = 'Rod Skiles', `location_geoid` = 'fake_0', `address` = '168 Schuster Pass', `city` = 'Lake Danny', `state` = 'Massachusetts', `zip_code` = '21383', `country` = 'Congo', `region` = 'Maryland', `lat` = -44.0, `lng` = 27.0, `created_at` = '2016-08-30 22:24:36', `updated_at` = '2016-08-30 22:24:36', `id` = 3, `prefix` = '7883f343-3f65-b736-e152-610c43fd606e' WHERE `sites`.`id` = 3[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 3 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=3\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 15 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Admin', 'admin', 3, 3, '7883f343-3f65-b736-e152-610c43fd606e', 15, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 15
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":\"site:read\"},{\"resource\":\"device?site=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=3\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 16 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Reader', 'reader', 3, 3, '7883f343-3f65-b736-e152-610c43fd606e', 16, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 16
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=3\",\"action\":\"*\"},{\"resource\":\"encounter?site=3\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 17 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Technician', 'technician', 3, 3, '7883f343-3f65-b736-e152-610c43fd606e', 17, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 17
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":\"institution:read\"},{\"resource\":\"site/3\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=3\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=3\",\"action\":\"*\"},{\"resource\":\"encounter?site=3\",\"action\":\"*\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 18 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Rod Skiles Supervisor', 'supervisor', 3, 3, '7883f343-3f65-b736-e152-610c43fd606e', 18, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 18
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 3 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 3  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('59bca48f-5e58-2bd5-4833-9a2bf8b00bbb', 3, 3, 3, 3, 3, '---\nid: encounter-6\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '7883f343-3f65-b736-e152-610c43fd606e', 'encounter-6', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 3 LIMIT 1
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 3 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Scot Kling' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Scot Kling', '2016-08-29 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (13.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$gwZJC3BiwNrNOnfov/uMu.CyAs8kh17CCVRXoI6PF7.9o9gX3TcEa', 'Tomas', 'Hegmann', '2016-08-29 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('aff01163-4654-8252-16c1-045570ac910d', 4, 'Demarcus Roberts V', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 19 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Admin', 'admin', 4, 19, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 19[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 20 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Demarcus Roberts V Reader', 'reader', 4, 20, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 20[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 4, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 4, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 4, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 4  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 4[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '5eb7c66585c44dff748fa06000ba6aec4130229be27e9d04b3d81a72a78623ae' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-7' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 4) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('320cd214-4573-3acd-7b62-aa6acb8adfce', 'Bennett Little III', 4, 0, '5eb7c66585c44dff748fa06000ba6aec4130229be27e9d04b3d81a72a78623ae', 'patient-7', x'd33ba77e506e6748df8c669db6d0e46bc9c2896f8193afe6b364eeef9c3ad7d7f0a4a1475da701aa331623b7a98ed0ee9eea0708c8480f3ff678954a67d0', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 4 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 4  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (4, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 'Marge Simonis', 'fake_0', '6900 Charley River', 'Samaraview', 'South Carolina', '22611-2143', 'Turkey', 'Florida', 23.0, -25.0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 4, `uuid` = 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', `name` = 'Marge Simonis', `location_geoid` = 'fake_0', `address` = '6900 Charley River', `city` = 'Samaraview', `state` = 'South Carolina', `zip_code` = '22611-2143', `country` = 'Turkey', `region` = 'Florida', `lat` = 23.0, `lng` = -25.0, `created_at` = '2016-08-30 22:24:36', `updated_at` = '2016-08-30 22:24:36', `id` = 4, `prefix` = 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86' WHERE `sites`.`id` = 4
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 4 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=4\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 21 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Admin', 'admin', 4, 4, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 21, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 21[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":\"site:read\"},{\"resource\":\"device?site=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=4\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 22 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Reader', 'reader', 4, 4, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 22, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 22[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=4\",\"action\":\"*\"},{\"resource\":\"encounter?site=4\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 23 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Technician', 'technician', 4, 4, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 23, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 23[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":\"institution:read\"},{\"resource\":\"site/4\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=4\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=4\",\"action\":\"*\"},{\"resource\":\"encounter?site=4\",\"action\":\"*\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 24 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marge Simonis Supervisor', 'supervisor', 4, 4, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 24, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 24[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 4 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 4  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('86a1ddf1-fc3f-9e25-dd96-b05f98bb8928', 4, 4, 4, 4, 4, '---\nid: encounter-8\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'c3ea51e4-6e6c-8e09-babf-20bd9bab0e86', 'encounter-8', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 4 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 4 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 4 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (4, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('39fe8e1f-c016-3183-07e4-353a51388b59', 4, '1001', 1, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 1 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 4 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 4 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 4 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 4 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 1) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (4, 4, 4, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 4 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 1) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 2, `updated_at` = '2016-08-30 22:24:36' WHERE `sample_identifiers`.`id` = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Dr. Nestor Lynch' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Dr. Nestor Lynch', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 2 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$rr9K7xQJVNre4VefU85CLuTkJJa6mnvvZIMhbDMJn8lD/SRSZFdyy', 'Rory', 'Crooks', '2016-08-29 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('d1fd15ae-70a0-b265-f25f-e6adc9ae258e', 5, 'Miss Bud Gaylord', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 25 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Admin', 'admin', 5, 25, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 25[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 26 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Bud Gaylord Reader', 'reader', 5, 26, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 26[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 5, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 5, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'e58d0777a2223615ef179d0b0040e9bda79a4f937bf41d43cddde4d32a907fe8' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-9' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 5) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('3c08f01f-4c36-45e8-8b49-b8285330fae6', 'Kris Heathcote', 5, 0, 'e58d0777a2223615ef179d0b0040e9bda79a4f937bf41d43cddde4d32a907fe8', 'patient-9', x'd33ba77e506e6748df8c669db6d0e465c9c2896f8193afe6b364e7f89b2792ebe1e599464abc19aa3122625f5df09e178060490da3694a2c3858', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 5 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 5  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (5, '18939257-47ae-9fd3-fcda-c39d150c2659', 'Miss Jensen Steuber', 'fake_0', '995 Monahan Well', 'East Tadview', 'Tennessee', '72676', 'Cambodia', 'Iowa', 148.0, -50.0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 5, `uuid` = '18939257-47ae-9fd3-fcda-c39d150c2659', `name` = 'Miss Jensen Steuber', `location_geoid` = 'fake_0', `address` = '995 Monahan Well', `city` = 'East Tadview', `state` = 'Tennessee', `zip_code` = '72676', `country` = 'Cambodia', `region` = 'Iowa', `lat` = 148.0, `lng` = -50.0, `created_at` = '2016-08-30 22:24:36', `updated_at` = '2016-08-30 22:24:36', `id` = 5, `prefix` = '18939257-47ae-9fd3-fcda-c39d150c2659' WHERE `sites`.`id` = 5
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 5 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=5\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 27 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Admin', 'admin', 5, 5, '18939257-47ae-9fd3-fcda-c39d150c2659', 27, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 27[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":\"site:read\"},{\"resource\":\"device?site=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=5\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 28 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Reader', 'reader', 5, 5, '18939257-47ae-9fd3-fcda-c39d150c2659', 28, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 28[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=5\",\"action\":\"*\"},{\"resource\":\"encounter?site=5\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 29 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Technician', 'technician', 5, 5, '18939257-47ae-9fd3-fcda-c39d150c2659', 29, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 29[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":\"institution:read\"},{\"resource\":\"site/5\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=5\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=5\",\"action\":\"*\"},{\"resource\":\"encounter?site=5\",\"action\":\"*\"}]}', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 30 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Miss Jensen Steuber Supervisor', 'supervisor', 5, 5, '18939257-47ae-9fd3-fcda-c39d150c2659', 30, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 30[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 5 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 5  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('48e8546c-f99c-428e-f58e-af4fb986a4cb', 5, 5, 5, 5, 5, '---\nid: encounter-10\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '18939257-47ae-9fd3-fcda-c39d150c2659', 'encounter-10', '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 5 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 5 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 5 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (5, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('6ad738ef-15b8-65d2-0f78-4a9d6047e480', 5, '1001', 3, '2016-08-30 22:24:36', '2016-08-30 22:24:36')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 2 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 5 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 5 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 5 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 5 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 2) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (5, 5, 5, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:36', '2016-08-30 22:24:36')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 5 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 2) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 4, `updated_at` = '2016-08-30 22:24:36' WHERE `sample_identifiers`.`id` = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 4 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Mrs. Kailey Bednar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Mrs. Kailey Bednar', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hilbert_klocko@gaylord.co' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hilbert_klocko@gaylord.co', '$2a$04$7UNodEWwyTxXf5enD82H.On32/e996aFa.jB8ot4lejdrXaTLJSW6', 'Ludie', 'Casper', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c8de09d8-8696-1309-9818-6823d0822751', 6, 'Izabella Fay', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 31 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Admin', 'admin', 6, 31, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 31[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=6\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=6\",\"action\":\"site:read\"},{\"resource\":\"device?institution=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=6\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=6\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=6\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=6\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=6\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 32 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Izabella Fay Reader', 'reader', 6, 32, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 32[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '6', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '6', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '6', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '6', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '6', 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '6', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 6, 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 6, 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 6, 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 6, 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 6, 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 6, 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 6, 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 6, 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 6, 6, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 6, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 6, 6, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 6  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 6[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'adc302cc323b428fe1086a7852208f986c76ddfc6712a7b23fbaaa33e7c8826e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-11' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 6) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('9a094809-0629-b809-54e7-cf144a1366f1', 'Mrs. Isai Gleason', 6, 0, 'adc302cc323b428fe1086a7852208f986c76ddfc6712a7b23fbaaa33e7c8826e', 'patient-11', x'd33ba77e506e6748df8c669db6d0e46ddacc87238e9fa7a1ab7c8ec780279c83cdf78c47099401aa722c0590a98e8c8704e97b0064cd25dc20ba9bd34a47', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 6 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 6 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 6  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (6, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 'Ida Wyman', 'fake_0', '4860 Larry Via', 'East Jonatan', 'Massachusetts', '46922-3672', 'Nicaragua', 'Kansas', 3.0, 50.0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 6, `uuid` = 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', `name` = 'Ida Wyman', `location_geoid` = 'fake_0', `address` = '4860 Larry Via', `city` = 'East Jonatan', `state` = 'Massachusetts', `zip_code` = '46922-3672', `country` = 'Nicaragua', `region` = 'Kansas', `lat` = 3.0, `lng` = 50.0, `created_at` = '2016-08-30 22:24:37', `updated_at` = '2016-08-30 22:24:37', `id` = 6, `prefix` = 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac' WHERE `sites`.`id` = 6
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 6 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=6\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 33 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Admin', 'admin', 6, 6, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 33, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 33[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":\"site:read\"},{\"resource\":\"device?site=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=6\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=6\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 34 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Reader', 'reader', 6, 6, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 34, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 34[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=6\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=6\",\"action\":\"*\"},{\"resource\":\"encounter?site=6\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 35 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Technician', 'technician', 6, 6, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 35, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 35[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/6\",\"action\":\"institution:read\"},{\"resource\":\"site/6\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=6\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=6\",\"action\":\"*\"},{\"resource\":\"encounter?site=6\",\"action\":\"*\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 36 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Ida Wyman Supervisor', 'supervisor', 6, 6, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 36, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 36[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 6 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 6  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('004ccd74-74f3-b238-7f56-e46c34a8cb95', 6, 6, 6, 6, 6, '---\nid: encounter-12\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'cec83c3a-6a02-c083-264e-ea2b1e8a19ac', 'encounter-12', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 6 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 6 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 6 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (6, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('9ea343fc-dcf0-27bd-1b8b-b7a5800b7030', 6, '1001', 5, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 3 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 6 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 6 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 6 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 6 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 6 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 3) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (6, 6, 6, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 6 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 3) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 6, `updated_at` = '2016-08-30 22:24:37' WHERE `sample_identifiers`.`id` = 3
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 6 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Jerry Shanahan' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Jerry Shanahan', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 4 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (10.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'jensen_steuber@mclaughlin.name' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('jensen_steuber@mclaughlin.name', '$2a$04$W7KOK5JnAUjqp85BzuR.QuUeXFoc3FWfCHKFP4O8aJKYcJwyS8OUm', 'Elliot', 'Simonis', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('ea8e5fd7-fca2-a524-447b-3aec4818de24', 7, 'Karli Beahan', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 37 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Karli Beahan Admin', 'admin', 7, 37, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 37[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=7\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=7\",\"action\":\"site:read\"},{\"resource\":\"device?institution=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=7\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=7\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=7\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=7\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=7\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 38 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Karli Beahan Reader', 'reader', 7, 38, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 38[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '7', 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '7', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 7, 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 7, 7, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 7, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 7, 7, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 7  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 7[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '6b120d556f79a375d410153583664610f652402d7926ae1796971dd84f690c2e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-13' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 7) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('0fc18cf5-6d3b-92f3-fbb1-10b67252ab2b', 'Axel Ritchie', 7, 0, '6b120d556f79a375d410153583664610f652402d7926ae1796971dd84f690c2e', 'patient-13', x'd33ba77e506e6748df8c669db6d0e46dd8cc87238e9fa7a1ab7c8ecb8a31de83d6ed994d41ba08ed6e9699fb4361dd6703f9e6e677084cc1ca', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 7 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 7  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (7, '569365ac-5131-156d-9dc9-a2e48543d35d', 'Geovanni McKenzie III', 'fake_0', '8682 Janice Plains', 'Swaniawskiborough', 'Illinois', '93227', 'Swaziland', 'Oklahoma', 6.0, 30.0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 7, `uuid` = '569365ac-5131-156d-9dc9-a2e48543d35d', `name` = 'Geovanni McKenzie III', `location_geoid` = 'fake_0', `address` = '8682 Janice Plains', `city` = 'Swaniawskiborough', `state` = 'Illinois', `zip_code` = '93227', `country` = 'Swaziland', `region` = 'Oklahoma', `lat` = 6.0, `lng` = 30.0, `created_at` = '2016-08-30 22:24:37', `updated_at` = '2016-08-30 22:24:37', `id` = 7, `prefix` = '569365ac-5131-156d-9dc9-a2e48543d35d' WHERE `sites`.`id` = 7
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 7 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=7\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 39 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Admin', 'admin', 7, 7, '569365ac-5131-156d-9dc9-a2e48543d35d', 39, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 39[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":\"site:read\"},{\"resource\":\"device?site=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=7\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=7\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 40 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Reader', 'reader', 7, 7, '569365ac-5131-156d-9dc9-a2e48543d35d', 40, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 40[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=7\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=7\",\"action\":\"*\"},{\"resource\":\"encounter?site=7\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 41 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Technician', 'technician', 7, 7, '569365ac-5131-156d-9dc9-a2e48543d35d', 41, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 41[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/7\",\"action\":\"institution:read\"},{\"resource\":\"site/7\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=7\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=7\",\"action\":\"*\"},{\"resource\":\"encounter?site=7\",\"action\":\"*\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 42 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Geovanni McKenzie III Supervisor', 'supervisor', 7, 7, '569365ac-5131-156d-9dc9-a2e48543d35d', 42, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 42[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 7 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 7  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('cb161c1b-4dc6-2324-8b3d-f33ed99c98be', 7, 7, 7, 7, 7, '---\nid: encounter-14\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '569365ac-5131-156d-9dc9-a2e48543d35d', 'encounter-14', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 7 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 7 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 7 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (7, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('0ca08b38-1359-be2f-f9ce-d5a3bf3a0b31', 7, '1001', 7, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 4 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 7 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 7 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 7 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 7 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 7 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 4) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (7, 7, 7, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 7 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '1001' AND (`sample_identifiers`.`id` != 4) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 8, `updated_at` = '2016-08-30 22:24:37' WHERE `sample_identifiers`.`id` = 4
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Crystal Mohr' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Crystal Mohr', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 5 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (1.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'leslie_quitzon@wymanbartoletti.com' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('leslie_quitzon@wymanbartoletti.com', '$2a$04$tc8zo5c3JmUXKG2wFi9zCucGy3564nJaokH14AVutLB/PJnYKaZgy', 'Brooks', 'Brekke', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('05f75555-5da8-1a36-7977-8d1b4526df16', 8, 'Keaton Labadie', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 43 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Keaton Labadie Admin', 'admin', 8, 43, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 43[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=8\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=8\",\"action\":\"site:read\"},{\"resource\":\"device?institution=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=8\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=8\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=8\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=8\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=8\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 44 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Keaton Labadie Reader', 'reader', 8, 44, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 44[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '8', 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '8', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 8, 8, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 8, 8, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2bfffa5117806086af02d39518b7300eb7f9a00b62f3b47170a7796b691d3e3e' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-15' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 8) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('08b19fc5-7cb6-6aaa-2716-eca4cc37d708', 'Dalton Huel', 8, 0, '2bfffa5117806086af02d39518b7300eb7f9a00b62f3b47170a7796b691d3e3e', 'patient-15', x'd33ba77e506e6748df8c669db6d0e46ddecc87238e9fa7a1ab7c8ece9338c6cceaa4a55b4cbf4fb26320b1552223adf4677ff453e87d020a', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 8 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 8  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (8, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 'Armando Rice DVM', 'fake_0', '1499 Cheyanne Point', 'Tevinfort', 'Maine', '83161-7590', 'United States of America', 'Pennsylvania', -151.0, 54.0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 8, `uuid` = '5dae6289-0562-58eb-9031-f4b054f6f6fb', `name` = 'Armando Rice DVM', `location_geoid` = 'fake_0', `address` = '1499 Cheyanne Point', `city` = 'Tevinfort', `state` = 'Maine', `zip_code` = '83161-7590', `country` = 'United States of America', `region` = 'Pennsylvania', `lat` = -151.0, `lng` = 54.0, `created_at` = '2016-08-30 22:24:37', `updated_at` = '2016-08-30 22:24:37', `id` = 8, `prefix` = '5dae6289-0562-58eb-9031-f4b054f6f6fb' WHERE `sites`.`id` = 8
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 8 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=8\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 45 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Admin', 'admin', 8, 8, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 45, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 45[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":\"site:read\"},{\"resource\":\"device?site=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=8\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=8\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 46 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Reader', 'reader', 8, 8, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 46, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 46[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=8\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=8\",\"action\":\"*\"},{\"resource\":\"encounter?site=8\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 47 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Technician', 'technician', 8, 8, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 47, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 47[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/8\",\"action\":\"institution:read\"},{\"resource\":\"site/8\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=8\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=8\",\"action\":\"*\"},{\"resource\":\"encounter?site=8\",\"action\":\"*\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 48 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Armando Rice DVM Supervisor', 'supervisor', 8, 8, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 48, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 48[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 8 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 8  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('f7c4649a-697f-815d-67d8-05de4221426d', 8, 8, 8, 8, 8, '---\nid: encounter-16\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '5dae6289-0562-58eb-9031-f4b054f6f6fb', 'encounter-16', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 8 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 8 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 8 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (8, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('8fb16d76-1a93-cf36-1b5c-f154c238e573', 8, '999', 9, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 5 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 8 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 8 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 8 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 8 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 5) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (8, 8, 8, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 8 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 5) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 10, `updated_at` = '2016-08-30 22:24:37' WHERE `sample_identifiers`.`id` = 5
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Jalon Prosacco II' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Jalon Prosacco II', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 6 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'addison.ryan@hand.biz' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('addison.ryan@hand.biz', '$2a$04$bfw3Mav2BSMgmDGH.JEteuNZ8Ru08nzSgzjIGfEl.2qGWHl6Gc4Tu', 'Gregg', 'Terry', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('b83f7898-1ad0-9604-cebc-f79af3f2ddb5', 9, 'Mr. Herman Wiza', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 49 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Herman Wiza Admin', 'admin', 9, 49, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 49[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=9\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=9\",\"action\":\"site:read\"},{\"resource\":\"device?institution=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=9\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=9\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=9\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=9\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=9\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 50 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Herman Wiza Reader', 'reader', 9, 50, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 50[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '9', 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '9', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 9, 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 9, 9, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 9, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 9, 9, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 9  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 9[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '398005303c7f19f5cc6c2f17729468b67fabd158cd92f16942c1552402d78cbb' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-17' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 9) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('4aaf0d26-93a0-e493-e2bd-2df0425b5fd3', 'Francesco Thiel', 9, 0, '398005303c7f19f5cc6c2f17729468b67fabd158cd92f16942c1552402d78cbb', 'patient-17', x'd33ba77e506e6748df8c669db6d0e46ddccc87238e9fa7a1ab7c8ecc8035dcc0e1f78e41098705a676334883cc6919359f10c802b8f4f386b1de8857', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 9 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 9  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (9, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 'Carli Williamson', 'fake_0', '44855 Scarlett Springs', 'Jonasbury', 'Arkansas', '52592', 'Guyana', 'Pennsylvania', -66.0, 57.0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 9, `uuid` = 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', `name` = 'Carli Williamson', `location_geoid` = 'fake_0', `address` = '44855 Scarlett Springs', `city` = 'Jonasbury', `state` = 'Arkansas', `zip_code` = '52592', `country` = 'Guyana', `region` = 'Pennsylvania', `lat` = -66.0, `lng` = 57.0, `created_at` = '2016-08-30 22:24:37', `updated_at` = '2016-08-30 22:24:37', `id` = 9, `prefix` = 'bc335746-3dc9-d2bf-a844-c4564b94f0ea' WHERE `sites`.`id` = 9
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 9 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=9\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 51 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Admin', 'admin', 9, 9, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 51, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 51[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":\"site:read\"},{\"resource\":\"device?site=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=9\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=9\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 52 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Reader', 'reader', 9, 9, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 52, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 52[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=9\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=9\",\"action\":\"*\"},{\"resource\":\"encounter?site=9\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 53 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Technician', 'technician', 9, 9, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 53, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 53[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/9\",\"action\":\"institution:read\"},{\"resource\":\"site/9\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=9\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=9\",\"action\":\"*\"},{\"resource\":\"encounter?site=9\",\"action\":\"*\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 54 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Carli Williamson Supervisor', 'supervisor', 9, 9, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 54, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 54[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 9 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 9  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('321da960-c2c3-bc39-f8dc-c6ef8a821185', 9, 9, 9, 9, 9, '---\nid: encounter-18\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'bc335746-3dc9-d2bf-a844-c4564b94f0ea', 'encounter-18', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 9 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 9 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 9 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (9, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('7421e377-ebb1-4351-274a-9d371480e6d7', 9, '999', 11, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 6 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 9 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 9 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 9 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 9 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 9 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 6) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (9, 9, 9, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 9 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 6) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 12, `updated_at` = '2016-08-30 22:24:37' WHERE `sample_identifiers`.`id` = 6
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 12 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Odell Cruickshank' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Odell Cruickshank', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 7 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (1.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'horace.schneider@olsondare.io' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('horace.schneider@olsondare.io', '$2a$04$oSwxwGF5TjIssf68U5qsYOhw7D/gm39DK2vy2HJX9Ld/37Mxc0hJq', 'Vernie', 'Collins', '2016-08-29 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('2d163465-7dde-3987-742f-c738b87b420a', 10, 'Miss Finn Baumbach', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 55 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Finn Baumbach Admin', 'admin', 10, 55, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 55[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=10\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=10\",\"action\":\"site:read\"},{\"resource\":\"device?institution=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=10\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=10\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=10\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=10\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=10\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 56 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Miss Finn Baumbach Reader', 'reader', 10, 56, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 56[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '10', 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '10', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 10, 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 10, 10, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 10, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 10, 10, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 10  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 10[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '7d47eed630677531609387a0d0e2bdca535369276915f4189e7baef624641cde' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-19' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 10) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('67142324-96ad-096a-7b41-999e923a3a1f', 'Sienna Nader', 10, 0, '7d47eed630677531609387a0d0e2bdca535369276915f4189e7baef624641cde', 'patient-19', x'd33ba77e506e6748df8c669db6d0e46dd2cc87238e9fa7a1ab7c8ed99b31dccde5a4a34f4db61fed6ecd1422f423fe7d80fcb9a368ae945045', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 10 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 10  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (10, '29e5a172-d97b-68c0-ebb6-309dad83107d', 'Effie Luettgen', 'fake_0', '3527 Jarrett Viaduct', 'New Kasandraview', 'Pennsylvania', '20792', 'Uruguay', 'Maine', 116.0, 18.0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 10, `uuid` = '29e5a172-d97b-68c0-ebb6-309dad83107d', `name` = 'Effie Luettgen', `location_geoid` = 'fake_0', `address` = '3527 Jarrett Viaduct', `city` = 'New Kasandraview', `state` = 'Pennsylvania', `zip_code` = '20792', `country` = 'Uruguay', `region` = 'Maine', `lat` = 116.0, `lng` = 18.0, `created_at` = '2016-08-30 22:24:37', `updated_at` = '2016-08-30 22:24:37', `id` = 10, `prefix` = '29e5a172-d97b-68c0-ebb6-309dad83107d' WHERE `sites`.`id` = 10
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 10 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=10\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 57 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Admin', 'admin', 10, 10, '29e5a172-d97b-68c0-ebb6-309dad83107d', 57, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 57[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":\"site:read\"},{\"resource\":\"device?site=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=10\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=10\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 58 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Reader', 'reader', 10, 10, '29e5a172-d97b-68c0-ebb6-309dad83107d', 58, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 58[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=10\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=10\",\"action\":\"*\"},{\"resource\":\"encounter?site=10\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 59 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Technician', 'technician', 10, 10, '29e5a172-d97b-68c0-ebb6-309dad83107d', 59, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 59[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/10\",\"action\":\"institution:read\"},{\"resource\":\"site/10\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=10\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=10\",\"action\":\"*\"},{\"resource\":\"encounter?site=10\",\"action\":\"*\"}]}', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 60 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Effie Luettgen Supervisor', 'supervisor', 10, 10, '29e5a172-d97b-68c0-ebb6-309dad83107d', 60, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 60[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 10 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 10  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('7456c629-d944-627a-7f6e-835c3b08b5df', 10, 10, 10, 10, 10, '---\nid: encounter-20\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '29e5a172-d97b-68c0-ebb6-309dad83107d', 'encounter-20', '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 10 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 10 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 10 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (10, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('8fa7fa4c-94af-1a20-b511-d1837fdfbbc4', 10, '999', 13, '2016-08-30 22:24:37', '2016-08-30 22:24:37')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 7 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 10 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 10 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 10 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 10 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 10 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 7) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (10, 10, 10, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:37', '2016-08-30 22:24:37')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 10 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 7) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 14, `updated_at` = '2016-08-30 22:24:37' WHERE `sample_identifiers`.`id` = 7
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 14 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Dr. Nettie Doyle' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Dr. Nettie Doyle', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hudson.tillman@willmslangworth.net' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hudson.tillman@willmslangworth.net', '$2a$04$KvPbagwgdMy7qOTAceZuP.1m2tIAIMwWVuf/H0AOUADyyWlIUtPym', 'Hailee', 'Fisher', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('5772e518-8589-8ffa-1107-cf7824d29fed', 11, 'Omer Schmitt', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 61 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Omer Schmitt Admin', 'admin', 11, 61, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 61[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=11\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=11\",\"action\":\"site:read\"},{\"resource\":\"device?institution=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=11\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=11\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=11\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=11\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=11\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 62 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Omer Schmitt Reader', 'reader', 11, 62, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 62[0m
  [1m[35mPolicy Load (0.0ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.0ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.0ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '11', 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '11', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 11, 11, 1)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 11, 11, 1)[0m
  [1m[35mSubscriber Load (0.0ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '46c7bea5c6a60693776d8c0f0b47e1ffda31301579fc72502766ed0610bb1e52' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1[0m
  [1m[35mPatient Exists (0.0ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-21' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 11) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('adb35ee3-4b1f-2d95-a2b9-6a0a6f04f2a7', 'Santa Mante', 11, 0, '46c7bea5c6a60693776d8c0f0b47e1ffda31301579fc72502766ed0610bb1e52', 'patient-21', x'd33ba77e506e6748df8c669db6d0e46edacc87238e9fa7a1ab7c8ed9933ac6c2a4c98c405db64fb22c2f6dfe4f0ef41440855049b11cd6cf', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.0ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 11 LIMIT 1[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 11  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (11, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 'Lucinda Schinner DDS', 'fake_0', '12202 Louvenia Fords', 'Welchstad', 'Iowa', '79704', 'Grenada', 'Colorado', -144.0, 39.0, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sites` SET `institution_id` = 11, `uuid` = '6170eff8-e568-ef9a-c91c-a3a7bb450738', `name` = 'Lucinda Schinner DDS', `location_geoid` = 'fake_0', `address` = '12202 Louvenia Fords', `city` = 'Welchstad', `state` = 'Iowa', `zip_code` = '79704', `country` = 'Grenada', `region` = 'Colorado', `lat` = -144.0, `lng` = 39.0, `created_at` = '2016-08-30 22:24:38', `updated_at` = '2016-08-30 22:24:38', `id` = 11, `prefix` = '6170eff8-e568-ef9a-c91c-a3a7bb450738' WHERE `sites`.`id` = 11
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 11 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=11\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 63 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Lucinda Schinner DDS Admin', 'admin', 11, 11, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 63, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 63[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":\"site:read\"},{\"resource\":\"device?site=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=11\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=11\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 64 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Lucinda Schinner DDS Reader', 'reader', 11, 11, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 64, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 64[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=11\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=11\",\"action\":\"*\"},{\"resource\":\"encounter?site=11\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 65 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Lucinda Schinner DDS Technician', 'technician', 11, 11, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 65, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 65[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/11\",\"action\":\"institution:read\"},{\"resource\":\"site/11\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=11\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=11\",\"action\":\"*\"},{\"resource\":\"encounter?site=11\",\"action\":\"*\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.0ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 66 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Lucinda Schinner DDS Supervisor', 'supervisor', 11, 11, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 66, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 66[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.0ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 11 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 11  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.0ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('e396529f-033f-459f-0dfb-9c810c806e75', 11, 11, 11, 11, 11, '---\nid: encounter-22\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '6170eff8-e568-ef9a-c91c-a3a7bb450738', 'encounter-22', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.0ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 11 LIMIT 1[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 11 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 11 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` IS NOT NULL) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`institution_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES (11, x'd364c7a9adc91d792f24899fbefab8ae9f34', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `sample_identifiers` (`uuid`, `site_id`, `entity_id`, `sample_id`, `created_at`, `updated_at`) VALUES ('9da03458-84be-3f0b-8bfe-f938629a561e', 11, '999', 15, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSampleIdentifier Load (0.0ms)[0m  [1mSELECT  `sample_identifiers`.* FROM `sample_identifiers` WHERE `sample_identifiers`.`id` = 8 LIMIT 1[0m
  [1m[35mEncounter Load (0.0ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`deleted_at` IS NULL AND `encounters`.`id` = 11 LIMIT 1
  [1m[36mInstitution Load (0.0ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 11 LIMIT 1[0m
  [1m[35mPatient Load (0.0ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 11 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.0ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 11 LIMIT 1
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 11 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 8) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO `samples` (`encounter_id`, `institution_id`, `patient_id`, `sensitive_data`, `is_phantom`, `created_at`, `updated_at`) VALUES (11, 11, 11, x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mSampleIdentifier Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `sample_identifiers` WHERE `sample_identifiers`.`deleted_at` IS NULL AND `sample_identifiers`.`site_id` = 11 AND (`sample_identifiers`.`created_at` BETWEEN '2016-01-01 00:00:00' AND '2016-12-31 23:59:59') AND `sample_identifiers`.`entity_id` = '999' AND (`sample_identifiers`.`id` != 8) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE `sample_identifiers` SET `sample_id` = 16, `updated_at` = '2016-08-30 22:24:38' WHERE `sample_identifiers`.`id` = 8
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSample Load (0.0ms)[0m  SELECT  `samples`.* FROM `samples` WHERE `samples`.`id` = 16 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mDeviceModel Exists (0.0ms)[0m  SELECT  1 AS one FROM `device_models` WHERE `device_models`.`name` = BINARY 'Collin Champlin PhD' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO `device_models` (`name`, `published_at`, `created_at`, `updated_at`) VALUES ('Collin Champlin PhD', '2016-08-29 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mDeviceModel Load (0.0ms)[0m  [1mSELECT  `device_models`.* FROM `device_models` WHERE `device_models`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mManifest Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM `manifests` WHERE `manifests`.`device_model_id` = BINARY 9 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sedrick@satterfieldprosacco.name' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('sedrick@satterfieldprosacco.name', '$2a$04$VwmQeLvcYSG2RoM47Wj7/.1YkTeEcT99EYwH50kuxPhgqh1ss5gwy', 'Carole', 'Hayes', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('466b2fac-e78a-fb51-f918-a602b05a2589', 12, 'Ms. Eldred Rodriguez', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 67 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ms. Eldred Rodriguez Admin', 'admin', 12, 67, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 67[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=12\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=12\",\"action\":\"site:read\"},{\"resource\":\"device?institution=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=12\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=12\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=12\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=12\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=12\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 68 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ms. Eldred Rodriguez Reader', 'reader', 12, 68, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 68[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '12', 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '12', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 12, 12, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 12, 12, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 12, 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 12, 12, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 12, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 12, 12, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 12  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '913ac9c6c8ffc43504c7cb8490d7f7dda8dd7d43c2752a0b9ffe46eb6bcf4699' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1[0m
  [1m[35mPatient Exists (0.2ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-23' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 12) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('1fdab5ac-303a-36b3-edf5-7ea24033e606', 'Dr. Dena Hessel', 12, 0, '913ac9c6c8ffc43504c7cb8490d7f7dda8dd7d43c2752a0b9ffe46eb6bcf4699', 'patient-23', x'd33ba77e506e6748df8c669db6d0e46ed8cc87238e9fa7a1ab7c8ece807a92e7e1ea8c0e61b61ebc76334883234c6c26c2ac49dad4474fe3df045187', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.3ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 12 LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 12  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (12, '855ed870-227d-375d-e512-f853654f753c', 'Krystel Emmerich', 'fake_0', '738 Vilma Greens', 'Hellenview', 'Tennessee', '60167', 'Paraguay', 'Rhode Island', 42.0, -66.0, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `sites` SET `institution_id` = 12, `uuid` = '855ed870-227d-375d-e512-f853654f753c', `name` = 'Krystel Emmerich', `location_geoid` = 'fake_0', `address` = '738 Vilma Greens', `city` = 'Hellenview', `state` = 'Tennessee', `zip_code` = '60167', `country` = 'Paraguay', `region` = 'Rhode Island', `lat` = 42.0, `lng` = -66.0, `created_at` = '2016-08-30 22:24:38', `updated_at` = '2016-08-30 22:24:38', `id` = 12, `prefix` = '855ed870-227d-375d-e512-f853654f753c' WHERE `sites`.`id` = 12
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 12 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=12\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 69 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Krystel Emmerich Admin', 'admin', 12, 12, '855ed870-227d-375d-e512-f853654f753c', 69, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 69[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":\"site:read\"},{\"resource\":\"device?site=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=12\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=12\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 70 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Krystel Emmerich Reader', 'reader', 12, 12, '855ed870-227d-375d-e512-f853654f753c', 70, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 70[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=12\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=12\",\"action\":\"*\"},{\"resource\":\"encounter?site=12\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 71 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Krystel Emmerich Technician', 'technician', 12, 12, '855ed870-227d-375d-e512-f853654f753c', 71, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 71[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/12\",\"action\":\"institution:read\"},{\"resource\":\"site/12\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=12\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=12\",\"action\":\"*\"},{\"resource\":\"encounter?site=12\",\"action\":\"*\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 72 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Krystel Emmerich Supervisor', 'supervisor', 12, 12, '855ed870-227d-375d-e512-f853654f753c', 72, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 72[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.2ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 12 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 12  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('2d51a0b4-6dba-72c6-639a-519288c2ab36', 12, 12, 12, 12, 12, '---\nid: encounter-24\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '855ed870-227d-375d-e512-f853654f753c', 'encounter-24', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.2ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `requested_tests` (`encounter_id`, `name`, `comment`, `created_at`, `updated_at`) VALUES (12, 'CD4', 'this is a  comment for the requested test ......', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mRequestedTest Load (0.3ms)[0m  SELECT `requested_tests`.* FROM `requested_tests` WHERE `requested_tests`.`deleted_at` IS NULL AND `requested_tests`.`encounter_id` = 12
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 12 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 12 LIMIT 1[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 12 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mRequestedTest Load (0.3ms)[0m  SELECT  `requested_tests`.* FROM `requested_tests` WHERE `requested_tests`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `requested_tests` (`encounter_id`, `name`, `comment`, `created_at`, `updated_at`) VALUES (12, 'CD4', 'this is a  comment for the requested test ......', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mRequestedTest Load (0.2ms)[0m  SELECT  `requested_tests`.* FROM `requested_tests` WHERE `requested_tests`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `requested_tests` WHERE `requested_tests`.`deleted_at` IS NULL AND `requested_tests`.`encounter_id` = 12[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'wilfred@williamsonabshire.net' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('wilfred@williamsonabshire.net', '$2a$04$Sfs4pV/irh/sCz76aAGgx.IGHzO9nUsItwnqG5KJdvinqLqtCB5S6', 'Libby', 'Kuhn', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('683ffe10-40ec-1b8d-5f97-174fff6802f5', 13, 'Ashton Hoppe', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 73 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ashton Hoppe Admin', 'admin', 13, 73, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 73
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=13\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=13\",\"action\":\"site:read\"},{\"resource\":\"device?institution=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=13\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=13\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=13\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=13\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=13\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 74 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ashton Hoppe Reader', 'reader', 13, 74, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 74
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '13', 13, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '13', 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '13', 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '13', 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '13', 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 13, 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 13, 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 13, 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 13, 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 13, 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 13, 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 13, 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 13, 13, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 13, 13, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 13, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 13, 13, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 13  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 13
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.4ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '2ef8f723dfecebff95afbda383597bf009ee375dc80828c401885a8319a49093' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-25' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 13) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('16feac4e-cbfe-fb23-8595-83a2e9cf6958', 'Patsy Breitenberg DDS', 13, 0, '2ef8f723dfecebff95afbda383597bf009ee375dc80828c401885a8319a49093', 'patient-25', x'd33ba77e506e6748df8c669db6d0e46edecc87238e9fa7a1ab7c8eda9320c1daa4c69f4b40a708a1713a1899abb78a2ba4d39bb3d47c2f8a64d189d0195503de8aac', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 13 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 13  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (13, '2fae9b12-f78d-c7b2-3671-10784267b78c', 'Mrs. Lincoln Zemlak', 'fake_0', '509 Carlie Ville', 'West Hendersonside', 'New Jersey', '22743-4692', 'India', 'Tennessee', -38.0, 14.0, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `sites` SET `institution_id` = 13, `uuid` = '2fae9b12-f78d-c7b2-3671-10784267b78c', `name` = 'Mrs. Lincoln Zemlak', `location_geoid` = 'fake_0', `address` = '509 Carlie Ville', `city` = 'West Hendersonside', `state` = 'New Jersey', `zip_code` = '22743-4692', `country` = 'India', `region` = 'Tennessee', `lat` = -38.0, `lng` = 14.0, `created_at` = '2016-08-30 22:24:38', `updated_at` = '2016-08-30 22:24:38', `id` = 13, `prefix` = '2fae9b12-f78d-c7b2-3671-10784267b78c' WHERE `sites`.`id` = 13[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 13 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=13\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 75 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Lincoln Zemlak Admin', 'admin', 13, 13, '2fae9b12-f78d-c7b2-3671-10784267b78c', 75, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 75
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":\"site:read\"},{\"resource\":\"device?site=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=13\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=13\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 76 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Lincoln Zemlak Reader', 'reader', 13, 13, '2fae9b12-f78d-c7b2-3671-10784267b78c', 76, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 76
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=13\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=13\",\"action\":\"*\"},{\"resource\":\"encounter?site=13\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 77 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Lincoln Zemlak Technician', 'technician', 13, 13, '2fae9b12-f78d-c7b2-3671-10784267b78c', 77, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 77
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/13\",\"action\":\"institution:read\"},{\"resource\":\"site/13\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=13\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=13\",\"action\":\"*\"},{\"resource\":\"encounter?site=13\",\"action\":\"*\"}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 78 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mrs. Lincoln Zemlak Supervisor', 'supervisor', 13, 13, '2fae9b12-f78d-c7b2-3671-10784267b78c', 78, '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 78
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 13 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 13  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('d1928353-ead6-1dfe-e141-45709717886d', 13, 13, 13, 13, 13, '---\nid: encounter-26\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '2fae9b12-f78d-c7b2-3671-10784267b78c', 'encounter-26', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mEncounter Load (0.2ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 13 LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 13 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 13 LIMIT 1[0m
  [1m[35mPatient Load (0.3ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 13 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'morris@bosco.io' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('morris@bosco.io', '$2a$04$J7xhHpMqEEUPAH8Msj0ky.iHXOLAqzTlPzBG0BnljdQbVWCRUgYqm', 'Eldred', 'Gusikowski', '2016-08-29 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mPolicy Load (10.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14
  [1m[36m (3.4ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('e36afb85-25ba-2bf6-5c3d-bdcddfcdb4ce', 14, 'Bernardo Hilpert', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 79 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Bernardo Hilpert Admin', 'admin', 14, 79, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 79[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=14\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=14\",\"action\":\"site:read\"},{\"resource\":\"device?institution=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=14\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=14\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=14\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=14\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=14\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 80 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Bernardo Hilpert Reader', 'reader', 14, 80, '2016-08-30 22:24:38', '2016-08-30 22:24:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 80[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14
  [1m[36mComputedPolicy Load (0.4ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '14', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '14', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '14', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '14', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '14', 14, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '14', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 14, 14, 1)[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 14, 14, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 14, 14, 1)[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 14, 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 14, 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 14, 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 14, 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 14, 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 14, 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 14, 14, 1)[0m
  [1m[35mSubscriber Load (0.8ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 14  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 14[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY 'fcfa255d1c77624e2613fdf264160a0e7b573610f0299ab919621eed41b289ca' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-27' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 14) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('44bcdb11-ab97-630f-0e12-5db2e616f773', 'Concepcion Hilll', 14, 0, 'fcfa255d1c77624e2613fdf264160a0e7b573610f0299ab919621eed41b289ca', 'patient-27', x'd33ba77e506e6748df8c669db6d0e46edccc87238e9fa7a1ab7c8ec99d3ad1c6f4e7844147f325a67f3306dcf6578e2682175f23af41d859ad2f5e045b', '2016-08-30 22:24:38', '2016-08-30 22:24:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.3ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 14 LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1[0m
  [1m[35mSite Load (0.4ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 14  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (14, 'e710d138-c52c-11ae-1478-1fb21ac60804', 'Jaren Herzog', 'fake_0', '3399 Cara Lock', 'Ankundington', 'Massachusetts', '43141-6676', 'Northern Mariana Islands', 'New York', 152.0, 65.0, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `sites` SET `institution_id` = 14, `uuid` = 'e710d138-c52c-11ae-1478-1fb21ac60804', `name` = 'Jaren Herzog', `location_geoid` = 'fake_0', `address` = '3399 Cara Lock', `city` = 'Ankundington', `state` = 'Massachusetts', `zip_code` = '43141-6676', `country` = 'Northern Mariana Islands', `region` = 'New York', `lat` = 152.0, `lng` = 65.0, `created_at` = '2016-08-30 22:24:39', `updated_at` = '2016-08-30 22:24:39', `id` = 14, `prefix` = 'e710d138-c52c-11ae-1478-1fb21ac60804' WHERE `sites`.`id` = 14
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 14 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=14\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 81 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jaren Herzog Admin', 'admin', 14, 14, 'e710d138-c52c-11ae-1478-1fb21ac60804', 81, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 81[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":\"site:read\"},{\"resource\":\"device?site=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=14\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=14\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 82 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jaren Herzog Reader', 'reader', 14, 14, 'e710d138-c52c-11ae-1478-1fb21ac60804', 82, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 82[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=14\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=14\",\"action\":\"*\"},{\"resource\":\"encounter?site=14\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 83 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jaren Herzog Technician', 'technician', 14, 14, 'e710d138-c52c-11ae-1478-1fb21ac60804', 83, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 83[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/14\",\"action\":\"institution:read\"},{\"resource\":\"site/14\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=14\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=14\",\"action\":\"*\"},{\"resource\":\"encounter?site=14\",\"action\":\"*\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 84 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Jaren Herzog Supervisor', 'supervisor', 14, 14, 'e710d138-c52c-11ae-1478-1fb21ac60804', 84, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 84[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 14 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 14  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('80b043f3-9832-4b2c-e0fe-cab05d2e180e', 14, 14, 14, 14, 14, '---\nid: encounter-28\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'e710d138-c52c-11ae-1478-1fb21ac60804', 'encounter-28', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.2ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 14 LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 14 LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 14 LIMIT 1
  [1m[36mPatient Load (0.3ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'juana@lakinkihn.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('juana@lakinkihn.com', '$2a$04$wkjrC7624/BDFqPyar6DAe5LWW5cm7jiNYkUc.0E9FkYsHUfflOWC', 'Laverna', 'Graham', '2016-08-29 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 15 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('4a4f73bc-56af-0cc5-0422-cbcfec84dfd7', 15, 'Sigmund Veum', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 85 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Sigmund Veum Admin', 'admin', 15, 85, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 85
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=15\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=15\",\"action\":\"site:read\"},{\"resource\":\"device?institution=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=15\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=15\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=15\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=15\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=15\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 86 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Sigmund Veum Reader', 'reader', 15, 86, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 86
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15[0m
  [1m[35m (0.4ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '15', 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '15', 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '15', 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '15', 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '15', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 15, 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 15, 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 15, 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 15, 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 15, 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 15, 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 15, 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 15, 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 15, 15, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 15, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 15, 15, 1)
  [1m[36mSubscriber Load (0.3ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 15  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.4ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 15
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '297e227d41b6db7646b91a199b696849a38f62efc548e1dfc5e06aebf767434c' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-29' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 15) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('03923593-e842-b735-48fd-834adbcc93fa', 'Fern Hills', 15, 0, '297e227d41b6db7646b91a199b696849a38f62efc548e1dfc5e06aebf767434c', 'patient-29', x'd33ba77e506e6748df8c669db6d0e46ed2cc87238e9fa7a1ab7c8ecc9726dc83cced81425af110d42a60dd4fcbaeafa2aa71d8d1b60afa', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.4ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 15 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 15 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 15  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (15, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 'Marian Fisher', 'fake_0', '6323 Kirk Spurs', 'Rhettview', 'Idaho', '29518', 'Iran', 'Illinois', 112.0, 8.0, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `sites` SET `institution_id` = 15, `uuid` = '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', `name` = 'Marian Fisher', `location_geoid` = 'fake_0', `address` = '6323 Kirk Spurs', `city` = 'Rhettview', `state` = 'Idaho', `zip_code` = '29518', `country` = 'Iran', `region` = 'Illinois', `lat` = 112.0, `lng` = 8.0, `created_at` = '2016-08-30 22:24:39', `updated_at` = '2016-08-30 22:24:39', `id` = 15, `prefix` = '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29' WHERE `sites`.`id` = 15[0m
  [1m[35mRole Load (1.0ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 15 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=15\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 87 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marian Fisher Admin', 'admin', 15, 15, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 87, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 87
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":\"site:read\"},{\"resource\":\"device?site=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=15\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=15\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 88 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marian Fisher Reader', 'reader', 15, 15, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 88, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 88
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=15\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=15\",\"action\":\"*\"},{\"resource\":\"encounter?site=15\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 89 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marian Fisher Technician', 'technician', 15, 15, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 89, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 89
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/15\",\"action\":\"institution:read\"},{\"resource\":\"site/15\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=15\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=15\",\"action\":\"*\"},{\"resource\":\"encounter?site=15\",\"action\":\"*\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 90 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Marian Fisher Supervisor', 'supervisor', 15, 15, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 90, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 90
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 15 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 15  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('e81cf35c-1d74-9757-8619-a440128893a1', 15, 15, 15, 15, 15, '---\nid: encounter-30\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '70bd4864-e2db-29f4-d8cf-1bfefe1b3d29', 'encounter-30', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mEncounter Load (0.3ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 15 LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 15 LIMIT 1
  [1m[36mInstitution Load (0.4ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 15 LIMIT 1[0m
  [1m[35mPatient Load (0.3ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 15 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'omer_schmitt@hammeskautzer.net' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('omer_schmitt@hammeskautzer.net', '$2a$04$rm0kvtCmvnkargJnUGDpXO2CVT0081m/2NZTT7FQ/.XswWXPA7Ze6', 'Kayley', 'Ortiz', '2016-08-29 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('1d70da89-d50f-0fd5-32f4-e1aa459e0e09', 16, 'Khalid Raynor DVM', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 91 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Khalid Raynor DVM Admin', 'admin', 16, 91, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 91[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=16\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=16\",\"action\":\"site:read\"},{\"resource\":\"device?institution=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=16\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=16\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=16\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=16\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=16\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 92 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Khalid Raynor DVM Reader', 'reader', 16, 92, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 92[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 16
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 16[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 16
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 16[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '16', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '16', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '16', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '16', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '16', 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '16', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 16, 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 16, 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 16, 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 16, 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 16, 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 16, 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 16, 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 16, 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 16, 16, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 16, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 16, 16, 1)[0m
  [1m[35mSubscriber Load (0.3ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 16  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.4ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 16[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mPatient Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '377f9684630bf122c941d54e8ca83018f5491d402b464cd62eb0ca3408c6d096' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-31' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 16) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('cc960b55-0cbf-cbc5-b956-2fc54f22b30a', 'Forest Lueilwitz', 16, 0, '377f9684630bf122c941d54e8ca83018f5491d402b464cd62eb0ca3408c6d096', 'patient-31', x'd33ba77e506e6748df8c669db6d0e46fdacc87238e9fa7a1ab7c8ecc9d26d7d0f0a4a15b4cba01b87a2b10dcf653502dee4c6f90015aba6568084675bd', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mPatient Load (0.3ms)[0m  [1mSELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 16 LIMIT 1[0m
  [1m[35mInstitution Load (0.3ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 16  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36mInstitution Load (0.3ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (16, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 'Mr. Briana Kuhlman', 'fake_0', '74359 Gerardo Wells', 'Lake Valerie', 'Missouri', '56341', 'Morocco', 'Maryland', -152.0, -21.0, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE `sites` SET `institution_id` = 16, `uuid` = 'b2b5a783-ee02-1933-8f2f-80cc079c5930', `name` = 'Mr. Briana Kuhlman', `location_geoid` = 'fake_0', `address` = '74359 Gerardo Wells', `city` = 'Lake Valerie', `state` = 'Missouri', `zip_code` = '56341', `country` = 'Morocco', `region` = 'Maryland', `lat` = -152.0, `lng` = -21.0, `created_at` = '2016-08-30 22:24:39', `updated_at` = '2016-08-30 22:24:39', `id` = 16, `prefix` = 'b2b5a783-ee02-1933-8f2f-80cc079c5930' WHERE `sites`.`id` = 16
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 16 AND (`roles`.`key` IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=16\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 93 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mr. Briana Kuhlman Admin', 'admin', 16, 16, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 93, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 93[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":\"site:read\"},{\"resource\":\"device?site=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=16\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=16\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 94 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mr. Briana Kuhlman Reader', 'reader', 16, 16, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 94, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 94[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=16\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=16\",\"action\":\"*\"},{\"resource\":\"encounter?site=16\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 95 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mr. Briana Kuhlman Technician', 'technician', 16, 16, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 95, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 95[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/16\",\"action\":\"institution:read\"},{\"resource\":\"site/16\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=16\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=16\",\"action\":\"*\"},{\"resource\":\"encounter?site=16\",\"action\":\"*\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 96 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Mr. Briana Kuhlman Supervisor', 'supervisor', 16, 16, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 96, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 96[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSite Load (0.2ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 16 LIMIT 1[0m
  [1m[35mSite Load (0.3ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 16  ORDER BY `sites`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 16 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('3c3055a8-fc73-0b81-6fb7-54f8f00c7fe3', 16, 16, 16, 16, 16, '---\nid: encounter-32\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, 'b2b5a783-ee02-1933-8f2f-80cc079c5930', 'encounter-32', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mEncounter Load (0.2ms)[0m  [1mSELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'reece@sawayn.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('reece@sawayn.net', '$2a$04$MJvztkBeAbKEEXHZoKDfje6s/6WwfkWmu7puo.GBcjpAp7kJ5Js2K', 'Marcia', 'Kuvalis', '2016-08-29 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('f77185e0-2b56-4469-9a0f-3703d47441f2', 17, 'Mrs. Favian Spencer', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 97 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Favian Spencer Admin', 'admin', 17, 97, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 97
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=17\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=17\",\"action\":\"site:read\"},{\"resource\":\"device?institution=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=17\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=17\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=17\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=17\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=17\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 98 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Favian Spencer Reader', 'reader', 17, 98, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 98
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 17[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 17
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 17[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 17
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '17', 17, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '17', 17, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '17', 17, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '17', 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '17', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 17, 17, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 17, 17, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 17, 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 17, 17, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 17, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 17, 17, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 17  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 17
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mPatient Exists (0.3ms)[0m  SELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id_hash` = BINARY '811058057706ec26f87ac7319f0ff17aa626a10c664d7313b0a8929c787411fd' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1
  [1m[36mPatient Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `patients` WHERE (`patients`.`entity_id` = BINARY 'patient-33' AND `patients`.`deleted_at` IS NULL AND `patients`.`institution_id` = 17) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `patients` (`uuid`, `name`, `institution_id`, `is_phantom`, `entity_id_hash`, `entity_id`, `sensitive_data`, `created_at`, `updated_at`) VALUES ('7769a54f-8bef-0def-3aa4-a4b48e0e41af', 'Mr. Estelle Reynolds', 17, 0, '811058057706ec26f87ac7319f0ff17aa626a10c664d7313b0a8929c787411fd', 'patient-33', x'd33ba77e506e6748df8c669db6d0e46fd8cc87238e9fa7a1ab7c8ec7807a92e6f7f0884245b64d9d76260491e797bd5afb40fb647d86c0209f028dddb5eb43ff88', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`id` = 17 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 17 LIMIT 1
  [1m[36mSite Load (0.3ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 17  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sites` (`institution_id`, `uuid`, `name`, `location_geoid`, `address`, `city`, `state`, `zip_code`, `country`, `region`, `lat`, `lng`, `created_at`, `updated_at`) VALUES (17, '794acef6-6986-940f-b58b-67c147af1b4d', 'Dominique Grady', 'fake_0', '79725 Stacey Summit', 'East Olin', 'Nevada', '11115', 'Cyprus', 'Oregon', 80.0, -44.0, '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `sites` SET `institution_id` = 17, `uuid` = '794acef6-6986-940f-b58b-67c147af1b4d', `name` = 'Dominique Grady', `location_geoid` = 'fake_0', `address` = '79725 Stacey Summit', `city` = 'East Olin', `state` = 'Nevada', `zip_code` = '11115', `country` = 'Cyprus', `region` = 'Oregon', `lat` = 80.0, `lng` = -44.0, `created_at` = '2016-08-30 22:24:39', `updated_at` = '2016-08-30 22:24:39', `id` = 17, `prefix` = '794acef6-6986-940f-b58b-67c147af1b4d' WHERE `sites`.`id` = 17[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` WHERE `roles`.`site_id` = 17 AND (`roles`.`key` IS NOT NULL)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":[\"institution:read\",\"institution:registerDevice\",\"institution:createRole\"],\"delegable\":true},{\"resource\":\"site/17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"device?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"testResult?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"encounter?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true},{\"resource\":\"role?site=17\",\"action\":\"*\",\"delegable\":true,\"includeSubsites\":true}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 99 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dominique Grady Admin', 'admin', 17, 17, '794acef6-6986-940f-b58b-67c147af1b4d', 99, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 99
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":\"site:read\"},{\"resource\":\"device?site=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=17\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?site=17\",\"action\":\"encounter:read\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 100 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dominique Grady Reader', 'reader', 17, 17, '794acef6-6986-940f-b58b-67c147af1b4d', 100, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 100
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=17\",\"action\":\"device:read\"},{\"resource\":\"testResult?site=17\",\"action\":\"*\"},{\"resource\":\"encounter?site=17\",\"action\":[\"encounter:read\",\"encounter:update\",\"encounter:pii\"]}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 101 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dominique Grady Technician', 'technician', 17, 17, '794acef6-6986-940f-b58b-67c147af1b4d', 101, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 101
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Site/Institution', '{\"statement\":[{\"resource\":\"institution/17\",\"action\":\"institution:read\"},{\"resource\":\"site/17\",\"action\":[\"site:read\",\"site:createEncounter\"]},{\"resource\":\"device?site=17\",\"action\":[\"device:read\",\"device:regenerateKey\",\"device:generateActivationToken\"]},{\"resource\":\"testResult?site=17\",\"action\":\"*\"},{\"resource\":\"encounter?site=17\",\"action\":\"*\"}]}', '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 102 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `site_id`, `site_prefix`, `policy_id`, `created_at`, `updated_at`) VALUES ('Site Dominique Grady Supervisor', 'supervisor', 17, 17, '794acef6-6986-940f-b58b-67c147af1b4d', 102, '2016-08-30 22:24:39', '2016-08-30 22:24:39')[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 102
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 17 LIMIT 1
  [1m[36mSite Load (0.2ms)[0m  [1mSELECT  `sites`.* FROM `sites` WHERE `sites`.`deleted_at` IS NULL AND `sites`.`institution_id` = 17  ORDER BY `sites`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `encounters` (`uuid`, `institution_id`, `patient_id`, `user_id`, `site_id`, `performing_site_id`, `core_fields`, `sensitive_data`, `is_phantom`, `site_prefix`, `entity_id`, `created_at`, `updated_at`) VALUES ('b300c5e5-3f51-c511-1003-062a7d93568f', 17, 17, 17, 17, 17, '---\nid: encounter-34\n', x'd364c7a9adc91d792f24899fbefab8ae9f34', 0, '794acef6-6986-940f-b58b-67c147af1b4d', 'encounter-34', '2016-08-30 22:24:39', '2016-08-30 22:24:39')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mEncounter Load (0.2ms)[0m  SELECT  `encounters`.* FROM `encounters` WHERE `encounters`.`id` = 17 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35mSite Load (0.2ms)[0m  SELECT  `sites`.* FROM `sites` WHERE `sites`.`id` = 17 LIMIT 1
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 17 LIMIT 1[0m
  [1m[35mPatient Load (0.2ms)[0m  SELECT  `patients`.* FROM `patients` WHERE `patients`.`deleted_at` IS NULL AND `patients`.`id` = 17 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (9.0ms)[0m  select table_name from information_schema.views where table_schema = 'cdp_test'
  [1m[36m (6.4ms)[0m  [1mTRUNCATE TABLE `addresses`;[0m
  [1m[35m (4.6ms)[0m  TRUNCATE TABLE `alert_condition_results`;
  [1m[36m (4.5ms)[0m  [1mTRUNCATE TABLE `alert_histories`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `alert_recipients`;
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE `alerts`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `alerts_conditions`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `alerts_devices`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `alerts_sites`;
  [1m[36m (4.6ms)[0m  [1mTRUNCATE TABLE `audit_logs`;[0m
  [1m[35m (5.0ms)[0m  TRUNCATE TABLE `audit_updates`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `comments`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `computed_policies`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `computed_policy_exceptions`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `conditions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `conditions_manifests`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `device_commands`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `device_logs`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `device_messages`;
  [1m[36m (3.3ms)[0m  [1mTRUNCATE TABLE `device_messages_patient_results`;[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `device_models`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `devices`;[0m
  [1m[35m (5.8ms)[0m  TRUNCATE TABLE `encounters`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `episodes`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `file_messages`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `filters`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `identities`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `institutions`;[0m
  [1m[35m (3.4ms)[0m  TRUNCATE TABLE `manifests`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `oauth_access_grants`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `oauth_access_tokens`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `oauth_applications`;[0m
  [1m[35m (4.1ms)[0m  TRUNCATE TABLE `old_passwords`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `page_headers`;[0m
  [1m[35m (7.0ms)[0m  TRUNCATE TABLE `patient_results`;
  [1m[36m (3.7ms)[0m  [1mTRUNCATE TABLE `patients`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `policies`;
  [1m[36m (2.8ms)[0m  [1mTRUNCATE TABLE `recipient_notification_histories`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `requested_tests`;
  [1m[36m (2.9ms)[0m  [1mTRUNCATE TABLE `roles`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `roles_users`;
  [1m[36m (4.3ms)[0m  [1mTRUNCATE TABLE `sample_identifiers`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `samples`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `settings_pages`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `sites`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `ssh_keys`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `subscribers`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `test_result_parsed_data`;[0m
  [1m[35m (5.3ms)[0m  TRUNCATE TABLE `users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (3.2ms)[0m  TRUNCATE TABLE `addresses`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `alert_condition_results`;[0m
  [1m[35m (4.4ms)[0m  TRUNCATE TABLE `alert_histories`;
  [1m[36m (3.9ms)[0m  [1mTRUNCATE TABLE `alert_recipients`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `alerts`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `alerts_conditions`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `alerts_devices`;
  [1m[36m (2.3ms)[0m  [1mTRUNCATE TABLE `alerts_sites`;[0m
  [1m[35m (4.8ms)[0m  TRUNCATE TABLE `audit_logs`;
  [1m[36m (3.1ms)[0m  [1mTRUNCATE TABLE `audit_updates`;[0m
  [1m[35m (3.5ms)[0m  TRUNCATE TABLE `comments`;
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `computed_policies`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `computed_policy_exceptions`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `conditions`;[0m
  [1m[35m (4.5ms)[0m  TRUNCATE TABLE `conditions_manifests`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `device_commands`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `device_logs`;
  [1m[36m (5.2ms)[0m  [1mTRUNCATE TABLE `device_messages`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `device_messages_patient_results`;
  [1m[36m (3.0ms)[0m  [1mTRUNCATE TABLE `device_models`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `devices`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `encounters`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `episodes`;
  [1m[36m (5.1ms)[0m  [1mTRUNCATE TABLE `file_messages`;[0m
  [1m[35m (3.7ms)[0m  TRUNCATE TABLE `filters`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `identities`;[0m
  [1m[35m (2.7ms)[0m  TRUNCATE TABLE `institutions`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `manifests`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `oauth_access_grants`;
  [1m[36m (4.9ms)[0m  [1mTRUNCATE TABLE `oauth_access_tokens`;[0m
  [1m[35m (3.3ms)[0m  TRUNCATE TABLE `oauth_applications`;
  [1m[36m (3.8ms)[0m  [1mTRUNCATE TABLE `old_passwords`;[0m
  [1m[35m (3.6ms)[0m  TRUNCATE TABLE `page_headers`;
  [1m[36m (6.5ms)[0m  [1mTRUNCATE TABLE `patient_results`;[0m
  [1m[35m (4.0ms)[0m  TRUNCATE TABLE `patients`;
  [1m[36m (2.5ms)[0m  [1mTRUNCATE TABLE `policies`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `recipient_notification_histories`;
  [1m[36m (5.7ms)[0m  [1mTRUNCATE TABLE `requested_tests`;[0m
  [1m[35m (2.3ms)[0m  TRUNCATE TABLE `roles`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `roles_users`;[0m
  [1m[35m (5.2ms)[0m  TRUNCATE TABLE `sample_identifiers`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `samples`;[0m
  [1m[35m (3.1ms)[0m  TRUNCATE TABLE `settings_pages`;
  [1m[36m (3.6ms)[0m  [1mTRUNCATE TABLE `sites`;[0m
  [1m[35m (4.3ms)[0m  TRUNCATE TABLE `ssh_keys`;
  [1m[36m (2.7ms)[0m  [1mTRUNCATE TABLE `subscribers`;[0m
  [1m[35m (15.3ms)[0m  TRUNCATE TABLE `test_result_parsed_data`;
  [1m[36m (12.1ms)[0m  [1mTRUNCATE TABLE `users`;[0m
  [1m[35m (1.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'existant@user.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('existant@user.com', '$2a$04$sA1R8xdZ6cddhTnc2RVi7.aB8KtelZVcC24qmolAdeZaJNL/vzANC', 'Maxie', 'Runte', '2016-08-29 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37')[0m
  [1m[35mPolicy Load (0.4ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 1
  [1m[36m (0.3ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 1[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aric.smith@keeblergoyette.co' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('aric.smith@keeblergoyette.co', '$2a$04$kNdn2MIm5cgA9vAaEFPa8.hppkb3x9Aviizlo3/KM7DauHoY7gr86', 'Abby', 'Casper', '2016-08-29 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('3d7c5107-a45c-8ddd-3fde-c32c987ab7cf', 2, 'Aric Smith', '2016-08-30 22:27:37', '2016-08-30 22:27:37')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:37', '2016-08-30 22:27:37')[0m
  [1m[35mPolicy Load (0.3ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Admin', 'admin', 1, 1, '2016-08-30 22:27:37', '2016-08-30 22:27:37')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/1\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=1\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=1\",\"action\":\"site:read\"},{\"resource\":\"device?institution=1\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=1\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=1\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=1\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=1\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=1\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:37', '2016-08-30 22:27:37')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Aric Smith Reader', 'reader', 1, 2, '2016-08-30 22:27:37', '2016-08-30 22:27:37')[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 2
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '1', 2, 1)[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '1', 2, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '1', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '1', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '1', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '1', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '1', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '1', 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '1', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 1, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 1, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 1, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 1, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 1, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 1, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 1, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 1, 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 1, 2, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 2, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 1, 2, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 1 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `users` SET `last_navigation_context` = '3d7c5107-a45c-8ddd-3fde-c32c987ab7cf', `updated_at` = '2016-08-30 22:27:37' WHERE `users`.`id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `user_id`, `created_at`, `updated_at`) VALUES ('Superadmin', '{\"statement\":[{\"action\":\"*\",\"delegable\":true,\"resource\":[\"institution\",\"site\",\"device\",\"deviceModel\",\"testResult\",\"encounter\",\"role\",\"user\",\"patient\",\"alert\",\"pageHeader\",\"settingsPage\"]}]}', 2, '2016-08-30 22:27:37', '2016-08-30 22:27:37')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 2[0m
  [1m[35m (0.3ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 2
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 2[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT  `roles`.* FROM `roles` WHERE `roles`.`policy_id` = 3 LIMIT 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 2[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 1
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 2[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 3
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 4[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 5
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 6[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 7
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 8[0m
  [1m[35mComputedPolicyException Load (0.3ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 9
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 10[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 11
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 12[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 13
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 14[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 15
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 16[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 17
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 18[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 19
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 20[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 2[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 3
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 4[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 5
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 6[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 7
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 8[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 9
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 10[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 11
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 12[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 13
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 14[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 15
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 16[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 17
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 18[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 19
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 20[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('institution', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('site', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('device', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('testResult', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('encounter', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('role', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('user', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('patient', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('alert', 2, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 2  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  `roles`.* FROM `roles` WHERE `roles`.`institution_id` = 1  ORDER BY `roles`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles_users` (`user_id`, `role_id`) VALUES (1, 1)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`email` = 'new@example.com' LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`invitation_token` = '2f4553a0d53c110060d39b3a16e1102fea60e66d9fc64821b562b98c9fd9a7b2'  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `invitation_token`, `invitation_created_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('new@example.com', '2f4553a0d53c110060d39b3a16e1102fea60e66d9fc64821b562b98c9fd9a7b2', '2016-08-30 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37', '2016-08-30 22:27:37')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 3[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 3
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 3[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 3
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m

InvitationMailer#invite_message: processed outbound mail in 109.4ms
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'existant@user.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('existant@user.com', '$2a$04$1qm0ewt3il0tIGk6SNKaK.cD4hWqzkU6MCrOs9uWFpWsOsWUhNZHW', 'Waldo', 'Hoeger', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 4[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 4
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 4[0m
  [1m[35mComputedPolicy Load (0.1ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 4
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'alyon.goldner@sengermedhurst.info' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('alyon.goldner@sengermedhurst.info', '$2a$04$cAXoxO4/fgD6XSIrlsEnKejjkNDAMFJbzVfx3F1JKPzCABvaA0Xzy', 'Jed', 'Dickens', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.1ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('27f26f90-b606-5c16-7de4-abca6b7eef65', 5, 'Mrs. Terry Goyette', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 4 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Admin', 'admin', 2, 4, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/2\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=2\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=2\",\"action\":\"site:read\"},{\"resource\":\"device?institution=2\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=2\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=2\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=2\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=2\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=2\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 5 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mrs. Terry Goyette Reader', 'reader', 2, 5, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 4[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '2', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '2', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '2', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '2', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '2', 5, 1)
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '2', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '2', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '2', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '2', 5, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 2, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 2, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 2, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 2, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 2, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 2, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 2, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 2, 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 2, 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 2, 5, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.1ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 2 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `users` SET `last_navigation_context` = '27f26f90-b606-5c16-7de4-abca6b7eef65', `updated_at` = '2016-08-30 22:27:38' WHERE `users`.`id` = 5
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `user_id`, `created_at`, `updated_at`) VALUES ('Superadmin', '{\"statement\":[{\"action\":\"*\",\"delegable\":true,\"resource\":[\"institution\",\"site\",\"device\",\"deviceModel\",\"testResult\",\"encounter\",\"role\",\"user\",\"patient\",\"alert\",\"pageHeader\",\"settingsPage\"]}]}', 5, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 5
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 5[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 5
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  `roles`.* FROM `roles` WHERE `roles`.`policy_id` = 6 LIMIT 1[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 5
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 33[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 34
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 35[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 36
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 37[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 38
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 39[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 40
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 41[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 42
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 43[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 44
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 45[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 46
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 47[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 48
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 49[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 50
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 51[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 52
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 33[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 34
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 35[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 36
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 37[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 38
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 39[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 40
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 41[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 42
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 43[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 44
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 45[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 46
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 47[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 48
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 49[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 50
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 51[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 52
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('institution', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('site', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('device', 5, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('testResult', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('encounter', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('role', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('user', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('patient', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('alert', 5, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 5  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 5
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  `roles`.* FROM `roles` WHERE `roles`.`institution_id` = 2  ORDER BY `roles`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles_users` (`user_id`, `role_id`) VALUES (4, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`email` = 'new@example.com' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`invitation_token` = '08354112956995deeb1b4e1867c60c397a700997e493edb1aff49218f1461547'  ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `invitation_token`, `invitation_created_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('new@example.com', '08354112956995deeb1b4e1867c60c397a700997e493edb1aff49218f1461547', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 6
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 6[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 6
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 6[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2

InvitationMailer#invite_message: processed outbound mail in 2.1ms
  [1m[36m (7.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'existant@user.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('existant@user.com', '$2a$04$0gtMZYpB9ZrZzd98TXGuNe31n3eotNqyxN2H4ehXg81RbNSYlqVti', 'Mercedes', 'Heathcote', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 7
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 7[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 7
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 7[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'hollis@harber.io' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('hollis@harber.io', '$2a$04$wwXc8iAOxalMICeKRw9gI.6QRoAehDWVMxgIZTY/Uyr8mYLFeGmLK', 'Chaya', 'Leffler', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.1ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('c07002a9-e440-3cf7-7e26-06d96a23e644', 8, 'Mr. Alphonso Witting', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 7 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Admin', 'admin', 3, 7, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 5
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/3\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=3\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=3\",\"action\":\"site:read\"},{\"resource\":\"device?institution=3\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=3\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=3\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=3\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=3\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=3\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 8 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Mr. Alphonso Witting Reader', 'reader', 3, 8, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 6
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '3', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '3', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '3', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '3', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '3', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '3', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '3', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '3', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '3', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 3, 8, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 3, 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 3, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 3, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 3, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 3, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 3, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 3, 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 3, 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 8, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 3, 8, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.1ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `users` SET `last_navigation_context` = 'c07002a9-e440-3cf7-7e26-06d96a23e644', `updated_at` = '2016-08-30 22:27:38' WHERE `users`.`id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `user_id`, `created_at`, `updated_at`) VALUES ('Superadmin', '{\"statement\":[{\"action\":\"*\",\"delegable\":true,\"resource\":[\"institution\",\"site\",\"device\",\"deviceModel\",\"testResult\",\"encounter\",\"role\",\"user\",\"patient\",\"alert\",\"pageHeader\",\"settingsPage\"]}]}', 8, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 8[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 8
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 8[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  `roles`.* FROM `roles` WHERE `roles`.`policy_id` = 9 LIMIT 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 8[0m
  [1m[35mComputedPolicyException Load (0.3ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 65
  [1m[36mComputedPolicyException Load (0.3ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 66[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 67
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 68[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 69
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 70[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 71
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 72[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 73
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 74[0m
  [1m[35mComputedPolicyException Load (0.3ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 75
  [1m[36mComputedPolicyException Load (0.3ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 76[0m
  [1m[35mComputedPolicyException Load (0.6ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 77
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 78[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 79
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 80[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 81
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 82[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 83
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 84[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 65
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 66[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 67
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 68[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 69
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 70[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 71
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 72[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 73
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 74[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 75
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 76[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 77
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 78[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 79
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 80[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 81
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 82[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 83
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 84[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('institution', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('site', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('device', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('deviceModel', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('testResult', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('encounter', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('role', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('user', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('patient', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('alert', 8, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('pageHeader', 8, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('settingsPage', 8, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 8  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 8[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  `roles`.* FROM `roles` WHERE `roles`.`institution_id` = 3  ORDER BY `roles`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `roles_users` (`user_id`, `role_id`) VALUES (7, 5)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`email` = 'new@example.com' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`invitation_token` = 'bbee95b121ea9583a5226146b47f04de8ee1304fab2a11811a211f75aa5735c1'  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `invitation_token`, `invitation_created_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('new@example.com', 'bbee95b121ea9583a5226146b47f04de8ee1304fab2a11811a211f75aa5735c1', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 9[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 9
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 9[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 9
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m

InvitationMailer#invite_message: processed outbound mail in 2.3ms
  [1m[35m (8.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'existant@user.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('existant@user.com', '$2a$04$W9SgAz4Mkv.j0XYX8R/1puHUqBpGCPMci6EhDW50AfdPILGE3/AU6', 'Mae', 'O\'Reilly', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 10[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 10
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 10[0m
  [1m[35mComputedPolicy Load (0.1ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 10
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 10 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'scot_kling@robertsdeckow.org' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('scot_kling@robertsdeckow.org', '$2a$04$er4vA8cPeLEbGiROcAYCz.8J19sgVRLVYJy8GvsJk2wMncswvJWoC', 'Dax', 'Harris', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('3bf9c053-45f3-543f-62c7-f7023b3b1ff5', 11, 'Ross Senger', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.3ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 10 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Admin', 'admin', 4, 10, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 7[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/4\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=4\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=4\",\"action\":\"site:read\"},{\"resource\":\"device?institution=4\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=4\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=4\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=4\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=4\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=4\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 11 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Ross Senger Reader', 'reader', 4, 11, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 8[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '4', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '4', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '4', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '4', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '4', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '4', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '4', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '4', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '4', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 4, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 4, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 4, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 4, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 4, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 4, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 4, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 4, 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 4, 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 4, 11, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mInstitution Load (0.2ms)[0m  [1mSELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 4 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `users` SET `last_navigation_context` = '3bf9c053-45f3-543f-62c7-f7023b3b1ff5', `updated_at` = '2016-08-30 22:27:38' WHERE `users`.`id` = 11
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `user_id`, `created_at`, `updated_at`) VALUES ('Superadmin', '{\"statement\":[{\"action\":\"*\",\"delegable\":true,\"resource\":[\"institution\",\"site\",\"device\",\"deviceModel\",\"testResult\",\"encounter\",\"role\",\"user\",\"patient\",\"alert\",\"pageHeader\",\"settingsPage\"]}]}', 11, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 11
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 11[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 11
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  `roles`.* FROM `roles` WHERE `roles`.`policy_id` = 12 LIMIT 1[0m
  [1m[35mComputedPolicy Load (0.3ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 11
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 97[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 98
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 99[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 100
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 101[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 102
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 103[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 104
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 105[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 106
  [1m[36mComputedPolicyException Load (0.2ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 107[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 108
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 109[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 110
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 111[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 112
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 113[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 114
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 115[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 116
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 97[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 98
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 99[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 100
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 101[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 102
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 103[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 104
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 105[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 106
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 107[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 108
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 109[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 110
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 111[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 112
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 113[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 114
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 115[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 116
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('institution', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('site', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('device', 11, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('deviceModel', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('testResult', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('encounter', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('role', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('user', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('patient', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('alert', 11, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('pageHeader', 11, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('settingsPage', 11, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 11  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 11
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  `roles`.* FROM `roles` WHERE `roles`.`institution_id` = 4  ORDER BY `roles`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `roles_users` (`user_id`, `role_id`) VALUES (10, 7)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`email` = 'new@example.com' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`invitation_token` = '2670ea4aa4f7f5e57786fbf5a6535dfaba95954c1f2b831d8510b2509f06cdc8'  ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`email`, `invitation_token`, `invitation_created_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('new@example.com', '2670ea4aa4f7f5e57786fbf5a6535dfaba95954c1f2b831d8510b2509f06cdc8', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 12
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 12[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 12
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 12[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2

InvitationMailer#invite_message: processed outbound mail in 2.5ms
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'existant@user.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('existant@user.com', '$2a$04$cYqavZ5kNekqtNSngxdSFe/2cHE55MRP.nohxF1xRSAD87CvnhQuS', 'Lourdes', 'Glover', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 13
  [1m[36m (0.2ms)[0m  [1mSELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 13[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 13
  [1m[36mComputedPolicy Load (0.2ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 13[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE `users`.`email` = BINARY 'marge@abernathyschroeder.net' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `encrypted_password`, `first_name`, `last_name`, `confirmed_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('marge@abernathyschroeder.net', '$2a$04$nS8yhlwMq.rWFBV1PydDW.5P8akS2sBmaYmBAP6Fk38khfba8JZWy', 'Sabryna', 'Swift', '2016-08-29 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.1ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `institutions` (`uuid`, `user_id`, `name`, `created_at`, `updated_at`) VALUES ('05a768ef-5a92-ab0d-fc56-f9b9118506f7', 14, 'Greg McCullough IV', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:update\",\"institution:registerDevice\",\"institution:registerDeviceModel\",\"institution:createPatient\",\"institution:createSite\",\"institution:createRole\",\"institution:readUsers\"],\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\",\"delegable\":true},{\"resource\":\"patient?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"site?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"testResult?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"encounter?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"deviceModel\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"alert?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"device?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"role?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 13 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Admin', 'admin', 5, 13, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 9
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `policies` (`name`, `definition`, `created_at`, `updated_at`) VALUES ('Institution/Institution', '{\"statement\":[{\"resource\":\"institution/5\",\"action\":[\"institution:read\",\"institution:readUsers\"]},{\"resource\":\"patient?institution=5\",\"action\":\"patient:read\"},{\"resource\":\"site?institution=5\",\"action\":\"site:read\"},{\"resource\":\"device?institution=5\",\"action\":\"device:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:query\"},{\"resource\":\"encounter?institution=5\",\"action\":\"encounter:read\"},{\"resource\":\"testResult?institution=5\",\"action\":\"testResult:medicalDashboard\"},{\"resource\":\"deviceModel\",\"action\":\"deviceModel:read\"},{\"resource\":\"alert?institution=5\",\"action\":\"alert:read\"},{\"resource\":\"pageHeader?institution=5\",\"action\":\"*\",\"delegable\":true},{\"resource\":\"settingsPage?institution=5\",\"action\":\"*\",\"delegable\":true}]}', '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mPolicy Load (0.2ms)[0m  SELECT  `policies`.* FROM `policies` WHERE `policies`.`id` = 14 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `roles` (`name`, `key`, `institution_id`, `policy_id`, `created_at`, `updated_at`) VALUES ('Institution Greg McCullough IV Reader', 'reader', 5, 14, '2016-08-30 22:27:38', '2016-08-30 22:27:38')[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `roles_users` ON `users`.`id` = `roles_users`.`user_id` WHERE `roles_users`.`role_id` = 10
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:read', 'institution', '5', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:update', 'institution', '5', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:delete', 'institution', '5', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDeviceModel', 'institution', '5', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:registerDevice', 'institution', '5', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createSite', 'institution', '5', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createPatient', 'institution', '5', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:createRole', 'institution', '5', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `resource_id`, `user_id`, `delegable`) VALUES ('institution:readUsers', 'institution', '5', 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('patient', 5, 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('site', 5, 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('testResult', 5, 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('encounter', 5, 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('alert', 5, 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('settingsPage', 5, 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('pageHeader', 5, 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('deviceModel', 5, 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('device', 5, 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`action`, `resource_type`, `user_id`, `delegable`) VALUES ('deviceModel:read', 'deviceModel', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `condition_institution_id`, `user_id`, `delegable`) VALUES ('role', 5, 14, 1)
  [1m[36mSubscriber Load (0.2ms)[0m  [1mSELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 14  ORDER BY `subscribers`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.2ms)[0m  SELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 14
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mInstitution Load (0.2ms)[0m  SELECT  `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 5 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 14 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `users` SET `last_navigation_context` = '05a768ef-5a92-ab0d-fc56-f9b9118506f7', `updated_at` = '2016-08-30 22:27:38' WHERE `users`.`id` = 14[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `policies` (`name`, `definition`, `user_id`, `created_at`, `updated_at`) VALUES ('Superadmin', '{\"statement\":[{\"action\":\"*\",\"delegable\":true,\"resource\":[\"institution\",\"site\",\"device\",\"deviceModel\",\"testResult\",\"encounter\",\"role\",\"user\",\"patient\",\"alert\",\"pageHeader\",\"settingsPage\"]}]}', 14, '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 14[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 14
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 14[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  `roles`.* FROM `roles` WHERE `roles`.`policy_id` = 15 LIMIT 1
  [1m[36mComputedPolicy Load (0.3ms)[0m  [1mSELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 14[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 129
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 130[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 131
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 132[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 133
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 134[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 135
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 136[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 137
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 138[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 139
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 140[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 141
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 142[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 143
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 144[0m
  [1m[35mComputedPolicyException Load (0.2ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 145
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 146[0m
  [1m[35mComputedPolicyException Load (0.1ms)[0m  SELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 147
  [1m[36mComputedPolicyException Load (0.1ms)[0m  [1mSELECT `computed_policy_exceptions`.* FROM `computed_policy_exceptions` WHERE `computed_policy_exceptions`.`computed_policy_id` = 148[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 129
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 130[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 131
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 132[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 133
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 134[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 135
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 136[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 137
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 138[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 139
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 140[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 141
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 142[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 143
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 144[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 145
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 146[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 147
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM `computed_policies` WHERE `computed_policies`.`id` = 148[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('institution', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('site', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('device', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('deviceModel', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('testResult', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('encounter', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('role', 14, 1)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('user', 14, 1)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('patient', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('alert', 14, 1)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('pageHeader', 14, 1)
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `computed_policies` (`resource_type`, `user_id`, `delegable`) VALUES ('settingsPage', 14, 1)[0m
  [1m[35mSubscriber Load (0.2ms)[0m  SELECT  `subscribers`.* FROM `subscribers` WHERE `subscribers`.`user_id` = 14  ORDER BY `subscribers`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mSELECT DISTINCT `policies`.`user_id` FROM `policies` WHERE `policies`.`granter_id` = 14[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  `roles`.* FROM `roles` WHERE `roles`.`institution_id` = 5  ORDER BY `roles`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `roles_users` (`user_id`, `role_id`) VALUES (13, 9)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`email` = 'new@example.com' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`invitation_token` = '165a83e62cc4fae099e0fa264df38c8ecc521d4e17c2adf00a92613bb9becae2'  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `users` (`email`, `invitation_token`, `invitation_created_at`, `password_changed_at`, `created_at`, `updated_at`) VALUES ('new@example.com', '165a83e62cc4fae099e0fa264df38c8ecc521d4e17c2adf00a92613bb9becae2', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38', '2016-08-30 22:27:38')
  [1m[36mPolicy Load (0.2ms)[0m  [1mSELECT `policies`.* FROM `policies` WHERE `policies`.`user_id` = 15[0m
  [1m[35m (0.2ms)[0m  SELECT `institutions`.`id`, `institutions`.`kind` FROM `institutions` WHERE `institutions`.`user_id` = 15
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 15[0m
  [1m[35mComputedPolicy Load (0.2ms)[0m  SELECT `computed_policies`.* FROM `computed_policies` WHERE `computed_policies`.`user_id` = 15
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m

InvitationMailer#invite_message: processed outbound mail in 2.2ms
  [1m[35m (8.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
