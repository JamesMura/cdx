{
  "metadata": {
    "version": "0.0.4",
    "api_version": "1.1.0",
    "signature": "",
    "device_models": [
      "epicenter_headless_pe"
    ],
    "conditions": [
      "MTB"
    ],
    "source": {
      "type": "headless_csv",
      "separator": ","
    }
  },
  "field_mapping": {
    "patient": [
      {
        "target_field": "patient_id",
        "source": {
          "lookup": "0"
        },
        "core": true,
        "pii": true,
        "type": "string"
      }
    ],
    "sample": [
      {
        "target_field": "sample_id",
        "source": {
          "lookup": "0"
        },
        "core": true,
        "indexed": true,
        "type": "enum",
        "options" : ["25010101", "25010102", "25010103", "25010104", "25010105", "25010106", "25010107", "25010108", "25010109", "25010110", "25010111", "25010112", "25010113", "25010114", "25010115", "25010116", "25010117", "25010118", "25010119", "25010120", "25010121", "25010122", "25010123", "25010124", "25010125", "25010126", "25010127", "25010128", "25010129", "25010130", "25010131", "25010132", "25010133", "25010134", "25010135", "25010136", "25010137", "25010138", "25010139", "25010140", "25010141", "25010142", "25010143", "25010144", "25010145", "25010146", "25010147", "25010148", "25010149", "25010150", "25010151", "25010152", "25010153", "25010154", "25010155", "25010156", "25010157", "25010158", "25010159", "25010160", "25010161", "25010162", "25010163", "25010164", "25010165", "25010166", "25010167", "25010168", "25010169", "25010170", "25010171", "25010172", "25010173", "25010174", "25010175", "25010176", "25010177", "25010178", "25010179", "25010180", "25010181", "25010182", "25010183", "25010184", "25010185", "25010186", "25010187", "25010188", "25010189", "25010190", "25010191", "25010192", "25010193", "25010194", "25010195", "25010196", "25010197", "25010198", "25010199", "25010200", "25010201", "25010202", "25010203", "25010204", "25010205", "25010206", "25010207", "25010208", "25010209", "25010210", "25010211", "25010212", "25010213", "25010214", "25010215", "25010216", "25010217", "25010218", "25010219", "25010220", "25010221", "25010222", "25010223", "25010224", "25010225", "25010226", "25010227", "25010228", "25010229", "25010230", "25010231", "25010232", "25010233", "25010234", "25010235", "25010236", "25010237", "25010238", "25010239", "25010240", "25010241", "25010242", "25010243", "25010244", "25010245", "25010246", "25010247", "25010248", "25010249", "25010250", "25010251", "25010252", "25010253", "25010254", "25010255", "25010256", "25010257", "25010258", "25010259", "25010260", "25010261", "25010262", "25010263", "25010264", "25010265", "25010266", "25010267", "25010268", "25010269", "25010270", "25010271", "25010272", "25010273", "25010274", "25010275", "25010276", "25010277", "25010278", "25010279", "25010280", "25010281", "25010282", "25010283", "25010284", "25010285", "25010286", "25010287", "25010288", "25010289", "25010290", "25010291", "25010292", "25010293", "25010294", "25010295", "25010296", "25010297", "25010298", "25010299", "25010300"]
      },
      {
        "target_field": "sample_uid",
        "source": {
          "lookup": "0"
        },
        "core": true,
        "pii": true,
        "type": "string"
      }
    ],
    "test": [
      {
        "target_field": "test_id",
        "source": {
          "lookup": "2"
        },
        "core": true,
        "indexed": true,
        "type": "string"
      },
      {
        "target_field": "start_time",
        "source": {
          "parse_date": [
            {
              "lookup": "7"
            },
            "%d/%m/%Y %I:%M:%S %P"
          ]
        },
        "core": true,
        "indexed": true,
        "type": "date"
      },
      {
        "target_field": "end_time",
        "source": {
          "parse_date": [
            {
              "lookup": "6"
            },
            "%d/%m/%Y %I:%M:%S %P"
          ]
        },
        "core": false,
        "indexed": true,
        "type": "date"
      },
      {
        "target_field": "assay_name",
        "source": {
          "lookup": "1"
        },
        "core": true,
        "indexed": true,
        "type": "string"
      },
      {
        "target_field": "results[*].condition",
        "source": "mtb",
        "type": "enum",
        "core": true,
        "indexed": true,
        "options": [
          "mtb"
        ]
      },
      {
        "target_field": "results[*].result",
        "source": {
          "map": [
            {
              "lookup": "3"
            },
            [
              {
                "match": "Umbral positivo",
                "output": "indeterminate"
              },
              {
                "match": "Positivo",
                "output": "positive"
              },
              {
                "match": "Negativo",
                "output": "negative"
              },
              {
                "match": "*",
                "output": "unknown"
              }
            ]
          ]
        },
        "type": "enum",
        "core": true,
        "indexed": true,
        "options": [
          "positive",
          "indeterminate",
          "negative",
          "unknown"
        ]
      },
      {
        "target_field": "status",
        "source": {
          "map" : [
            { "lookup": "3" },
            [
              {"match" : "Positivo", "output" : "success" },
              {"match" : "Negativo", "output" : "negative" },
              {"match" : "Umbral positivo", "output" : "success" },
              {"match" : "No v√°lido", "output" : "invalid" },
              {"match" : "En curso retirado", "output" : "error" },
              {"match" : "Completo retirado", "output" : "no_result" },
              {"match" : "*", "output" : "unknown"}
            ]
          ]
        },
        "type": "enum",
        "core": true,
        "indexed": true,
        "options": [
          "invalid",
          "error",
          "no_result",
          "success",
          "negative",
          "unknown"
        ]
      },
      {
        "target_field": "test_type",
        "source": {
          "lookup": "5"
        },
        "core": true,
        "indexed": true,
        "pii": false,
        "type": "string"
      }
    ]
  }
}
