var PatientCard = React.createClass({
  getDefaultProps: function() {
    return {
      canEdit: false
    }
  },

  render: function () {
    var patient = this.props.patient;

    if (patient == null) {
      return (
        <%= to_jsx(card(image: asset_url('card-unkown.png')) do |c|
          c.top do
            "No patient information"
          end
        end) %>
      );
    } else {
      return (
        <%= to_jsx(card(image: asset_url('card-unkown.png')) do |c|
          c.top do
            raw <<-JSX
              <a href={"/patients/" + patient.id}>{patient.name}</a><br/>
              {patient.gender || "n/a"} - {patient.dob || "n/a"} ({patient.age || "n/a"})
            JSX
          end

          c.bottom do
            raw <<-JSX
              {patient.address}<br/>
              {patient.phone}<br/>
              {(function(){
                if (patient.email) {
                  return <a href={"mailto:" + patient.email}>{patient.email}</a>;
                }
              }.bind(this))()}
            JSX
          end

          c.actions do
            raw <<-JSX
            {(function(){
              if (!this.props.canEdit) return;

              return (
                <a href={"/patients/" + patient.id + "/edit"} title="Edit">
                  <img src="#{asset_url("ic-pencil.png")}"/>
                </a>);
            }.bind(this))()}
            JSX
          end
        end) %>
      );
    }
  }
});
