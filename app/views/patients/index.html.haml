= render "filters"

.row
  .col
    - if @patients.empty?
      = empty_data icon: 'icon-outline-patient xx-large' do |c|
        - c.body do
          %h1
            = I18n.t('patients.index.no_patients')
          %p
            = I18n.t('patients.index.keep_organized')
    - else
      = cdx_table title: pluralize(@total, "patient") do |t|
        - t.columns do
          %col{:width => "25%"}
          %col{:width => "12%"}
          %col{:width => "13%"}
          %col{:width => "18%"}
          %col{:width => "32%"}
        - t.thead do
          %tr
            %th
              = I18n.t('patients.index.name')
            %th
              = I18n.t('patients.index.patient_id')
            %th
              = I18n.t('patients.index.birth_date')
            %th
              = I18n.t('patients.index.city')
            %th
              = I18n.t('patients.index.last_test_order')
        - t.tbody do
          - @patients.each do |patient|
            %tr{data: {href: patient_path(patient) }}
              %td{class: patient.name.blank? ? "unknown-name" : ""}= patient.name || "(Unknown name)"
              %td= patient.entity_id
              %td= patient.dob_description(I18n.t('date.input_format.pattern'))
              %td= patient.city !=nil ? patient.city : ''
              %td= format_date(patient.last_encounter)

      .pagination
        = render 'shared/pagination'
