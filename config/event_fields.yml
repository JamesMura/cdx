sensitive_fields:
  - patient_id
  - patient_name
  - patient_telephone_number
  - patient_zip_code

# Defaults:

# 1) If a field is not listed here, it can't be used as fiter or group by.
# 2) When listing a date field (eg: created_at):
#   a) The following filters will be enabled: created_at_since and created_at_until
#   b) The following groups will be enabled: year(created_at), month(created_at), day(created_at)
# 3) When listing a string of multi_field type field:
#   a) A 'wildcard' filter with the same name will be enabled.
#   b) A 'flat' group with the same name will be enabled.
# 4) When listing an integer type field:
#   a) A 'match' filter with the same name will be enabled.
#   b) A 'flat' group with the same name will be enabled.
# 5) If the field name ends with '_id', the default group and filter will be created with the name without the '_id': institution_id => institution.
# 6) Range grouping also implies flat grouping, and it will depend on what is received on the request.
# 7) If the default group or filter is not needed, this must be overriden with the keyword 'none'.
# 8) The default field type is 'string'
# 9) If a filter or group has no name, it will be the same as the field name, as specified in (5).
# 10) If a filter or group has no type, it will be the default type as specified in (3) and (4).
# 11) If a filter or group is added with the sole option 'include_default: true', then the default filter or group will be added to the filters or groups array, as specified in (3), (4), and (5).

searchable_fields:
  - name: created_at
    type: date
    filter_parameter_definition:
      - name: since
        type: range
        boundary: from
        options:
          include_lower: true
      - name: until
        type: range
        boundary: to
        options:
          include_lower: true
  - name: event_id
    group_parameter_definition: none
  - name: uuid
    filter_parameter_definition:
      - type: match
    group_parameter_definition: none
  - name: device_uuid
    filter_parameter_definition:
      - name: device
    group_parameter_definition:
      - name: device
  - name: device_serial_number
  - name: laboratory_id
    type: integer
  - name: institution_id
    type: integer
  # - name: location_id
  #   type: integer
  - name: parent_locations
    type: integer
    filter_parameter_definition:
      - name: location
    group_parameter_definition:
      - name: admin_level
        type: kind
        reference_table:
          name: locations
          value_field: id
          query_target: depth
  - name: age
    type: integer
    filter_parameter_definition:
      - include_default: true
      - name: min_age
        type: range
        boundary: from
        options:
          include_lower: true
      - name: max_age
        type: range
        boundary: to
        options:
          include_upper: true
    group_parameter_definition:
      - type: range
  - name: assay_name
  - name: gender
  - name: ethnicity
  # There is no point in listing a field for which you won't filter or group by
  # - name: start_time
  #   type: date
  #   filter_parameter_definition: none
  #   group_parameter_definition: none
  # - name: system_user
  #   type: string
  #   filter_parameter_definition: none
  #   group_parameter_definition: none
  - name: results
    type: nested
    sub_fields:
      - name: result
        type: multi_field
      - name: condition

# searchable_fields:
#   - name: created_at
#     type: date
#     filter_parameter_definition:
#       - name: created_since
#         type: range
#         boundary: from
#         options:
#           include_lower: true
#       - name: until
#         type: range
#         boundary: to
#         options:
#           include_lower: true
#   - name: event_id
#     type: string
#     filter_parameter_definition:
#       - name: event_id
#         type: wildcard
#   - name: device_uuid
#     type: string
#     filter_parameter_definition:
#       - name: device
#         type: match
#     group_parameter_definition:
#       - name: device
#         type: flat
#   - name: laboratory_id
#     type: integer
#     filter_parameter_definition:
#       - name: laboratory
#         type: match
#     group_parameter_definition:
#       - name: laboratory
#         type: flat
#   - name: institution_id
#     type: integer
#     filter_parameter_definition:
#       - name: institution
#         type: match
#     group_parameter_definition:
#       - name: institution
#         type: flat
#   - name: location_id
#     type: integer
#   - name: parent_locations
#     type: integer
#     filter_parameter_definition:
#       - name: location
#         type: match
#     group_parameter_definition:
#       - name: admin_level
#         type: kind
#         reference_table:
#           name: locations
#           value_field: id
#           query_target: depth
#   - name: age
#     type: integer
#     filter_parameter_definition:
#       - name: age
#         type: match
#       - name: min_age
#         type: range
#         boundary: from
#         options:
#           include_lower: true
#       - name: max_age
#         type: range
#         boundary: to
#         options:
#           include_upper: true
#     group_parameter_definition:
#       - name: age
#         type: flat
#       - name: age_buckets
#         type: range
#   - name: assay_name
#     type: string
#     filter_parameter_definition:
#       - name: assay_name
#         type: wildcard
#   - name: device_serial_number
#     type: string
#   - name: gender
#     type: string
#     filter_parameter_definition:
#       - name: gender
#         type: wildcard
#     group_parameter_definition:
#       - name: gender
#         type: flat
#   - name: ethnicity
#     type: string
#     filter_parameter_definition:
#       - name: ethnicity
#         type: wildcard
#     group_parameter_definition:
#       - name: ethnicity
#         type: flat
#   - name: uuid
#     type: string
#     filter_parameter_definition:
#       - name: uuid
#         type: match
#   - name: start_time
#     type: date
#   - name: system_user
#     type: string
#   - name: results
#     type: nested
#     sub_fields:
#       - name: result
#         type: multi_field
#         filter_parameter_definition:
#           - name: result
#             type: wildcard
#         group_parameter_definition:
#           - name: result
#             type: flat
#       - name: condition
#         type: string
#         filter_parameter_definition:
#           - name: condition
#             type: wildcard
#         group_parameter_definition:
#           - name: condition
#             type: flat
